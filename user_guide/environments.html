<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-134882379-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-134882379-1",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Unleash" href="/opensearch.xml"><title data-react-helmet="true">Environments | Unleash</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://docs.getunleash.io/img/logo.png"><meta data-react-helmet="true" name="twitter:image" content="https://docs.getunleash.io/img/logo.png"><meta data-react-helmet="true" property="og:url" content="https://docs.getunleash.io/user_guide/environments"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Environments | Unleash"><meta data-react-helmet="true" name="description" content="Environments is a new feature currently in beta. It can be enabled from Unleash v4.2.x with a feature toggle. We plan to make the environment feature general available from Unleash v4.3.x."><meta data-react-helmet="true" property="og:description" content="Environments is a new feature currently in beta. It can be enabled from Unleash v4.2.x with a feature toggle. We plan to make the environment feature general available from Unleash v4.3.x."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.getunleash.io/user_guide/environments"><link data-react-helmet="true" rel="alternate" href="https://docs.getunleash.io/user_guide/environments" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.getunleash.io/user_guide/environments" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.61b417c9.css">
<link rel="preload" href="/assets/js/runtime~main.68b78ab5.js" as="script">
<link rel="preload" href="/assets/js/main.be84329a.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Unleash logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo.svg" alt="Unleash logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Unleash</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Documentation</a><a class="navbar__item navbar__link" href="/deploy/getting_started">Deploy and manage</a><a class="navbar__item navbar__link" href="/integrations/integrations">Integrations</a><a class="navbar__item navbar__link" href="/api">API</a></div><div class="navbar__items navbar__items--right"><a href="https://www.getunleash.io/plans" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Unleash Enterprise<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/Unleash/unleash" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">üåú</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">üåû</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="searchBox_NKBi"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><main class="docMainContainer_r8cw docMainContainerEnhanced_SOUu"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Environments</h1></header><div class="alert alert--info" role="alert"><em>Environments</em> is a new feature currently in beta. It can be enabled from <i>Unleash v4.2.x</i> with a feature toggle. We plan to make the environment feature general available from <i>Unleash v4.3.x</i>.</div><br><div style="position:relative;padding-bottom:56.25%;height:0"><iframe src="https://www.loom.com/embed/95239e875bbc4e09a5c5833e1942e4b0" frameborder="0" style="position:absolute;top:0;left:0;width:100%;height:100%"></iframe></div><p>Environments is a new way to organize activation strategy configurations for feature toggles into separate environments. In Unleash, a feature lives across all your environments ‚Äî after all, the goal is to get the new feature released as soon as possible ‚Äî but it makes sense to configure the activation differently per environment. You might want the feature enabled for everyone in development, but only for yourself in production, for instance.</p><p>Previously, Unleash Enterprise could use <a href="https://docs.getunleash.io/advanced/strategy_constraints" target="_blank" rel="noopener noreferrer">strategy constraints</a> to control the rollout across environments. With the new environments feature, this is no longer necessary. Now all activation strategies belong to an explicit environment instead.</p><p>Further, connected applications will use environment-scoped API keys to make sure they only download feature toggle configurations for the environment they are running in.</p><p>Finally, metrics have also been upgraded to record the environment. This, in turn, means that Unleash can display usage metrics per environment.</p><p>Despite this being a shift in how Unleash works, everything will continue to work exactly how it did for existing users. For backwards compatibility, we have created an environment named &quot;default&quot; that will contain all of the existing toggles and API keys. Read more about that in <a href="#migration">the migration section</a>.</p><p><img alt="Environments Overview" src="/assets/images/environments_overview-f02297b24677cdba3b8e3ceacfe86ba1.svg" title="A feature toggle exists across all environments, but take different activation strategies per environment."></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="how-to-start-using-environments">How to start using environments<a aria-hidden="true" class="hash-link" href="#how-to-start-using-environments" title="Direct link to heading">‚Äã</a></h2><p>In order to start using environments you need to be on Unleash v4.2 or higher. You also need to have the environment feature enabled (if you are using Unleash Hosted, please reach out on <a href="mailto:contact@getunleash.io" target="_blank" rel="noopener noreferrer">contact@getunleash.io</a> if you want to start using environments.</p><p>Note that in order to enable an environment for a feature toggle, you must first add activation strategies for that environment. You cannot enable an environment without activation strategies.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="step-1-enable-new-environments-for-your-project">Step 1: Enable new environments for your Project<a aria-hidden="true" class="hash-link" href="#step-1-enable-new-environments-for-your-project" title="Direct link to heading">‚Äã</a></h3><p>Navigate to the project and choose the ‚Äúenvironments‚Äù tab.</p><p><img alt="Configure environment for this project" src="/assets/images/environments_configure-0b0476a52691f82d4f07f4afba88294a.png" title="Configure environment for this project"></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="step-2-configure-activation-strategies-for-the-new-environment">Step 2: Configure activation strategies for the new environment<a aria-hidden="true" class="hash-link" href="#step-2-configure-activation-strategies-for-the-new-environment" title="Direct link to heading">‚Äã</a></h3><p>From the ‚Äúfeature toggle view‚Äù you will now be able to configure activation strategies per environment. You can also enable and disable environments here. Remember that an environment must have activation strategies before you can enable it.</p><p><img alt="Add strategy configuration per environment" src="/assets/images/environments_strategies-075e815234ea7cee5ac8cb0ad34ae3a1.png" title="Add strategy configuration per environment"></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="step-3-create-environment-specific-api-keys">Step 3: Create environment specific API keys<a aria-hidden="true" class="hash-link" href="#step-3-create-environment-specific-api-keys" title="Direct link to heading">‚Äã</a></h3><p>In order for the SDK to download the feature toggle configuration for the correct environment you will need to create an API token for a defined environment.</p><p><img alt="Create Environment specific API Keys" src="/assets/images/environments_api_keys-6387ceadf6eb72f1ee4fa786da1b3bba.png" title="Create Environment specific API Keys"></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="migration">Migration<a aria-hidden="true" class="hash-link" href="#migration" title="Direct link to heading">‚Äã</a></h2><p>To ease migration we have created a special environment called ‚Äúdefault‚Äù. All existing activation strategies have been added to this environment. All existing Client API keys have also been scoped to work against the default environment to ensure zero disruption as part of the upgrade.</p><p>If you&#x27;re currently using strategy constraints together with the ‚Äúenvironment‚Äù field on the Unleash Context, you should be aware that the new environment support works slightly differently. With environments, the SDK API will use the client&#x27;s API key to determine which environment the client is configured for. The API then sends <em>only</em> strategies belonging to the client&#x27;s environment. This means that you might not need the &quot;environment&quot; property of the Unleash Context anymore.</p><p><img alt="You will not use strategy constraints for environments any more." src="/assets/images/environments_strategy_constraints-5b064d3f27ac0912c1e7ee8165cf4f11.png" title="You will not use strategy constraints for environments any more."></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="addons">Addons<a aria-hidden="true" class="hash-link" href="#addons" title="Direct link to heading">‚Äã</a></h3><p>We have made some slight changes to events related to feature toggles: there&#x27;s one deprecation and several new event types. Most of the new events contain <em>project</em> and <em>environment</em> data.</p><p>To avoid missing important updates, you will also need to update your addon configuration to subscribe to the new events.</p><p><strong>Deprecated events:</strong></p><ul><li><strong>FEATURE_UPDATE</strong> - <em>not used after switching to environments</em></li></ul><p><strong>New Events</strong></p><ul><li><strong>FEATURE-METADATA-UPDATED</strong> - The feature toggle metadata was updated (across all environments).</li><li><strong>FEATURE-STRATEGY-ADD</strong>¬π - An activation strategy was added to a feature toggle in an environment. The <em>data</em> will contain the updated strategy configuration.</li><li><strong>FEATURE-STRATEGY-UPDATE</strong>¬π - An activation strategy was updated for a feature toggle. The <em>data</em> will contain the updated strategy configuration.</li><li><strong>FEATURE-STRATEGY-REMOVE</strong>¬π - An activation strategy was removed for a feature toggle.</li><li><strong>FEATURE-ENVIRONMENT-ENABLED</strong>¬π - Signals that a feature toggle has been <em>enabled</em> in a defined environment.</li><li><strong>FEATURE-ENVIRONMENT-DISABLED</strong>¬π - Signals that a feature toggle has been <em>disabled</em> in a defined environment.</li><li><strong>FEATURE-PROJECT-CHANGE</strong>¬π - The feature toggle was moved to a new project.</li></ul><blockquote><p>1) These feature events will contain <em>project</em> and <em>environment</em> as part of the event metadata.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_y2LR" id="api">API<a aria-hidden="true" class="hash-link" href="#api" title="Direct link to heading">‚Äã</a></h3><p>In order to support configuration per environment we had to rebuild our feature toggle admin API to account for environments as well. This means that we&#x27;re making the following changes to the API:</p><ul><li><strong>/api/admin/features</strong> - <em>deprecated (scheduled for removal in Unleash v5.0). The <a href="https://docs.getunleash.io/api/admin/features" target="_blank" rel="noopener noreferrer">old feature toggles admin API</a> still works, but strategy configuration will be assumed to target the ‚Äúdefault‚Äù environment.</em></li><li><strong>/api/admin/projects/:projectId/features</strong> - New feature API to be used for feature toggles which also adds support for environments. See <a href="https://docs.getunleash.io/api/admin/feature-toggles-v2" target="_blank" rel="noopener noreferrer">the documentation</a> to learn more.</li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="plan-differences">Plan Differences<a aria-hidden="true" class="hash-link" href="#plan-differences" title="Direct link to heading">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="open-source-free">Open-Source (free)<a aria-hidden="true" class="hash-link" href="#open-source-free" title="Direct link to heading">‚Äã</a></h3><ul><li>Will get access to two preconfigured environments: ‚Äúdevelopment‚Äù and ‚Äúproduction‚Äù. Existing users of Unleash will also get an additional ‚Äúdefault‚Äù environment to simplify the adoption of environments.</li><li>Will be possible to turn environments on/off for all projects.</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="pro-commercial">Pro (commercial)<a aria-hidden="true" class="hash-link" href="#pro-commercial" title="Direct link to heading">‚Äã</a></h3><ul><li>Will get access to two preconfigured environments: ‚Äúdevelopment‚Äù and ‚Äúproduction‚Äù. Existing users of Unleash will also get an additional ‚Äúdefault‚Äù environment to simplify the adoption of environments.</li><li>Will be possible to turn environments on/off for the default project.</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="enterprise-commercial">Enterprise (commercial)<a aria-hidden="true" class="hash-link" href="#enterprise-commercial" title="Direct link to heading">‚Äã</a></h3><ul><li>Will get access to two preconfigured environments: ‚Äúdevelopment‚Äù and ‚Äúproduction‚Äù. Existing users of Unleash will also get an additional ‚Äúdefault‚Äù environment to simplify the adoption of environments.</li><li>Will be possible to turn environments on/off for all projects</li><li>Will be allowed to update and remove environments.</li><li>Will be allowed to create new environments.</li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="rollout-plan">Rollout Plan<a aria-hidden="true" class="hash-link" href="#rollout-plan" title="Direct link to heading">‚Äã</a></h2><ul><li><strong>Unleash v4.2</strong> will provide <em>early access</em> to environment support. This means that it can be enabled per customer via a feature flag.</li><li><strong>Unleash v4.3</strong> plans to provide general access to the environment support for all users of Unleash (Open-Source, Pro, Enterprise).</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="future-enhancements">Future enhancements<a aria-hidden="true" class="hash-link" href="#future-enhancements" title="Direct link to heading">‚Äã</a></h3><p>With improved environment capabilities we have also done the groundwork to be able to also improve other related aspects inside Unleash:</p><ul><li>Improve <strong>Usage Metrics</strong> to be able to show usage and evaluation results per hour for multiple days with dimensions such as environment, application and time (per hour).</li><li>Improve <strong>RBAC</strong> with the ability to limit who can change configuration for a specific environment (planned as an enterprise feature).</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Unleash/unleash/edit/master/website/docs/user_guide/environments.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-to-start-using-environments" class="table-of-contents__link toc-highlight">How to start using environments</a><ul><li><a href="#step-1-enable-new-environments-for-your-project" class="table-of-contents__link toc-highlight">Step 1: Enable new environments for your Project</a></li><li><a href="#step-2-configure-activation-strategies-for-the-new-environment" class="table-of-contents__link toc-highlight">Step 2: Configure activation strategies for the new environment</a></li><li><a href="#step-3-create-environment-specific-api-keys" class="table-of-contents__link toc-highlight">Step 3: Create environment specific API keys</a></li></ul></li><li><a href="#migration" class="table-of-contents__link toc-highlight">Migration</a><ul><li><a href="#addons" class="table-of-contents__link toc-highlight">Addons</a></li><li><a href="#api" class="table-of-contents__link toc-highlight">API</a></li></ul></li><li><a href="#plan-differences" class="table-of-contents__link toc-highlight">Plan Differences</a><ul><li><a href="#open-source-free" class="table-of-contents__link toc-highlight">Open-Source (free)</a></li><li><a href="#pro-commercial" class="table-of-contents__link toc-highlight">Pro (commercial)</a></li><li><a href="#enterprise-commercial" class="table-of-contents__link toc-highlight">Enterprise (commercial)</a></li></ul></li><li><a href="#rollout-plan" class="table-of-contents__link toc-highlight">Rollout Plan</a><ul><li><a href="#future-enhancements" class="table-of-contents__link toc-highlight">Future enhancements</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Product</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/">Docs</a></li><li class="footer__item"><a href="https://github.com/Unleash/unleash" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Open-Source<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/orgs/Unleash/projects/5" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Roadmap<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/unleash" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://join.slack.com/t/unleash-community/shared_invite/zt-8b6l1uut-LL67kLpIXm9bcN3~6RVaRQ" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/getunleash" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/logo.svg" alt="Unleash logo" class="themedImage_TMUO themedImage--light_4Vu1 footer__logo"><img src="/img/logo.svg" alt="Unleash logo" class="themedImage_TMUO themedImage--dark_uzRr footer__logo"></div><div class="footer__copyright">Copyright ¬© 2021 Unleash. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.68b78ab5.js"></script>
<script src="/assets/js/main.be84329a.js"></script>
</body>
</html>