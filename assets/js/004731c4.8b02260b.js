"use strict";(self.webpackChunkwebsitev_2=self.webpackChunkwebsitev_2||[]).push([[4539],{3905:function(t,e,a){a.d(e,{Zo:function(){return d},kt:function(){return c}});var n=a(7294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function i(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function o(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?i(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function l(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},i=Object.keys(t);for(n=0;n<i.length;n++)a=i[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var s=n.createContext({}),p=function(t){var e=n.useContext(s),a=e;return t&&(a="function"==typeof t?t(e):o(o({},e),t)),a},d=function(t){var e=p(t.components);return n.createElement(s.Provider,{value:e},t.children)},m={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},u=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,i=t.originalType,s=t.parentName,d=l(t,["components","mdxType","originalType","parentName"]),u=p(a),c=r,k=u["".concat(s,".").concat(c)]||u[c]||m[c]||i;return a?n.createElement(k,o(o({ref:e},d),{},{components:a})):n.createElement(k,o({ref:e},d))}));function c(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var i=a.length,o=new Array(i);o[0]=u;var l={};for(var s in e)hasOwnProperty.call(e,s)&&(l[s]=e[s]);l.originalType=t,l.mdxType="string"==typeof t?t:r,o[1]=l;for(var p=2;p<i;p++)o[p]=a[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},3487:function(t,e,a){a.r(e),a.d(e,{contentTitle:function(){return s},default:function(){return u},frontMatter:function(){return l},metadata:function(){return p},toc:function(){return d}});var n=a(7462),r=a(3366),i=(a(7294),a(3905)),o=["components"],l={id:"strategy_constraints",title:"Strategy Constraints"},s=void 0,p={unversionedId:"advanced/strategy_constraints",id:"advanced/strategy_constraints",title:"Strategy Constraints",description:"Strategy constraints are available to Unleash Pro and Enterprise users.",source:"@site/docs/advanced/strategy-constraints.md",sourceDirName:"advanced",slug:"/advanced/strategy_constraints",permalink:"/advanced/strategy_constraints",editUrl:"https://github.com/Unleash/unleash/edit/main/website/docs/advanced/strategy-constraints.md",tags:[],version:"current",frontMatter:{id:"strategy_constraints",title:"Strategy Constraints"},sidebar:"documentation",previous:{title:"Stickiness",permalink:"/advanced/stickiness"},next:{title:"Tagging Features",permalink:"/advanced/tags"}},d=[{value:"Constraining on custom context fields",id:"constraining-on-custom-context-fields",children:[],level:2},{value:"Constraint structure",id:"constraint-structure",children:[],level:2},{value:"Strategy constraint operators",id:"strategy-constraint-operators",children:[{value:"Constraint negation / inversion",id:"constraint-negation",children:[],level:3},{value:"Numeric operators",id:"numeric-operators",children:[],level:3},{value:"Date and time operators",id:"date-and-time-operators",children:[],level:3},{value:"String operators",id:"string-operators",children:[],level:3},{value:"Versioning (SemVer) operators",id:"versioning-semver-operators",children:[],level:3}],level:2},{value:"Interacting with strategy constraints in the client SDKs",id:"sdks",children:[],level:2},{value:"Deprecated: Constrain on a specific environment",id:"constrain-on-a-specific-environment",children:[],level:2}],m={toc:d};function u(t){var e=t.components,l=(0,r.Z)(t,o);return(0,i.kt)("wrapper",(0,n.Z)({},m,l,{components:e,mdxType:"MDXLayout"}),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Availability")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Strategy constraints are available to Unleash Pro and Enterprise users."),(0,i.kt)("p",{parentName:"div"},"Unleash 4.9 introduced a more comprehensive set of constraint operators. These require that both Unleash ",(0,i.kt)("em",{parentName:"p"},"and")," your client SDK of choice support them. See the ",(0,i.kt)("a",{parentName:"p",href:"/sdks#server-side-compatibility-table"},"SDK compatibility table")," for more information. Prior to Unleash 4.9, the only available operators were ",(0,i.kt)("inlineCode",{parentName:"p"},"IN")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"NOT_IN"),"."))),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"undefined behavior")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"When using ",(0,i.kt)("em",{parentName:"p"},"advanced strategy constraints")," (any operator that isn't ",(0,i.kt)("inlineCode",{parentName:"p"},"IN")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"NOT_IN"),"), ",(0,i.kt)("em",{parentName:"p"},"make sure your client SDK is up to date")," and supports this feature. For older versions of the client SDKs we ",(0,i.kt)("strong",{parentName:"p"},"cannot guarantee")," any specific behavior: the constraints may evaluate to ",(0,i.kt)("inlineCode",{parentName:"p"},"false"),", they may evaluate to ",(0,i.kt)("inlineCode",{parentName:"p"},"true"),", or the client may raise an exception (as in the case of the ",(0,i.kt)("strong",{parentName:"p"},"Ruby SDK")," prior to ",(0,i.kt)("strong",{parentName:"p"},"version 4.1.0"),")."))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Strategy constraints")," are conditions that must be satisifed for an ",(0,i.kt)("a",{parentName:"p",href:"../user_guide/activation_strategy"},"activation strategy")," to be evaluated for a feature toggle.\nWith strategy constraints, you can:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"roll out a feature ",(0,i.kt)("strong",{parentName:"li"},"only to users in a specific region")),(0,i.kt)("li",{parentName:"ul"},"schedule a feature to be ",(0,i.kt)("strong",{parentName:"li"},"released at a specific time")),(0,i.kt)("li",{parentName:"ul"},"make a feature available for ",(0,i.kt)("strong",{parentName:"li"},"a limited time only")),(0,i.kt)("li",{parentName:"ul"},"release a feature to users with one of a set of ",(0,i.kt)("strong",{parentName:"li"},"email addresses")),(0,i.kt)("li",{parentName:"ul"},"... and much more!")),(0,i.kt)("p",null,"Strategy constraints use fields from the ",(0,i.kt)("a",{parentName:"p",href:"../user_guide/unleash_context"},"Unleash Context")," to determine whether a strategy should apply or not.\nYou can constrain both on ",(0,i.kt)("a",{parentName:"p",href:"../user_guide/unleash_context#structure"},"standard context fields")," and on ",(0,i.kt)("a",{parentName:"p",href:"../user_guide/unleash_context#custom-context-fields"},"custom context fields"),"."),(0,i.kt)("p",null,"This page explains what strategy constraints are in Unleash and how they work. If you want to know ",(0,i.kt)("em",{parentName:"p"},"how you add")," strategy constraints to an activation strategy, see ",(0,i.kt)("a",{parentName:"p",href:"/how-to/how-to-add-strategy-constraints",title:"how to add strategy constraints"},"the corresponding how-to guide"),"."),(0,i.kt)("h2",{id:"constraining-on-custom-context-fields"},"Constraining on custom context fields"),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Making custom context fields available")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"To be able to constrain on a field, it must be listed under the Context Field menu. If a field isn't listed, you can add it yourself. See ",(0,i.kt)("a",{parentName:"p",href:"/how-to/how-to-define-custom-context-fields"},"the how-to guide for creating your own custom fields")," for more info."))),(0,i.kt)("p",null,"Unleash only provides a limited set of context fields by default, and they may not fulfill all your needs.\nBy using ",(0,i.kt)("a",{parentName:"p",href:"../user_guide/unleash_context#custom-context-fields"},"custom context fields"),", you can tailor strategy constraints to your specific use case, such as:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"based on tenant IDs, release a feature to only specific tenants in a multi-tenant setup"),(0,i.kt)("li",{parentName:"ul"},"release a feature to users in a specific region"),(0,i.kt)("li",{parentName:"ul"},"release a feature only to beta testers")),(0,i.kt)("p",null,"You can also combine strategy constraints with the ",(0,i.kt)("a",{parentName:"p",href:"../user_guide/activation_strategy#gradual-rollout"},"gradual rollout strategy")," to do a gradual rollout to a ",(0,i.kt)("strong",{parentName:"p"},"specific segment")," of your user base."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"A toggle with the gradual rollout strategy. The toggle is constrained on the custom content field &quot;region&quot; and set to only activate if the region is Africa or Europe.",src:a(970).Z,width:"2457",height:"1341"})),(0,i.kt)("h2",{id:"constraint-structure"},"Constraint structure"),(0,i.kt)("p",null,"Each strategy constraint has three parts:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"a ",(0,i.kt)("strong",{parentName:"li"},"context field"),": The context field to use for evaluation."),(0,i.kt)("li",{parentName:"ul"},"an ",(0,i.kt)("strong",{parentName:"li"},"operator"),": One of the ",(0,i.kt)("a",{parentName:"li",href:"#strategy-constraint-operators"},"operators listed below"),"."),(0,i.kt)("li",{parentName:"ul"},"a ",(0,i.kt)("strong",{parentName:"li"},"value"),"/",(0,i.kt)("strong",{parentName:"li"},"list of values"),": A value or list of values to use in the evaluation of the constraint.")),(0,i.kt)("p",null,"These parts turn the strategy constraint into an expression that evaluates to either ",(0,i.kt)("inlineCode",{parentName:"p"},"true")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"false"),"."),(0,i.kt)("p",null,"To clarify, here's a few example strategy constraints and what they do:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Context field"),(0,i.kt)("th",{parentName:"tr",align:null},"Operator"),(0,i.kt)("th",{parentName:"tr",align:null},"Value(s)"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"userId")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"STR_ENDS_WITH")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"@example.com, @mycompany.com")),(0,i.kt)("td",{parentName:"tr",align:null},"Evaluates to ",(0,i.kt)("inlineCode",{parentName:"td"},"true")," for users whose user IDs end with ",(0,i.kt)("inlineCode",{parentName:"td"},"@example.com")," or ",(0,i.kt)("inlineCode",{parentName:"td"},"@mycompany.com"),".")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"currentTime")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"DATE_AFTER")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"2022-06-05 21:43:22Z")),(0,i.kt)("td",{parentName:"tr",align:null},"Evaluates to ",(0,i.kt)("inlineCode",{parentName:"td"},"true")," if the current time is after ",(0,i.kt)("inlineCode",{parentName:"td"},"2022-06-05 21:43:22Z"),".")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"userScore"),(0,i.kt)("sup",{parentName:"td",id:"fnref-1"},(0,i.kt)("a",{parentName:"sup",href:"#fn-1",className:"footnote-ref"},"1"))),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"NUM_GTE")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"1000")),(0,i.kt)("td",{parentName:"tr",align:null},"Evaluates to ",(0,i.kt)("inlineCode",{parentName:"td"},"true")," if the ",(0,i.kt)("a",{parentName:"td",href:"../user_guide/unleash_context#custom-context-fields"},"custom context field")," ",(0,i.kt)("inlineCode",{parentName:"td"},"userScore")," has a value of ",(0,i.kt)("inlineCode",{parentName:"td"},"1000")," or higher.")))),(0,i.kt)("h2",{id:"strategy-constraint-operators"},"Strategy constraint operators"),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"Placeholder context field")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"In this section, ",(0,i.kt)("inlineCode",{parentName:"p"},"<context-field>")," is used as a placeholder for an arbitrary context field. With the exception of the ",(0,i.kt)("inlineCode",{parentName:"p"},"currentTime")," field, you can use any context field in its place."))),(0,i.kt)("p",null,"Unleash currently supports 15 different constraint operators.\nThe operators can be grouped into four different categories based on their method of comparison."),(0,i.kt)("h3",{id:"constraint-negation"},"Constraint negation / inversion"),(0,i.kt)("p",null,"All constraint expressions can be ",(0,i.kt)("strong",{parentName:"p"},"negated"),", meaning that they get their opposite value. Constraints are evaluated to either ",(0,i.kt)("inlineCode",{parentName:"p"},"true")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"false"),". Negating a constraint would turn a ",(0,i.kt)("inlineCode",{parentName:"p"},"true")," value into a ",(0,i.kt)("inlineCode",{parentName:"p"},"false")," and a ",(0,i.kt)("inlineCode",{parentName:"p"},"false")," value into a ",(0,i.kt)("inlineCode",{parentName:"p"},"true")," value."),(0,i.kt)("p",null,"For instance, using the numeric equivalence operator ",(0,i.kt)("inlineCode",{parentName:"p"},"NUM_EQ"),", the following truth table shows the how value negation affects the result:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Expression"),(0,i.kt)("th",{parentName:"tr",align:null},"Value"),(0,i.kt)("th",{parentName:"tr",align:null},"Negated"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"4 ",(0,i.kt)("inlineCode",{parentName:"td"},"NUM_EQ")," 4"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"true")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"false"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"4 ",(0,i.kt)("inlineCode",{parentName:"td"},"NUM_EQ")," 5"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"false")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"true"))))),(0,i.kt)("h3",{id:"numeric-operators"},"Numeric operators"),(0,i.kt)("p",null,"Numeric operators compare the numeric values of context fields with your provided value."),(0,i.kt)("p",null,"Numeric operators only accept single values."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Name"),(0,i.kt)("th",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"th"},"true")," if ",(0,i.kt)("inlineCode",{parentName:"th"},"<context-field>")," is ..."))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"NUM_EQ")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"equal")," to the provided value; the mathematical ",(0,i.kt)("inlineCode",{parentName:"td"},"=")," operator")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"NUM_GT")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"strictly greater than")," the provided value; the mathematical ",(0,i.kt)("inlineCode",{parentName:"td"},">")," operator")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"NUM_GTE")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"greater than or equal to")," the provided value; the mathematical ",(0,i.kt)("inlineCode",{parentName:"td"},"\u2a7e")," operator")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"NUM_LT")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"strictly less than")," the provided value; the mathematical ",(0,i.kt)("inlineCode",{parentName:"td"},"<")," operator")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"NUM_LTE")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"less than or equal to")," the provided value; the mathematical ",(0,i.kt)("inlineCode",{parentName:"td"},"\u2a7d")," operator")))),(0,i.kt)("p",null,"You can read more about ",(0,i.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Equality_(mathematics)",title:"Mathematical equality at Wikipedia"},"numeric equality")," or ",(0,i.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Inequality_(mathematics)"},"numeric inequality operators at Wikipedia"),"."),(0,i.kt)("h3",{id:"date-and-time-operators"},"Date and time operators"),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),(0,i.kt)("inlineCode",{parentName:"h5"},"currentTime")," and date and time operators")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"The date and time operators are ",(0,i.kt)("strong",{parentName:"p"},"only available on the ",(0,i.kt)("inlineCode",{parentName:"strong"},"currentTime"))," context field. Furthermore, the ",(0,i.kt)("inlineCode",{parentName:"p"},"currentTime")," context field ",(0,i.kt)("strong",{parentName:"p"},"can not be used")," with any of the other operators."))),(0,i.kt)("p",null,"With the date and time operators, you can enable a feature before and/or after a specified time.\nThe operators compare the ",(0,i.kt)("a",{parentName:"p",href:"../user_guide/unleash_context"},"Unleash context's")," ",(0,i.kt)("inlineCode",{parentName:"p"},"currentTime")," property against the provided value."),(0,i.kt)("p",null,"You can create a ",(0,i.kt)("strong",{parentName:"p"},"time span")," by combining the two constraint operators using two different constraints on the same strategy.\nIn that case the strategy will be evaluated from ",(0,i.kt)("inlineCode",{parentName:"p"},"DATE_AFTER")," and until ",(0,i.kt)("inlineCode",{parentName:"p"},"DATE_BEFORE"),"."),(0,i.kt)("p",null,"Date and time operators only support single values."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Name"),(0,i.kt)("th",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"th"},"true")," if ",(0,i.kt)("inlineCode",{parentName:"th"},"currentTime")," is ..."))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"DATE_AFTER")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"after")," the provided date")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"DATE_BEFORE")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"before")," the provided date")))),(0,i.kt)("h3",{id:"string-operators"},"String operators"),(0,i.kt)("p",null,"String operators differ from the other categories in two different ways:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"all operators accept multiple values"),(0,i.kt)("li",{parentName:"ul"},"most operators also consider ",(0,i.kt)("a",{parentName:"li",href:"https://en.wikipedia.org/wiki/Letter_case",title:"letter case on Wikipedia"},"letter case")," and can be set to be case-sensitive or case-insensitive")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Name"),(0,i.kt)("th",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"th"},"true")," if ",(0,i.kt)("inlineCode",{parentName:"th"},"<context-field>")," ..."),(0,i.kt)("th",{parentName:"tr",align:null},"Supports case-insensitivity"),(0,i.kt)("th",{parentName:"tr",align:null},"Available since"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"IN")),(0,i.kt)("td",{parentName:"tr",align:null},"is ",(0,i.kt)("strong",{parentName:"td"},"equal")," to any of the provided values"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"v3.3")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"NOT_IN")),(0,i.kt)("td",{parentName:"tr",align:null},"is ",(0,i.kt)("strong",{parentName:"td"},"not equal")," to any of the provided values"),(0,i.kt)("td",{parentName:"tr",align:null},"No"),(0,i.kt)("td",{parentName:"tr",align:null},"v3.3")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"STR_CONTAINS")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"contains")," any of the provided strings"),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},"v4.9")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"STR_ENDS_WITH")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"ends")," with any of the provided strings"),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},"v4.9")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"STR_STARTS_WITH")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"starts")," with any of the provided strings"),(0,i.kt)("td",{parentName:"tr",align:null},"Yes"),(0,i.kt)("td",{parentName:"tr",align:null},"v4.9")))),(0,i.kt)("h3",{id:"versioning-semver-operators"},"Versioning (SemVer) operators"),(0,i.kt)("p",null,"The SemVer operators are used to compare version numbers such as application versions, dependency versions, etc."),(0,i.kt)("p",null,"The SemVer input must follow a few rules:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The value you enter ",(0,i.kt)("strong",{parentName:"li"},"must")," start with and contain at least major, minor, and patch versions: Example: ",(0,i.kt)("inlineCode",{parentName:"li"},"1.2.3")),(0,i.kt)("li",{parentName:"ul"},"Optionally, you can also add pre-release version information by adding a hyphen and series of dot separated identifiers after the patch version. Example: ",(0,i.kt)("inlineCode",{parentName:"li"},"1.2.3-rc.2"))),(0,i.kt)("p",null,"Versions with pre-release indicators (e.g. ",(0,i.kt)("inlineCode",{parentName:"p"},"4.8.0-rc.2"),") are considered ",(0,i.kt)("em",{parentName:"p"},"less than")," versions without (e.g. ",(0,i.kt)("inlineCode",{parentName:"p"},"4.8.0"),") in accordance with ",(0,i.kt)("a",{parentName:"p",href:"https://semver.org/#spec-item-11"},"the SemVer specification, item 11"),"."),(0,i.kt)("p",null,"You can read more about SemVer in ",(0,i.kt)("a",{parentName:"p",href:"https://semver.org/"},"the full SemVer specification"),"."),(0,i.kt)("p",null,"SemVer operators only support single values."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Name"),(0,i.kt)("th",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"th"},"true")," if ",(0,i.kt)("inlineCode",{parentName:"th"},"<context-field>")," is ..."))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"SEMVER_EQ")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"equal")," to the provided value")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"SEMVER_GT")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"strictly greater than")," the provided value")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"SEMVER_LT")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"strictly less than")," the provided value")))),(0,i.kt)("p",null,"Additionally, you can use negation to get ",(0,i.kt)("em",{parentName:"p"},"less than or equal to")," and ",(0,i.kt)("em",{parentName:"p"},"greater than or equal to")," functionality:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Effect"),(0,i.kt)("th",{parentName:"tr",align:null},"How"),(0,i.kt)("th",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"th"},"true")," if ",(0,i.kt)("inlineCode",{parentName:"th"},"<context-field>")," is ..."))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Greater than or equal to"),(0,i.kt)("td",{parentName:"tr",align:null},"Negate ",(0,i.kt)("inlineCode",{parentName:"td"},"SEMVER_LT")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"greater than or equal to")," the provided value")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Less than or equal to"),(0,i.kt)("td",{parentName:"tr",align:null},"Negate ",(0,i.kt)("inlineCode",{parentName:"td"},"SEMVER_GT")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"less than or equal to")," the provided value")))),(0,i.kt)("p",null,'"Not less than 2.0.0" ',(0,i.kt)("em",{parentName:"p"},"is the same as"),' "greater than or equal to 2.0.0". The same applies for ',(0,i.kt)("em",{parentName:"p"},"less than or equal"),': "Not greater than 1.9.5." ',(0,i.kt)("em",{parentName:"p"},"is the same as"),' "less than or equal to 1.9.5".'),(0,i.kt)("h2",{id:"sdks"},"Interacting with strategy constraints in the client SDKs"),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"This section gives a brief overview over to use the client SDKs to interact with strategy constraints. The exact steps will vary depending on which client you are using, so make sure to consult the documentation for your specific client SDK."))),(0,i.kt)("p",null,"Strategy constraints require ",(0,i.kt)("a",{parentName:"p",href:"../user_guide/unleash_context"},"the Unleash Context")," to work. All official ",(0,i.kt)("a",{parentName:"p",href:"/sdks"},"Unleash client SDKs")," support the option to pass ",(0,i.kt)("a",{parentName:"p",href:"../user_guide/unleash_context#structure",title:"Unleash Context, section: structure"},"dynamic context values")," to the ",(0,i.kt)("inlineCode",{parentName:"p"},"isEnabled")," function (or the SDK's equivalent)."),(0,i.kt)("p",null,"If the strategy constraint uses a ",(0,i.kt)("a",{parentName:"p",href:"../user_guide/unleash_context#structure"},(0,i.kt)("strong",{parentName:"a"},"standard Unleash Context field")),", set the context field to the value you wish to give it."),(0,i.kt)("p",null,"If the strategy constraint uses a ",(0,i.kt)("a",{parentName:"p",href:"../user_guide/unleash_context#custom-context-fields"},(0,i.kt)("strong",{parentName:"a"},"custom context field")),", use the Unleash Context's ",(0,i.kt)("inlineCode",{parentName:"p"},"properties")," field. Use the name of the custom context field as a key and set the value to your desired string."),(0,i.kt)("p",null,"If you set a context field to a value that the SDKs cannot parse correctly for a chosen constraint operator, the strategy constraint will evaluate to false.\nIn other words: if you have a strategy constraint operator that expects a number, such as ",(0,i.kt)("inlineCode",{parentName:"p"},"NUM_GT"),", but you set the corresponding context field to a string value, then the expression will be false: ",(0,i.kt)("inlineCode",{parentName:"p"},'"some string"')," is ",(0,i.kt)("strong",{parentName:"p"},"not")," greater than ",(0,i.kt)("inlineCode",{parentName:"p"},"5"),".\nThis value can still be negated as explained in ",(0,i.kt)("a",{parentName:"p",href:"#constraint-negation"},"the section on negating values"),"."),(0,i.kt)("h2",{id:"constrain-on-a-specific-environment"},"[Deprecated]",": Constrain on a specific environment"),(0,i.kt)("p",null,"Before Unleash 4.3, using strategy constraints was the recommended way to have different toggle configurations per environment. Now that Unleash has environment support built in, we no longer recommend you use strategy constraints for this. Instead, see the ",(0,i.kt)("a",{parentName:"p",href:"../user_guide/environments"},"environments documentation"),"."),(0,i.kt)("div",{className:"footnotes"},(0,i.kt)("hr",{parentName:"div"}),(0,i.kt)("ol",{parentName:"div"},(0,i.kt)("li",{parentName:"ol",id:"fn-1"},(0,i.kt)("inlineCode",{parentName:"li"},"userScore")," is not a default Unleash field, but can be added as a ",(0,i.kt)("a",{parentName:"li",href:"../user_guide/unleash_context#custom-context-fields"},"custom context field"),".",(0,i.kt)("a",{parentName:"li",href:"#fnref-1",className:"footnote-backref"},"\u21a9")))))}u.isMDXComponent=!0},970:function(t,e,a){e.Z=a.p+"assets/images/custom-constraints-37e951da922d576705cfca6e797026b3.png"}}]);