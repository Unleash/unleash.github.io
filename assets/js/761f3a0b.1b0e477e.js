"use strict";(self.webpackChunkwebsitev_2=self.webpackChunkwebsitev_2||[]).push([[3137],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return d}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),u=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=u(e.components);return r.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=u(n),d=a,f=m["".concat(s,".").concat(d)]||m[d]||p[d]||o;return n?r.createElement(f,i(i({ref:t},c),{},{components:n})):r.createElement(f,i({ref:t},c))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var u=2;u<o;u++)i[u]=n[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},744:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return u},toc:function(){return c},default:function(){return m}});var r=n(7462),a=n(3366),o=(n(7294),n(3905)),i=["components"],l={id:"environments",title:"Environments"},s=void 0,u={unversionedId:"user_guide/environments",id:"user_guide/environments",isDocsHomePage:!1,title:"Environments",description:"Environment is a new feature currently under beta. It can be enabled from Unleash v4.2.x with a feature toggle. We plan to make the environment feature general available from Unleash v4.3.x.",source:"@site/docs/user_guide/environments.md",sourceDirName:"user_guide",slug:"/user_guide/environments",permalink:"/user_guide/environments",editUrl:"https://github.com/Unleash/unleash/edit/master/website/docs/user_guide/environments.md",tags:[],version:"current",frontMatter:{id:"environments",title:"Environments"}},c=[{value:"How to start using environments",id:"how-to-start-using-environments",children:[{value:"Step 1: Enable new environments for your Project",id:"step-1-enable-new-environments-for-your-project",children:[],level:3},{value:"Step 2: Configure activation strategies for the new environment",id:"step-2-configure-activation-strategies-for-the-new-environment",children:[],level:3},{value:"Step 3: Create environment specific API keys",id:"step-3-create-environment-specific-api-keys",children:[],level:3}],level:2},{value:"Migration",id:"migration",children:[{value:"Addons",id:"addons",children:[],level:3},{value:"API",id:"api",children:[],level:3}],level:2},{value:"Plan Differences",id:"plan-differences",children:[{value:"Open-Source (free)",id:"open-source-free",children:[],level:3},{value:"Pro (commercial)",id:"pro-commercial",children:[],level:3},{value:"Enterprise (commercial)",id:"enterprise-commercial",children:[],level:3}],level:2},{value:"Rollout Plan",id:"rollout-plan",children:[{value:"Future enhancements",id:"future-enhancements",children:[],level:3}],level:2}],p={toc:c};function m(e){var t=e.components,l=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,r.Z)({},p,l,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("div",{class:"alert alert--info",role:"alert"},"Environment is a new feature currently under beta. It can be enabled from ",(0,o.kt)("i",null,"Unleash v4.2.x")," with a feature toggle. We plan to make the environment feature general available from ",(0,o.kt)("i",null,"Unleash v4.3.x"),"."),(0,o.kt)("br",null),(0,o.kt)("div",{style:{position:"relative",paddingBottom:"56.25%",height:"0"}},(0,o.kt)("iframe",{src:"https://www.loom.com/embed/95239e875bbc4e09a5c5833e1942e4b0",frameborder:"0",webkitallowfullscreen:!0,mozallowfullscreen:!0,allowfullscreen:!0,style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"}})),(0,o.kt)("p",null,"Environments is a new way to organize activation strategy configurations for feature toggles into separate environments. In Unleash a feature lives across all your environments, after all, the goal is to get the new feature released as soon as possible. But it makes sense to configure the activation differently per environment. You might want the feature enabled for everyone in development, while only enable it for yourself in production."),(0,o.kt)("p",null,'Unleash Enterprise users have been able to leverage strategy constraints to control the roll-out per environment. This will not be needed after the release as a "full group" of activation strategy will belong to an environment. '),(0,o.kt)("p",null,"Connected applications will also use environment scoped API keys, to make sure they only download feature toggle configurations for the environment they are running in."),(0,o.kt)("p",null,"Metrics has also been upgraded to record the environment, so that Unleash now can display the usage metrics per environment. "),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Environments Overview",src:n(1502).Z,title:"A feature toggle exists across all environments, but take different activation strategies per environment."})),(0,o.kt)("h2",{id:"how-to-start-using-environments"},"How to start using environments"),(0,o.kt)("p",null,"In order to start using environments you need to be on Unleash v4.2. You also need to have the environment feature enabled (if you are using Unleash Hosted, please reach out on ",(0,o.kt)("a",{parentName:"p",href:"mailto:contact@getunleash.io"},"contact@getunleash.io")," if you want to start using environments. "),(0,o.kt)("h3",{id:"step-1-enable-new-environments-for-your-project"},"Step 1: Enable new environments for your Project"),(0,o.kt)("p",null,"Navigate to the project and choose the \u201cenvironments\u201d tab. "),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Configure environment for this project",src:n(6303).Z,title:"Configure environment for this project"})),(0,o.kt)("h3",{id:"step-2-configure-activation-strategies-for-the-new-environment"},"Step 2: Configure activation strategies for the new environment"),(0,o.kt)("p",null,"From the \u201cfeature toggle view\u201d you will now be able to configure activation strategies per environment. "),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Add strategy configuration per environment",src:n(317).Z,title:"Add strategy configuration per environment"})),(0,o.kt)("h3",{id:"step-3-create-environment-specific-api-keys"},"Step 3: Create environment specific API keys"),(0,o.kt)("p",null,"In order for the SDK to download the feature toggle configuration for the correct environment you will need to create an API token for a defined environment. "),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Create Environment specific API Keys",src:n(4836).Z,title:"Create Environment specific API Keys"})),(0,o.kt)("h2",{id:"migration"},"Migration"),(0,o.kt)("p",null,"To ease migration we have created a special environment called \u201cdefault\u201d. All existing activation strategies have been added to this environment. All existing Client API keys has also been scoped to work against the default environment, to ensure zero disruption as part of the upgrade. "),(0,o.kt)("p",null,"If you today are using strategy constraints together with the \u201cenvironment\u201d field on the Unleash Context you should be aware that the new environment support works slightly differently. Now the SDK will only download the activation strategies configured for a configured environment. The Unleash SDK API will know which environment to deliver to the SDK because the API token used by the SDK is scoped to a single environment. Because of this you will probably stop using \u201cenvironment\u201d on the Unleash Context. "),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"You will not use strategy constraints for environments any more.",src:n(7152).Z,title:"You will not use strategy constraints for environments any more."})),(0,o.kt)("h3",{id:"addons"},"Addons"),(0,o.kt)("p",null,"We have slightly changed the events related to working with feature toggles. This means that you would need to change your addon configuration to also subscribe for the new events to not miss updates:"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Deprecated events:")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"FEATURE_UPDATE")," - ",(0,o.kt)("em",{parentName:"li"},"not used after switching to environments"))),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"New Events")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"FEATURE-METADATA-UPDATED")," - The feature toggle metadata was updated (across all environments). "),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"FEATURE-STRATEGY-ADD"),"\xb9 - An activation strategy was added to a feature toggle in an environment. The ",(0,o.kt)("em",{parentName:"li"},"data")," will contain the updated strategy configuration."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"FEATURE-STRATEGY-UPDATE"),"\xb9 - An activation strategy was updated for a feature toggle. The ",(0,o.kt)("em",{parentName:"li"},"data")," will contain the updated strategy configuration."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"FEATURE-STRATEGY-REMOVE"),"\xb9 - An activation strategy was removed for a feature toggle. "),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"FEATURE-ENVIRONMENT-ENABLED"),"\xb9 - Signals that a feature toggle has been ",(0,o.kt)("em",{parentName:"li"},"enabled")," in a defined environment. "),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"FEATURE-ENVIRONMENT-DISABLED"),"\xb9 - Signals that a feature toggle has been ",(0,o.kt)("em",{parentName:"li"},"disabled")," in a defined environment. "),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"FEATURE-PROJECT-CHANGE"),"\xb9 - The feature toggle was moved to a new project. ")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"1) These feature events will contain ",(0,o.kt)("em",{parentName:"p"},"project")," and ",(0,o.kt)("em",{parentName:"p"},"environment")," as part of the even metadata.")),(0,o.kt)("h3",{id:"api"},"API"),(0,o.kt)("p",null,"In order to support configuration per environment we had to rebuild our feature toggle admin API to account for environments as well. This means "),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"/api/admin/features")," - ",(0,o.kt)("em",{parentName:"li"},"deprecated (scheduled for removal in Unleash v5.0). The ",(0,o.kt)("a",{parentName:"em",href:"https://docs.getunleash.io/api/admin/features"},"old feature toggles admin API")," still works, but strategy configuration will be assumed to target the \u201cdefault\u201d environment.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"/api/admin/projects/:projectId/features")," - New feature API to be used for feature toggles which also adds support for environments. See ",(0,o.kt)("a",{parentName:"li",href:"https://docs.getunleash.io/api/admin/feature-toggles-v2"},"the documentation")," to learn more. ")),(0,o.kt)("h2",{id:"plan-differences"},"Plan Differences"),(0,o.kt)("h3",{id:"open-source-free"},"Open-Source (free)"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Will get access to two pre-configured environments: \u201cdevelopment\u201d and \u201cproduction\u201d. Existing users of Unleash will also get an additional \u201cdefault\u201d environment to simplify adoption of environments.  "),(0,o.kt)("li",{parentName:"ul"},"Will be possible to turn environments on/off for all projects. ")),(0,o.kt)("h3",{id:"pro-commercial"},"Pro (commercial)"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Will get access to two pre-configured environments: \u201cdevelopment\u201d and \u201cproduction\u201d. Existing users of Unleash will also get an additional \u201cdefault\u201d environment to simplify the adoption of environments.  "),(0,o.kt)("li",{parentName:"ul"},"Will be possible to turn environments on/off for the default project. ")),(0,o.kt)("h3",{id:"enterprise-commercial"},"Enterprise (commercial)"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Will get access to two pre-configured environments: \u201cdevelopment\u201d and \u201cproduction\u201d. Existing users of Unleash will also get an additional \u201cdefault\u201d environment to simplify the adoption of environments.  "),(0,o.kt)("li",{parentName:"ul"},"Will be possible to turn environments on/off for all projects"),(0,o.kt)("li",{parentName:"ul"},"Will be allowed to update and remove environments."),(0,o.kt)("li",{parentName:"ul"},"Will be allowed to create new environments.")),(0,o.kt)("h2",{id:"rollout-plan"},"Rollout Plan"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Unleash v4.2")," will provide ",(0,o.kt)("em",{parentName:"li"},"early access")," to environment support. This means that it can be enabled per customer via a feature flag. "),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Unleash v4.3")," plans to provide general access to the environment support for all users of Unleash (Open-Source, Pro, Enterprise). ")),(0,o.kt)("h3",{id:"future-enhancements"},"Future enhancements"),(0,o.kt)("p",null,"With improved environment capabilities we have also done the groundwork to be able to also improve other related aspects inside Unleash:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Improve ",(0,o.kt)("strong",{parentName:"li"},"Usage Metrics "),"to be able to show usage and evaluation results per hour for multiple days with dimensions such as environment, application and time (per hour). "),(0,o.kt)("li",{parentName:"ul"},"Improve ",(0,o.kt)("strong",{parentName:"li"},"RBAC")," with the ability to limit who can change configuration for a specific environment (planned as an enterprise feature).")))}m.isMDXComponent=!0},4836:function(e,t,n){t.Z=n.p+"assets/images/environments_api_keys-6387ceadf6eb72f1ee4fa786da1b3bba.png"},6303:function(e,t,n){t.Z=n.p+"assets/images/environments_configure-0b0476a52691f82d4f07f4afba88294a.png"},1502:function(e,t,n){t.Z=n.p+"assets/images/environments_overview-f02297b24677cdba3b8e3ceacfe86ba1.svg"},317:function(e,t,n){t.Z=n.p+"assets/images/environments_strategies-075e815234ea7cee5ac8cb0ad34ae3a1.png"},7152:function(e,t,n){t.Z=n.p+"assets/images/environments_strategy_constraints-5b064d3f27ac0912c1e7ee8165cf4f11.png"}}]);