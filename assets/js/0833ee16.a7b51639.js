"use strict";(self.webpackChunkwebsitev_2=self.webpackChunkwebsitev_2||[]).push([[4583],{75590:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>s,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>p});var a=n(87462),o=(n(67294),n(3905));const r={title:"Svelte",slug:"/reference/sdks/svelte"},s=void 0,l={unversionedId:"generated/sdks/client-side/svelte",id:"generated/sdks/client-side/svelte",title:"Svelte",description:"This document was generated from the README in the Svelte GitHub repository.",source:"@site/docs/generated/sdks/client-side/svelte.md",sourceDirName:"generated/sdks/client-side",slug:"/reference/sdks/svelte",permalink:"/reference/sdks/svelte",draft:!1,editUrl:"https://github.com/Unleash/unleash/edit/main/website/docs/generated/sdks/client-side/svelte.md",tags:[],version:"current",frontMatter:{title:"Svelte",slug:"/reference/sdks/svelte"},sidebar:"documentation",previous:{title:"React",permalink:"/reference/sdks/react"},next:{title:"Vue",permalink:"/reference/sdks/vue"}},i={},p=[{value:"Initialize the client",id:"initialize-the-client",level:2},{value:"Connection options",id:"connection-options",level:3},{value:"Check feature toggle status",id:"check-feature-toggle-status",level:2},{value:"Check variants",id:"check-variants",level:2},{value:"Defer rendering until flags fetched",id:"defer-rendering-until-flags-fetched",level:2},{value:"Updating context",id:"updating-context",level:2},{value:"Deferring client start",id:"deferring-client-start",level:2},{value:"Use unleash client directly",id:"use-unleash-client-directly",level:2}],c={toc:p};function d(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("admonition",{title:"Generated content",type:"info"},(0,o.kt)("p",{parentName:"admonition"},"This document was generated from the README in the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/Unleash/proxy-client-svelte"},"Svelte GitHub repository"),".")),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"To connect to Unleash from a client-side context, you'll need to use the ",(0,o.kt)("a",{parentName:"p",href:"/reference/front-end-api"},"Unleash front-end API")," (",(0,o.kt)("a",{parentName:"p",href:"/how-to/how-to-create-api-tokens"},"how do I create an API token?"),") or the ",(0,o.kt)("a",{parentName:"p",href:"/reference/unleash-proxy"},"Unleash proxy")," (",(0,o.kt)("a",{parentName:"p",href:"/reference/api-tokens-and-client-keys#proxy-client-keys"},"how do I create client keys?"),").")),(0,o.kt)("h1",{id:"installation"},"Installation"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm install @unleash/proxy-client-svelte\n# or\nyarn add @unleash/proxy-client-svelte\n")),(0,o.kt)("h1",{id:"how-to-use"},"How to use"),(0,o.kt)("h2",{id:"initialize-the-client"},"Initialize the client"),(0,o.kt)("p",null,"Depending on your needs and specific use-case, prepare one of:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://docs.getunleash.io/reference/front-end-api"},"Front-end API")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://docs.getunleash.io/reference/unleash-edge"},"Unleash Edge")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://docs.getunleash.io/reference/unleash-proxy"},"Unleash Proxy"))),(0,o.kt)("p",null,"And a respective frontend token (or, if you're using the Unleash Proxy, one of your proxy's designated client keys, previously known as proxy secrets)."),(0,o.kt)("p",null,"Import the provider like this in your entrypoint file (typically index.svelte):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-svelte"},"<script lang=\"ts\">\n    import { FlagProvider } from '@unleash/proxy-client-svelte';\n\n    const config = {\n        url: '<unleash-url>/api/frontend', // Your Front-end API, Unleash Edge or Unleash Proxy URL\n        clientKey: '<your-token>', // Front-end API token (or proxy client key)\n        refreshInterval: 15, // How often (in seconds) the client should poll the proxy for updates\n        appName: 'your-app-name' // The name of your application. It's only used for identifying your application\n    };\n<\/script>\n\n<FlagProvider {config}>\n    <App />\n</FlagProvider>\n")),(0,o.kt)("h3",{id:"connection-options"},"Connection options"),(0,o.kt)("p",null,"To connect this SDK to your Unleash instance's ",(0,o.kt)("a",{parentName:"p",href:"https://docs.getunleash.io/reference/front-end-api"},"front-end API"),", use the URL to your Unleash instance's front-end API (",(0,o.kt)("inlineCode",{parentName:"p"},"<unleash-url>/api/frontend"),") as the ",(0,o.kt)("inlineCode",{parentName:"p"},"url")," parameter. For the ",(0,o.kt)("inlineCode",{parentName:"p"},"clientKey")," parameter, use a ",(0,o.kt)("inlineCode",{parentName:"p"},"FRONTEND")," token generated from your Unleash instance. Refer to the ",(0,o.kt)("a",{parentName:"p",href:"https://docs.getunleash.io/how-to/how-to-create-api-tokens"},(0,o.kt)("em",{parentName:"a"},"how to create API tokens"))," guide for the necessary steps."),(0,o.kt)("p",null,"To connect this SDK to the ",(0,o.kt)("a",{parentName:"p",href:"https://docs.getunleash.io/reference/unleash-edge"},"Unleash Edge"),", use the URL to your Unleash Edge instance as the ",(0,o.kt)("inlineCode",{parentName:"p"},"url")," parameter. For the ",(0,o.kt)("inlineCode",{parentName:"p"},"clientKey")," parameter, use a ",(0,o.kt)("inlineCode",{parentName:"p"},"FRONTEND")," token generated from your Unleash Edge instance. Refer to the ",(0,o.kt)("a",{parentName:"p",href:"https://docs.getunleash.io/how-to/how-to-create-api-tokens"},(0,o.kt)("em",{parentName:"a"},"how to create API tokens"))," guide for the necessary steps. Ensure that your Unleash Edge instance is correctly configured to have access to the feature toggles your ",(0,o.kt)("inlineCode",{parentName:"p"},"FRONTEND")," token is requesting."),(0,o.kt)("p",null,"To connect this SDK to the ",(0,o.kt)("a",{parentName:"p",href:"https://docs.getunleash.io/reference/unleash-proxy"},"Unleash proxy"),", use the proxy's URL and a ",(0,o.kt)("a",{parentName:"p",href:"https://docs.getunleash.io/reference/api-tokens-and-client-keys#proxy-client-keys"},"proxy client key"),". The ",(0,o.kt)("a",{parentName:"p",href:"https://docs.getunleash.io/reference/unleash-proxy#configuration"},(0,o.kt)("em",{parentName:"a"},"configuration")," section of the Unleash proxy docs")," contains more info on how to configure client keys for your proxy."),(0,o.kt)("h2",{id:"check-feature-toggle-status"},"Check feature toggle status"),(0,o.kt)("p",null,"To check if a feature is enabled:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-svelte"},"<script lang=\"ts\">\n    import { useFlag } from '@unleash/proxy-client-svelte';\n\n    const enabled = useFlag('travel.landing');\n<\/script>\n\n{#if $enabled}\n    <SomeComponent />\n{:else}\n    <AnotherComponent />\n{/if}\n")),(0,o.kt)("h2",{id:"check-variants"},"Check variants"),(0,o.kt)("p",null,"To check variants:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-svelte"},"<script lang=\"ts\">\n    import { useVariant } from '@unleash/proxy-client-svelte';\n\n    const variant = useVariant('travel.landing');\n<\/script>\n\n{#if variant.enabled && variant.name === 'SomeComponent'}\n    <SomeComponent />\n{:else if variant.enabled && variant.name === 'AnotherComponent'}\n    <AnotherComponent />\n{:else}\n    <DefaultComponent />\n{/if}\n")),(0,o.kt)("h2",{id:"defer-rendering-until-flags-fetched"},"Defer rendering until flags fetched"),(0,o.kt)("p",null,"useFlagsStatus retrieves the ready state and error events.\nFollow the following steps in order to delay rendering until the flags have been fetched."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-svelte"},"<script lang=\"ts\">\n    import { useFlagsStatus } from '@unleash/proxy-client-svelte';\n\n    const { flagsReady, flagsError } = useFlagsStatus();\n<\/script>\n\n{#if !$flagsReady}\n    <Loading />\n{:else}\n    <MyComponent error={flagsError} />\n{/if}\n")),(0,o.kt)("h2",{id:"updating-context"},"Updating context"),(0,o.kt)("p",null,"Initial context can be specified on a ",(0,o.kt)("inlineCode",{parentName:"p"},"FlagProvider")," ",(0,o.kt)("inlineCode",{parentName:"p"},"config.context")," property."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"<FlagProvider config={{ ...config, context: { userId: 123 }}>")),(0,o.kt)("p",null,"This code sample shows you how to update the unleash context dynamically:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-svelte"},"<script lang=\"ts\">\n    import { useUnleashContext, useFlag } from '@unleash/proxy-client-svelte';\n\n    export let userId;\n\n    const toggle = useFlag('my-toggle');\n    const updateContext = useUnleashContext();\n\n    $: {\n        // context is updated with userId\n        updateContext({ userId });\n    }\n\n    // OR if you need to perform an action right after new context is applied\n    $: {\n        async function run() {\n            // Can wait for the new flags to pull in from the different context\n            await updateContext({ userId });\n            console.log('new flags loaded for', userId);\n        }\n        run();\n    }\n<\/script>\n")),(0,o.kt)("h1",{id:"advanced-use-cases"},"Advanced use cases"),(0,o.kt)("h2",{id:"deferring-client-start"},"Deferring client start"),(0,o.kt)("p",null,"By default, the Unleash client will start polling for toggles immediately when the ",(0,o.kt)("inlineCode",{parentName:"p"},"FlagProvider")," component renders. You can prevent it by setting ",(0,o.kt)("inlineCode",{parentName:"p"},"startClient")," prop to ",(0,o.kt)("inlineCode",{parentName:"p"},"false"),". This is useful when you'd like to for example bootstrap the client and work offline."),(0,o.kt)("p",null,"Deferring the client start gives you more fine-grained control over when to start fetching the feature toggle configuration. This could be handy in cases where you need to get some other context data from the server before fetching toggles, for instance."),(0,o.kt)("p",null,"To start the client, use the client's ",(0,o.kt)("inlineCode",{parentName:"p"},"start")," method. The below snippet of pseudocode will defer polling until the end of the ",(0,o.kt)("inlineCode",{parentName:"p"},"asyncProcess")," function."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-svelte"},'<script lang="ts">\n    const client = new UnleashClient({\n        /* ... */\n    });\n\n    onMount(async () => {\n        // do async work ...\n        client.start();\n    });\n<\/script>\n\n<FlagProvider unleashClient={client} startClient={false}>\n    <App />\n</FlagProvider>\n')),(0,o.kt)("h2",{id:"use-unleash-client-directly"},"Use unleash client directly"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-svelte"},"<script lang=\"ts\">\n    import { useUnleashContext, useUnleashClient } from '@unleash/proxy-client-svelte';\n\n    export let userId;\n\n    const client = useUnleashClient();\n\n    const login = () => {\n        // login user\n        if (client.isEnabled('new-onboarding')) {\n            // Send user to new onboarding flow\n        } else {\n            // send user to old onboarding flow\n        }\n    };\n<\/script>\n\n<LoginForm {login} />\n")),(0,o.kt)("hr",null),(0,o.kt)("p",null,"This content was generated on ",(0,o.kt)("time",{dateTime:"2023-09-26T10:17:06.168Z"},"26 September 2023 at 10:17:06 Coordinated Universal Time")))}d.isMDXComponent=!0}}]);