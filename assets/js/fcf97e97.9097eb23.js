"use strict";(self.webpackChunkwebsitev_2=self.webpackChunkwebsitev_2||[]).push([[7800],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return p}});var a=n(7294);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,s=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var c=a.createContext({}),l=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u=function(e){var t=l(e.components);return a.createElement(c.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,s=e.mdxType,i=e.originalType,c=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),d=l(n),p=s,m=d["".concat(c,".").concat(p)]||d[p]||h[p]||i;return n?a.createElement(m,r(r({ref:t},u),{},{components:n})):a.createElement(m,r({ref:t},u))}));function p(e,t){var n=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var i=n.length,r=new Array(i);r[0]=d;var o={};for(var c in t)hasOwnProperty.call(t,c)&&(o[c]=t[c]);o.originalType=e,o.mdxType="string"==typeof e?e:s,r[1]=o;for(var l=2;l<i;l++)r[l]=n[l];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},1589:function(e,t,n){n.r(t),n.d(t,{contentTitle:function(){return c},default:function(){return d},frontMatter:function(){return o},metadata:function(){return l},toc:function(){return u}});var a=n(7462),s=n(3366),i=(n(7294),n(3905)),r=["components"],o={id:"stickiness",title:"Stickiness"},c=void 0,l={unversionedId:"advanced/stickiness",id:"advanced/stickiness",title:"Stickiness",description:"Stickiness is how Unleash guarantees that the same user gets the same features every time. Stickiness is useful in any scenario where you want to either show a feature to only a subset of users or give users a variant of a feature.",source:"@site/docs/advanced/stickiness.md",sourceDirName:"advanced",slug:"/advanced/stickiness",permalink:"/advanced/stickiness",editUrl:"https://github.com/Unleash/unleash/edit/main/website/docs/advanced/stickiness.md",tags:[],version:"current",frontMatter:{id:"stickiness",title:"Stickiness"},sidebar:"documentation",previous:{title:"Single-Sign-On",permalink:"/advanced/enterprise-authentication"},next:{title:"Strategy Constraints",permalink:"/advanced/strategy_constraints"}},u=[{value:"Calculation",id:"calculation",children:[],level:2},{value:"Consistency",id:"consistency",children:[],level:2},{value:"Custom stickiness (beta)",id:"custom-stickiness",children:[{value:"Enabling custom stickiness",id:"enabling-custom-stickiness",children:[],level:3}],level:2}],h={toc:u};function d(e){var t=e.components,o=(0,s.Z)(e,r);return(0,i.kt)("wrapper",(0,a.Z)({},h,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"Stickiness")," is how Unleash guarantees that the same user gets the same features every time. Stickiness is useful in any scenario where you want to either show a feature to only a subset of users or give users a variant of a feature."),(0,i.kt)("h2",{id:"calculation"},"Calculation"),(0,i.kt)("p",null,"By default, Unleash calculates stickiness based on the user id and the group id. If the user id is unavailable, it falls back to using the session id instead. It hashes these values to a number between 0 and 100 using the ",(0,i.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/MurmurHash"},"MurmurHash hash function"),". This number is what determines whether a user will see a specific feature or variant. Because the process is deterministic, the same user will always get the same number."),(0,i.kt)("p",null,"If both the user id and the session id is unavailable, the calculation returns a random value and stickiness is not guaranteed."),(0,i.kt)("h2",{id:"consistency"},"Consistency"),(0,i.kt)("p",null,"Because the number assigned to a user won't change, Unleash also guarantees that the a user will keep seeing the same features even if certain other parameters change."),(0,i.kt)("p",null,"For instance: When using the ",(0,i.kt)("a",{parentName:"p",href:"/user_guide/activation_strategy#gradual-rollout"},"gradual rollout activation strategy"),", any user whose number is less than or equal to the rollout percentage will see the feature. This means that the same users will keep seeing the feature even as you increase the percentage of your user base that sees the feature."),(0,i.kt)("h2",{id:"custom-stickiness"},"Custom stickiness (beta)"),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Custom stickiness is available starting from Unleash Enterprise v4."))),(0,i.kt)("p",null,"When using ",(0,i.kt)("a",{parentName:"p",href:"/user_guide/activation_strategy#gradual-rollout"},"the gradual rollout strategy")," or ",(0,i.kt)("a",{parentName:"p",href:"/advanced/toggle_variants"},"feature toggle variants"),", you can use parameters other than the user id to calculate stickiness. More specifically, you can use any field, custom or otherwise, of the ",(0,i.kt)("a",{parentName:"p",href:"/user_guide/unleash_context"},"Unleash Context")," as long as you have enabled custom stickiness for these fields."),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"This feature is currently in beta and is not yet supported by all our SDKs. Check out the ",(0,i.kt)("a",{parentName:"p",href:"/sdks#server-side-sdk-compatibility-table"},"SDK compatibility table")," to see what SDKs support it at the moment."))),(0,i.kt)("h3",{id:"enabling-custom-stickiness"},"Enabling custom stickiness"),(0,i.kt)("p",null,'To enable custom stickiness on a field, navigate to the Create Context screen in the UI and find the field you want to enable. There\'s a "Custom stickiness" option at the bottom of the form. Enable this toggle and update the context field by pressing the "Update" button.'),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"The Create Context screen in the Unleash UI. There&#39;s a toggle at the bottom to control custom stickiness.",src:n(1611).Z,width:"1676",height:"1684"})))}d.isMDXComponent=!0},1611:function(e,t,n){t.Z=n.p+"assets/images/enable_custom_stickiness-45204136bf5aaf77f4be2c15aec82610.png"}}]);