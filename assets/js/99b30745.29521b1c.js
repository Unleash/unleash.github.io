"use strict";(self.webpackChunkwebsitev_2=self.webpackChunkwebsitev_2||[]).push([[6877],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return c}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=a.createContext({}),u=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(o.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,o=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=u(n),c=r,h=m["".concat(o,".").concat(c)]||m[c]||d[c]||l;return n?a.createElement(h,i(i({ref:t},p),{},{components:n})):a.createElement(h,i({ref:t},p))}));function c(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,i=new Array(l);i[0]=m;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var u=2;u<l;u++)i[u]=n[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},8530:function(e,t,n){n.r(t),n.d(t,{contentTitle:function(){return o},default:function(){return m},frontMatter:function(){return s},metadata:function(){return u},toc:function(){return p}});var a=n(7462),r=n(3366),l=(n(7294),n(3905)),i=["components"],s={id:"user-admin",title:"/api/admin/user-admin"},o=void 0,u={unversionedId:"api/admin/user-admin",id:"api/admin/user-admin",title:"/api/admin/user-admin",description:"In order to access the admin API endpoints you need to identify yourself. Unless you're using the none authentication method, you'll need to create an ADMIN token and add an Authorization header using the token.",source:"@site/docs/api/admin/user-admin.md",sourceDirName:"api/admin",slug:"/api/admin/user-admin",permalink:"/api/admin/user-admin",editUrl:"https://github.com/Unleash/unleash/edit/main/website/docs/api/admin/user-admin.md",tags:[],version:"current",frontMatter:{id:"user-admin",title:"/api/admin/user-admin"},sidebar:"documentation",previous:{title:"/api/admin/strategies",permalink:"/api/admin/strategies"},next:{title:"/api/client/features",permalink:"/api/client/features"}},p=[{value:"List all users",id:"list-all-users",children:[],level:3},{value:"Get a single users",id:"get-user",children:[],level:3},{value:"Search for users",id:"search-for-users",children:[],level:3},{value:"Add a new user",id:"add-a-new-user",children:[{value:"Return values:",id:"return-values",children:[],level:4}],level:3},{value:"Update a user",id:"update-a-user",children:[],level:3},{value:"Delete a user",id:"delete-a-user",children:[],level:3},{value:"Change password for a user",id:"change-password-for-a-user",children:[],level:3},{value:"Validate password for a user",id:"validate-password-for-a-user",children:[],level:3}],d={toc:p};function m(e){var t=e.components,n=(0,r.Z)(e,i);return(0,l.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"In order to access the admin API endpoints you need to identify yourself. Unless you're using the ",(0,l.kt)("inlineCode",{parentName:"p"},"none")," authentication method, you'll need to ",(0,l.kt)("a",{parentName:"p",href:"/user_guide/api-token"},"create an ADMIN token")," and add an Authorization header using the token.")),(0,l.kt)("h3",{id:"list-all-users"},"List all users"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"GET https://unleash.host.com/api/admin/user-admin")),(0,l.kt)("p",null,"Will return all users and all available root roles for the Unleash instance."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Body")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "rootRoles": [\n    {\n      "description": "Users with the global admin role have superuser access to Unleash and can perform any operation within the unleash platform.",\n      "id": 1,\n      "name": "Admin",\n      "project": null,\n      "type": "root"\n    },\n    {\n      "description": "Users with this role have access most features in Unleash, but can not manage users and roles in the global scope. If a user with a global regular role creates a project, they will become a project admin and receive superuser rights within the context of that project.",\n      "id": 2,\n      "name": "Editor",\n      "project": null,\n      "type": "root"\n    },\n    {\n      "description": "Users with this role can only read root resources in Unleash. They may be added as collaborator to specific projects.",\n      "id": 3,\n      "name": "Viewer",\n      "project": null,\n      "type": "root"\n    }\n  ],\n  "users": [\n    {\n      "createdAt": "2021-05-14T08:56:34.859Z",\n      "email": "random-user@getunleash.ai",\n      "id": 3,\n      "imageUrl": "https://gravatar.com/avatar/3066e45cf3a09d9a4b51e08a3ac20749?size=42&default=retro",\n      "inviteLink": "",\n      "isAPI": false,\n      "loginAttempts": 0,\n      "rootRole": 1,\n      "seenAt": null\n    },\n    {\n      "createdAt": "2021-05-14T08:58:07.891Z",\n      "email": "random-user2@getunleash.ai",\n      "id": 4,\n      "imageUrl": "https://gravatar.com/avatar/90047524992cd6ae8f66e249a7630d80?size=42&default=retro",\n      "inviteLink": "",\n      "isAPI": false,\n      "loginAttempts": 0,\n      "rootRole": 1,\n      "seenAt": null\n    }\n  ]\n}\n')),(0,l.kt)("h3",{id:"get-user"},"Get a single users"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"GET https://unleash.host.com/api/admin/user-admin/:id")),(0,l.kt)("p",null,"Will return a single user by id."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Body")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n      "createdAt": "2021-05-14T08:58:07.891Z",\n      "email": "random-user2@getunleash.ai",\n      "id": 4,\n      "imageUrl": "https://gravatar.com/avatar/90047524992cd6ae8f66e249a7630d80?size=42&default=retro",\n      "inviteLink": "",\n      "isAPI": false,\n      "loginAttempts": 0,\n      "rootRole": 1,\n      "seenAt": null\n    }\n')),(0,l.kt)("h3",{id:"search-for-users"},"Search for users"),(0,l.kt)("p",null,"You can also search for users via the search API. It will preform a simple search based on name and email matching the given query. Requires minimum 2 characters."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"GET http://localhost:4242/api/admin/user-admin/search?q=iv")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Body")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'[\n  {\n    "email": "iva2@some-mail.com",\n    "id": 19,\n    "imageUrl": "https://gravatar.com/avatar/6c795493735ff1864f17d47ec52cf0ec?size=42&default=retro"\n  },\n  {\n    "email": "ivar@another.com",\n    "id": 20,\n    "imageUrl": "https://gravatar.com/avatar/f4b3e16a54bfbe824eb814479053bf88?size=42&default=retro"\n  }\n]\n')),(0,l.kt)("h3",{id:"add-a-new-user"},"Add a new user"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"POST https://unleash.host.com/api/admin/user-admin")),(0,l.kt)("p",null,"Creates a new user with the given root role."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Payload properties")),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Requirements")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"The payload ",(0,l.kt)("strong",{parentName:"p"},"must")," contain ",(0,l.kt)("strong",{parentName:"p"},"at least one of")," the ",(0,l.kt)("inlineCode",{parentName:"p"},"name")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"email")," properties, though which one is up to you. For the user to be able to log in to the system, the user ",(0,l.kt)("strong",{parentName:"p"},"must")," have an email."))),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Property name"),(0,l.kt)("th",{parentName:"tr",align:null},"Required"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"),(0,l.kt)("th",{parentName:"tr",align:null},"Example value(s)"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"email")),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"The user's email address. Must be provided if ",(0,l.kt)("inlineCode",{parentName:"td"},"name")," is not provided."),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},'"user@getunleash.io"'))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"name")),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"The user's name. Must be provided if ",(0,l.kt)("inlineCode",{parentName:"td"},"email")," is not provided."),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},'"Some Name"'))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"rootRole")),(0,l.kt)("td",{parentName:"tr",align:null},"Yes"),(0,l.kt)("td",{parentName:"tr",align:null},"The role to assign to the user. Can be either the role's ID or its unique name."),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"2"),", ",(0,l.kt)("inlineCode",{parentName:"td"},'"Editor"'))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"sendEmail")),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"Whether to send a welcome email with a login link to the user or not. Defaults to ",(0,l.kt)("inlineCode",{parentName:"td"},"true"),"."),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"false"))))),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Body")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "email": "some-email@getunleash.io",\n  "name": "Some Name",\n  "rootRole": 2,\n  "sendEmail": true\n}\n')),(0,l.kt)("h4",{id:"return-values"},"Return values:"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"201: Created")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "createdAt": "2021-05-18T10:28:23.067Z",\n  "email": "some-email@getunleash.io",\n  "emailSent": true,\n  "id": 1337,\n  "imageUrl": "https://gravatar.com/avatar/222f2ab70c039dda12e3d11acdcebd02?size=42&default=retro",\n  "inviteLink": "http://localhost:4242/new-user?token=123",\n  "isAPI": false,\n  "loginAttempts": 0,\n  "name": "Some Name",\n  "rootRole": 2,\n  "seenAt": null\n}\n')),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"400: Bad request")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'[\n  {\n    "msg": "User already exists"\n  }\n]\n')),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"400: Bad request")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'[\n  {\n    "msg": "You must specify username or email"\n  }\n]\n')),(0,l.kt)("h3",{id:"update-a-user"},"Update a user"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"POST https://unleash.host.com/api/admin/user-admin/:userId")),(0,l.kt)("p",null,"Updates use with new fields"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Body")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "email": "some-email@getunleash.io",\n  "name": "Some Name",\n  "rootRole": 2\n}\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Notes")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"userId")," is required as a url path parameter."),(0,l.kt)("li",{parentName:"ul"},"All fields are optional. Only provided fields are updated.")),(0,l.kt)("h3",{id:"delete-a-user"},"Delete a user"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"DELETE https://unleash.host.com/api/admin/user-admin/:userId")),(0,l.kt)("p",null,"Deletes the user with the given ",(0,l.kt)("inlineCode",{parentName:"p"},"userId"),"."),(0,l.kt)("p",null,"Possible return values:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"200: OK")," - user was deleted"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"404: NOT FOUND")," - No user with the provided ",(0,l.kt)("inlineCode",{parentName:"li"},"userId")," was found")),(0,l.kt)("h3",{id:"change-password-for-a-user"},"Change password for a user"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"POST https://unleash.host.com/api/admin/user-admin/:userId/change-password")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Body")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "password": "k!5As3HquUrQ"\n}\n')),(0,l.kt)("p",null,"Return values:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"200 OK"),": Password was changed."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"400 Bad Request"),": Password was not changed. Unleash requires a strong password.",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"This means",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"minimum 10 characters long"),(0,l.kt)("li",{parentName:"ul"},"contains at least one uppercase letter"),(0,l.kt)("li",{parentName:"ul"},"contains at least one number"),(0,l.kt)("li",{parentName:"ul"},"contains at least one special character (symbol)"))))),(0,l.kt)("li",{parentName:"ul"},"Please see in the response body on how to improve the password.")),(0,l.kt)("h3",{id:"validate-password-for-a-user"},"Validate password for a user"),(0,l.kt)("p",null,"You can use this endpoint to validate the strength of a given password. Unleash requires a strong password."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"This means",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"minimum 10 characters long"),(0,l.kt)("li",{parentName:"ul"},"contains at least one uppercase letter"),(0,l.kt)("li",{parentName:"ul"},"contains at least one number"),(0,l.kt)("li",{parentName:"ul"},"contains at least one special character (symbol)")))),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"http POST http://localhost:4242/api/admin/user-admin/validate-password")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Body")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "password": "some-simple"\n}\n')),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"200 OK"),": Password is strong enough for Unleash."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"400 Bad Request"),": Unleash requires a stronger password. Please see in the response body on how to improve the password.")))}m.isMDXComponent=!0}}]);