"use strict";(self.webpackChunkwebsitev_2=self.webpackChunkwebsitev_2||[]).push([[2702],{8215:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(7294);const i=function(e){let{children:t,hidden:a,className:i}=e;return n.createElement("div",{role:"tabpanel",hidden:a,className:i},t)}},3580:(e,t,a)=>{a.d(t,{Z:()=>c});var n=a(7462),i=a(7294),r=a(2389),s=a(6696),o=a(4334);const l="tabItem_LplD";function u(e){var t,a,r;const{lazy:u,block:c,defaultValue:d,values:h,groupId:p,className:m}=e,g=i.Children.map(e.children,(e=>{if((0,i.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),v=null!=h?h:g.map((e=>{let{props:{value:t,label:a,attributes:n}}=e;return{value:t,label:a,attributes:n}})),f=(0,s.lx)(v,((e,t)=>e.value===t.value));if(f.length>0)throw new Error('Docusaurus error: Duplicate values "'+f.map((e=>e.value)).join(", ")+'" found in <Tabs>. Every value needs to be unique.');const y=null===d?d:null!=(t=null!=d?d:null==(a=g.find((e=>e.props.default)))?void 0:a.props.value)?t:null==(r=g[0])?void 0:r.props.value;if(null!==y&&!v.some((e=>e.value===y)))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+y+'" but none of its children has the corresponding value. Available values are: '+v.map((e=>e.value)).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");const{tabGroupChoices:k,setTabGroupChoices:w}=(0,s.UB)(),[b,N]=(0,i.useState)(y),T=[],{blockElementScrollPositionUntilNextRender:A}=(0,s.o5)();if(null!=p){const e=k[p];null!=e&&e!==b&&v.some((t=>t.value===e))&&N(e)}const E=e=>{const t=e.currentTarget,a=T.indexOf(t),n=v[a].value;n!==b&&(A(t),N(n),null!=p&&w(p,n))},S=e=>{var t;let a=null;switch(e.key){case"ArrowRight":{const t=T.indexOf(e.currentTarget)+1;a=T[t]||T[0];break}case"ArrowLeft":{const t=T.indexOf(e.currentTarget)-1;a=T[t]||T[T.length-1];break}}null==(t=a)||t.focus()};return i.createElement("div",{className:"tabs-container"},i.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":c},m)},v.map((e=>{let{value:t,label:a,attributes:r}=e;return i.createElement("li",(0,n.Z)({role:"tab",tabIndex:b===t?0:-1,"aria-selected":b===t,key:t,ref:e=>T.push(e),onKeyDown:S,onFocus:E,onClick:E},r,{className:(0,o.Z)("tabs__item",l,null==r?void 0:r.className,{"tabs__item--active":b===t})}),null!=a?a:t)}))),u?(0,i.cloneElement)(g.filter((e=>e.props.value===b))[0],{className:"margin-vert--md"}):i.createElement("div",{className:"margin-vert--md"},g.map(((e,t)=>(0,i.cloneElement)(e,{key:t,hidden:e.props.value!==b})))))}function c(e){const t=(0,r.Z)();return i.createElement(u,(0,n.Z)({key:String(t)},e))}},872:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(7294),i=a(3580),r=a(8215),s=a(5197);const o=e=>{let{verb:t,payload:a,url:o,title:l,endpointType:u="Unleash server API"}=e;const c=(null==t?void 0:t.toUpperCase())||"",d=JSON.stringify(a,null,2),[h,p]="Unleash server API"===u?["unleash-url","API-token"]:["proxy-url","proxy-client-key"],m=(a?"\n"+c+" <"+h+">/"+o+"\nAuthorization: <"+p+">\ncontent-type: application/json\n\n"+d:"\n"+c+" <"+h+">/"+o+"\nAuthorization: <"+p+">\ncontent-type: application/json").trim(),g=(a?'\ncurl -H "Content-Type: application/json" \\\n     -H "Authorization: <'+p+'>" \\\n     -X '+c+" \\\n     -d '"+d+"' \\\n     <"+h+">/"+o:'\ncurl -H "Content-Type: application/json" \\\n     -H "Authorization: <'+p+'>" \\\n     -X '+c+" \\\n     <"+h+">/"+o).trim(),v=(a?"echo '"+d+"' \\\n| http "+c+" \\\n  <"+h+">/"+o+" \\\n  Authorization:<"+p+">":("\nhttp "+c+" \\\n  <"+h+">/"+o+" \\\n  Authorization:<"+p+"> \\\n  "+("POST"!==c||d?"":"--json")).trim()).trim();return n.createElement(i.Z,{groupId:"api-request"},n.createElement(r.Z,{value:"http",label:"HTTP"},n.createElement(s.Z,{language:"http",title:l},m)),n.createElement(r.Z,{value:"curl",label:"cURL"},n.createElement(s.Z,{language:"bash",title:l},g)),n.createElement(r.Z,{value:"httpie",label:"HTTPie"},n.createElement(s.Z,{language:"bash",title:l},v)))}},5991:(e,t,a)=>{a.r(t),a.d(t,{contentTitle:()=>o,default:()=>d,frontMatter:()=>s,metadata:()=>l,toc:()=>u});var n=a(7462),i=(a(7294),a(3905)),r=a(872);const s={title:"How to schedule feature releases"},o=void 0,l={unversionedId:"how-to/how-to-schedule-feature-releases",id:"how-to/how-to-schedule-feature-releases",title:"How to schedule feature releases",description:"Placeholders in the code samples below are delimited by angle brackets (i.e. ``). You will need to replace them with the values that are correct in your situation for the code samples to run properly.",source:"@site/docs/how-to/how-to-schedule-feature-releases.mdx",sourceDirName:"how-to",slug:"/how-to/how-to-schedule-feature-releases",permalink:"/how-to/how-to-schedule-feature-releases",editUrl:"https://github.com/Unleash/unleash/edit/main/website/docs/how-to/how-to-schedule-feature-releases.mdx",tags:[],version:"current",frontMatter:{title:"How to schedule feature releases"},sidebar:"documentation",previous:{title:"How to use custom activation strategies",permalink:"/how-to/how-to-use-custom-strategies"},next:{title:"Users and permissions",permalink:"/how-to/users-and-permissions"}},u=[{value:"Prerequisites",id:"prerequisites",children:[],level:2},{value:"Schedule feature releases with strategy constraints",id:"strategy-constraints",children:[{value:"Step 1: Add an activation strategy with a date-based constraint",id:"step-1-add-an-activation-strategy-with-a-date-based-constraint",children:[{value:"Scheduling a release via the UI",id:"scheduling-a-release-via-the-ui",children:[],level:4},{value:"Scheduling a release via the API",id:"scheduling-a-release-via-the-api",children:[],level:4}],level:3}],level:2},{value:"Schedule feature releases with custom activation strategies",id:"custom-activation-strategies",children:[{value:"Step 1: Define and apply a custom activation strategy",id:"step-1-define-and-apply-a-custom-activation-strategy",children:[],level:3},{value:"Step 2: Implement the custom activation strategy in your clients",id:"step-2-implement-the-custom-activation-strategy-in-your-clients",children:[],level:3}],level:2}],c={toc:u};function d(e){let{components:t,...s}=e;return(0,i.kt)("wrapper",(0,n.Z)({},c,s,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Placeholders")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Placeholders in the code samples below are delimited by angle brackets (i.e. ",(0,i.kt)("inlineCode",{parentName:"p"},"<placeholder-name>"),"). You will need to replace them with the values that are correct in ",(0,i.kt)("em",{parentName:"p"},"your")," situation for the code samples to run properly."))),(0,i.kt)("p",null,"There's a whole host of reasons why you may want to schedule the release of a feature, such as:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"to release a feature at a specific date and time")," (for a product launch, for instance)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"to make a feature available only up until a specific moment")," (for a contest cutoff, for instance)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"to make a feature available during a limited period")," (for a 24 hour flash sale, for instance)")),(0,i.kt)("p",null,"There's two distinct ways to do this, depending on which version of Unleash you are running:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"If you're using version 4.9 or later of Unleash Pro or Enterprise, you can (and should) ",(0,i.kt)("a",{parentName:"li",href:"#strategy-constraints"},"use strategy constraints")),(0,i.kt)("li",{parentName:"ul"},"Otherwise, ",(0,i.kt)("a",{parentName:"li",href:"#custom-activation-strategies"},"use custom activation strategies"))),(0,i.kt)("p",null,"In this guide we'll schedule a feature for release at some point in time. The exact same logic applies if you want to make a feature available until some point in the future. Finally, if you want to only make a feature available during a limited time period, you can easily combine the two options."),(0,i.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,i.kt)("p",null,"This guide assumes that you've got the following:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"some basic experience with Unleash"),(0,i.kt)("li",{parentName:"ul"},"a running instance of Unleash and connected clients (where applicable)"),(0,i.kt)("li",{parentName:"ul"},"an existing feature toggle that you want to schedule the release for")),(0,i.kt)("h2",{id:"strategy-constraints"},"Schedule feature releases with strategy constraints"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"/advanced/strategy_constraints#date-and-time-operators"},"Strategy contstraints")," are the easiest way to schedule feature releases (",(0,i.kt)("a",{parentName:"p",href:"/advanced/strategy_constraints#incompatibilities"},"as long as your SDKs are up to date"),"). You can use this approach with ",(0,i.kt)("em",{parentName:"p"},"any")," strategy you want. The strategies will work just as they normally do, they just won't become active until the specified time. For example: with the standard strategy, the feature would become available to all your users at the specified time; with a gradual rollout, the rollout would start at the specified time."),(0,i.kt)("h3",{id:"step-1-add-an-activation-strategy-with-a-date-based-constraint"},"Step 1: Add an activation strategy with a date-based constraint"),(0,i.kt)("h4",{id:"scheduling-a-release-via-the-ui"},"Scheduling a release via the UI"),(0,i.kt)("p",null,"To schedule a feature release via the UI:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Add the desired activation strategy to the feature"),(0,i.kt)("li",{parentName:"ol"},'Open the constraint creator by using the "add constraint" button'),(0,i.kt)("li",{parentName:"ol"},"Add a date-based constraint by selecting the ",(0,i.kt)("inlineCode",{parentName:"li"},"currentTime")," context field (step 1 in the below image), choosing the ",(0,i.kt)("inlineCode",{parentName:"li"},"DATE_AFTER")," operator (step 2), and setting the point in time where you want the feature to be available from (step 3)\n",(0,i.kt)("img",{alt:"A strategy constraint specifying that the activation strategy should be enabled at 12:00 AM, November 25th 2022. There are visual call-outs pointing to the relevant settings mentioned above.",src:a(3973).Z,width:"2326",height:"1303"}))),(0,i.kt)("h4",{id:"scheduling-a-release-via-the-api"},"Scheduling a release via the API"),(0,i.kt)("p",null,"To add an activation strategy via the Admin API, use the feature's ",(0,i.kt)("inlineCode",{parentName:"p"},"strategies")," endpoint to add a new strategy (see the ",(0,i.kt)("a",{parentName:"p",href:"/api/admin/feature-toggles-v2#add-strategy"},"API documentation for adding strategies to feature toggles")," for more details)."),(0,i.kt)("p",null,"The payload's ",(0,i.kt)("inlineCode",{parentName:"p"},'"name"')," property should contain the name of the strategy to apply (see ",(0,i.kt)("a",{parentName:"p",href:"/user_guide/activation_strategy"},"activation strategies reference documentation")," for all built-in strategies' ",(0,i.kt)("em",{parentName:"p"},"modeling names"),")."),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},'"constraint"')," object should have the same format as described in the code sample below. The activation date must be in an ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc3339#section-5.8"},"RFC 3339-compatible format"),", e.g. ",(0,i.kt)("inlineCode",{parentName:"p"},'"1990-12-31T23:59:60Z"'),"."),(0,i.kt)(r.Z,{verb:"post",payload:{name:"default",constraints:[{value:"<activation-date>",operator:"DATE_AFTER",contextName:"currentTime"}]},url:"api/admin/projects/<project-id>/features/environments/<environment>/strategies",title:"Add a feature activation strategy with a scheduled activation time.",mdxType:"ApiRequest"}),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},'"operator"')," property in the code sample can be replaced with ",(0,i.kt)("a",{parentName:"p",href:"/advanced/strategy_constraints#date-and-time-operators"},"any of the other date and time-based operators")," according to your needs."),(0,i.kt)("h2",{id:"custom-activation-strategies"},"Schedule feature releases with custom activation strategies"),(0,i.kt)("p",null,"To schedule feature releases without using strategy constraints, you can use custom activation strategies. This requires defining a custom strategy and then implementing that strategy in your SDKs. For detailed instructions on how to do either of these things, refer to their respective how-to guides:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/how-to/how-to-use-custom-strategies#step-1"},"How to ",(0,i.kt)("em",{parentName:"a"},"define")," custom strategies")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/how-to/how-to-use-custom-strategies#step-3"},"How to ",(0,i.kt)("em",{parentName:"a"},"implement")," custom strategies"))),(0,i.kt)("h3",{id:"step-1-define-and-apply-a-custom-activation-strategy"},"Step 1: Define and apply a custom activation strategy"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Define a strategy")," that takes a parameter that tells it when to activate (visit ",(0,i.kt)("a",{parentName:"p",href:"/advanced/custom_activation_strategy#definition"},"the custom activation strategy reference documentation")," for full details on definitions):"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Give the strategy a name. We'll use ",(0,i.kt)("inlineCode",{parentName:"li"},"enableAfter"),"."),(0,i.kt)("li",{parentName:"ol"},"Give the strategy a required string parameter where the user can enter the time at which the feature should activate. Be sure to describe the format that the user must adhere to."),(0,i.kt)("li",{parentName:"ol"},"Save the strategy")),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"/how-to/how-to-use-custom-strategies#step-2"},(0,i.kt)("strong",{parentName:"a"},"Apply the strategy")," to the feature toggle")," you want to schedule."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"A custom activation strategy definition for a strategy called `enableAfter`. It takes a required parameter called `start time`: a string in a date format.",src:a(8410).Z,width:"2185",height:"1944"})),(0,i.kt)("h3",{id:"step-2-implement-the-custom-activation-strategy-in-your-clients"},"Step 2: Implement the custom activation strategy in your clients"),(0,i.kt)("p",null,"In each of the client SDKs that will interact with your feature, implement the strategy (",(0,i.kt)("a",{parentName:"p",href:"/how-to/how-to-use-custom-strategies#step-3"},"the implementation how-to guide")," has steps for all SDK types)."))}d.isMDXComponent=!0},8410:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/custom-strategy-enable-after-005a14e9308f299f98bdd7a7e3693978.png"},3973:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/strategy-constraint-date-after-1992a14ccb1c85895cb4a9d28c0e7695.png"}}]);