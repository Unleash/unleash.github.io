"use strict";(self.webpackChunkwebsitev_2=self.webpackChunkwebsitev_2||[]).push([[11412],{25495:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>u,frontMatter:()=>l,metadata:()=>i,toc:()=>p});var n=a(87462),o=(a(67294),a(3905));const l={title:"How to Implement Feature Flags in React",slug:"/feature-flag-tutorials/react"},r=void 0,i={unversionedId:"feature-flag-tutorials/react/implementing-feature-flags",id:"feature-flag-tutorials/react/implementing-feature-flags",title:"How to Implement Feature Flags in React",description:"React is a popular JavaScript library utilized by millions of developers across the world to build user interfaces for frontend, mobile, or server-side applications when paired with frameworks. Originally developed by Meta, React has a strong community and is best used for interactive, complex, SEO-friendly application development.",source:"@site/docs/feature-flag-tutorials/react/implementing-feature-flags.md",sourceDirName:"feature-flag-tutorials/react",slug:"/feature-flag-tutorials/react",permalink:"/feature-flag-tutorials/react",draft:!1,editUrl:"https://github.com/Unleash/unleash/edit/main/website/docs/feature-flag-tutorials/react/implementing-feature-flags.md",tags:[],version:"current",frontMatter:{title:"How to Implement Feature Flags in React",slug:"/feature-flag-tutorials/react"},sidebar:"documentation",previous:{title:"Feature Flag Tutorials",permalink:"/feature-flag-tutorials"},next:{title:"React Feature Flag Examples",permalink:"/feature-flag-tutorials/react/examples"}},s={},p=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"1. Architect to limit PII and configuration leakage",id:"1-architect-to-limit-pii-and-configuration-leakage",level:2},{value:"2. Install a local feature flag provider",id:"2-install-a-local-feature-flag-provider",level:2},{value:"3. Create, enable, and configure a feature flag",id:"3-create-enable-and-configure-a-feature-flag",level:2},{value:"4. Clone an open source React app",id:"4-clone-an-open-source-react-app",level:2},{value:"5. Use the feature flag to rollout a notifications badge",id:"5-use-the-feature-flag-to-rollout-a-notifications-badge",level:2},{value:"6. Verify the toggle experience",id:"6-verify-the-toggle-experience",level:2},{value:"Conclusion",id:"conclusion",level:2}],c={toc:p};function u(e){let{components:t,...l}=e;return(0,o.kt)("wrapper",(0,n.Z)({},c,l,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://react.dev/"},"React")," is a popular JavaScript library utilized by millions of developers across the world to build user interfaces for frontend, mobile, or server-side applications when paired with frameworks. Originally developed by Meta, React has a strong community and is best used for interactive, complex, SEO-friendly application development."),(0,o.kt)("p",null,"Leveraging feature flags allows developers to toggle on and off new features, whether you\u2019re experimenting in your local environment, testing for QA purposes, or rolling out changes to users in production. Feature flags can play a critical part in optimizing the entire software development lifecycle. With Unleash, an open-source feature flag service, you can use our tooling to implement feature flags into your application and release new features faster, strategically, and safely. But how can you do this in React?"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/cypress-io/cypress-realworld-app"},"Cypress Real World App")," is an open-source React project that allows you to test and experiment in a React codebase that mirrors a real-world use case: a financial transaction application. It harnesses Cypress for testing, Material UI for CSS, a built-in database, and other tools to provide a fully functioning application experience for educational purposes."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Cypress Real World App",src:a(34391).Z,width:"3024",height:"1964"})),(0,o.kt)("p",null,"In this tutorial, you will learn how to set up and use React feature flags with Unleash. We will be using the Cypress Real World App to implement the feature flag solution, which will simulate how you can gradually roll out a notifications feature to users. By the end of this tutorial, you will be able to activate your created flag and unveil the notification icon to a select group of users, who can then click on it to access the Notifications view and view transaction updates from their contacts."),(0,o.kt)("p",null,"Along the way, you will:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"#1-architect-to-limit-pii-and-configuration-leakage"},"Architect to limit PII and configuration leakage")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"#2-install-a-local-feature-flag-provider"},"Spin up a local flag provider")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"#3-create-enable-and-configure-a-feature-flag"},"Configure a feature flag")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"#4-clone-an-open-source-react-app"},"Clone an open-source React app")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"#5-use-the-feature-flag-to-rollout-a-notifications-badge"},"Toggle the visibility of a feature component")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"#6-verify-the-toggle-experience"},"Verify the toggle experience"))),(0,o.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,o.kt)("p",null,"In this tutorial, you will need the following:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"A web browser like Chrome or Firefox"),(0,o.kt)("li",{parentName:"ul"},"Git"),(0,o.kt)("li",{parentName:"ul"},"Docker"),(0,o.kt)("li",{parentName:"ul"},"NPM, Node and Yarn to install and run a React app"),(0,o.kt)("li",{parentName:"ul"},"(Optional) A code editor like Visual Studio Code")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"React Feature Flag Architecture Diagram",src:a(96473).Z,width:"1966",height:"1190"})),(0,o.kt)("h2",{id:"1-architect-to-limit-pii-and-configuration-leakage"},"1. Architect to limit PII and configuration leakage"),(0,o.kt)("p",null,"Since React is a front-end framework, there are special security considerations to plan around when implementing feature flags."),(0,o.kt)("p",null,"Most importantly, you must:"),(0,o.kt)("p",null,"a. Limit PII (personally identifiable information) leakage from the end-user device (e.g. browser or mobile device) to your central feature flag control service. "),(0,o.kt)("p",null,"b. Avoid leakage of configuration information from the central feature flag control service to end-user devices."),(0,o.kt)("p",null,"Solving both means you need to avoid evaluating feature flags on the user's machine due to security risks like exposing API keys and flag data. Instead, send application context (e.g. username, location, etc) to your feature flag evaluation service to evaluate the results. These results (and only these results) should be stored in the client-side application memory. By keeping the evaluated results for a specific context in memory, you avoid network roundtrips every time your application needs to check the status of a feature flag. This method prevents unauthorized access and data breaches by ",(0,o.kt)("a",{parentName:"p",href:"/topics/feature-flags/never-expose-pii"},"keeping configurations and PII secure"),"."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Keep configurations and PII secure image",src:a(89145).Z,width:"3960",height:"1112"})),(0,o.kt)("p",null,"Unleash, the open-source feature flag system used in this tutorial, evaluates feature flags in this way, so by following the rest of these steps, you will be protecting your user\u2019s data and your company\u2019s reputation."),(0,o.kt)("p",null,"For a complete list of architectural guidelines, see our ",(0,o.kt)("a",{parentName:"p",href:"/topics/feature-flags/feature-flag-best-practices"},"best practices for building and scaling feature flag systems"),"."),(0,o.kt)("h2",{id:"2-install-a-local-feature-flag-provider"},"2. Install a local feature flag provider"),(0,o.kt)("p",null,"There are many feature flag tools available. In this section, you will install Unleash in order to run it, log in, and create a feature flag, but you can use other tools in place of Unleash if you prefer. You\u2019ll need to edit the code accordingly, but the steps will probably be about the same."),(0,o.kt)("p",null,"Use Git to clone the Unleash repository and Docker to build and run it. Open a terminal window and run the following commands:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"git clone git@github.com:Unleash/unleash.git\ncd unleash\ndocker compose up -d\n")),(0,o.kt)("p",null,"You will now have Unleash installed onto your machine and running in the background.\nYou can access this instance in your web browser at ",(0,o.kt)("a",{parentName:"p",href:"http://localhost:4242/"},"http://localhost:4242")),(0,o.kt)("p",null,"Log in to the platform using these credentials:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"Username: admin\nPassword: unleash4all\n")),(0,o.kt)("p",null,"The unleash platform shows a list of feature flags that you\u2019ve generated. Click on the \u2018New Feature Toggle\u2019 button to create a new feature flag."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Create a new feature flag",src:a(55384).Z,width:"1600",height:"906"})),(0,o.kt)("h2",{id:"3-create-enable-and-configure-a-feature-flag"},"3. Create, enable, and configure a feature flag"),(0,o.kt)("p",null,"Next, you will create a feature flag on the platform and turn it on for your React app."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"Note:")," This document uses feature flags and feature toggles interchangeably. Some people prefer flag; others prefer toggle. We use both - they are synonyms for us.")),(0,o.kt)("p",null,"In the ",(0,o.kt)("a",{parentName:"p",href:"http://localhost:4242/projects/default/create-toggle/"},"Create Toggle view"),", give your feature flag a unique name and click \u2018Create toggle feature\u2019."),(0,o.kt)("p",null,"For the purpose of this tutorial, name the feature flag \u201cnewNotificationsBadge\u201d. Use the default values in the rest of the feature flag form."),(0,o.kt)("p",null,"Your new feature flag is created and ready to be used. Enable the flag for your development environment, which makes it accessible to be used in the React app we will generate from your local environment."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Create feature flag form",src:a(68598).Z,width:"2328",height:"1544"})),(0,o.kt)("p",null,"Your new feature flag is created and ready to be used. Enable the flag for your development environment, which makes it accessible to be used in the React app we will generate from your local environment."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Enable flag for development environment",src:a(41398).Z,width:"1594",height:"1398"})),(0,o.kt)("p",null,"Next, generate an API token to authenticate calls made to Unleash servers to access and use the feature flag in your project. This API token will eventually be pulled into a configuration object within your React application to toggle features."),(0,o.kt)("p",null,"From your project view on the platform, click on ",(0,o.kt)("a",{parentName:"p",href:"http://localhost:4242/projects/default/settings/environments"},"Project Settings")," and then ",(0,o.kt)("a",{parentName:"p",href:"http://localhost:4242/projects/default/settings/api-access"},"API Access"),"."),(0,o.kt)("p",null,"Click on the \u2018New API token\u2019 button."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Create new API token",src:a(53205).Z,width:"2296",height:"1142"})),(0,o.kt)("p",null,"Name the API token and connect to the Client-side SDK. "),(0,o.kt)("p",null,"The token should have access to the \u201cdevelopment\u201d environment, as shown in the platform screenshot below."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Create new projet API token",src:a(41917).Z,width:"1404",height:"716"})),(0,o.kt)("p",null,"The API token you have generated can be managed in the API Access view in your project settings. This token will come in handy in Step 5."),(0,o.kt)("h2",{id:"4-clone-an-open-source-react-app"},"4. Clone an open source React app"),(0,o.kt)("p",null,"In this section, you will clone an open source React application called ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/cypress-io/cypress-realworld-app"},"Cypress Real World App"),", which is meant to model what a more complex, real life use case would be for a fully-functioning app to experiment in."),(0,o.kt)("p",null,"This project leverages many libraries and frameworks to handle the user interface, functionality, database, authentication, and testing of a financial transaction app. These frameworks include Express, Material-UI, Cypress, TypeScript and more."),(0,o.kt)("p",null,"Go to your Terminal and clone the repository with this command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"git clone git@github.com:cypress-io/cypress-realworld-app.git\n")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\ud83d\udea9 ",(0,o.kt)("strong",{parentName:"p"},"Note:"),"\nSince Yarn is required in order to run the app, make sure you have it installed globally. If you do not, run the command below.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"npm install yarn@latest -g\n")),(0,o.kt)("p",null,"In your app's directory, begin installing the dependencies and then run the app:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"yarn\nyarn dev\n")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"Note"),": We recommend using the default ports that exist in the app's configurations, which are explained in the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/cypress-io/cypress-realworld-app?tab=readme-ov-file#run-the-app"},"README")," for it to point to. In order to ensure those function as expected, make sure no other apps are running on your machine that also port to ",(0,o.kt)("inlineCode",{parentName:"p"},"localhost:3000")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"localhost:3001"),".")),(0,o.kt)("p",null,"In your browser at ",(0,o.kt)("inlineCode",{parentName:"p"},"http://localhost:3000"),", you will be directed to the sign-in page of the Cypress Real World App.\nUtilize one of the pre-existing user accounts from the database to sign in."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"Username: Allie2\nPassword: s3cret\n")),(0,o.kt)("p",null,"For more detailed instructions on the setup process for this app, review the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/cypress-io/cypress-realworld-app?tab=readme-ov-file#getting-started"},"README"),"."),(0,o.kt)("p",null,"It\u2019s time to pull in your newly created feature flag in your app. Run the following command to install the Unleash React SDK in your repo:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"yarn add @unleash/proxy-client-react unleash-proxy-client\n")),(0,o.kt)("p",null,"Once Unleash has been installed, open up a code editor like VSCode to view your React repo."),(0,o.kt)("p",null,"In ",(0,o.kt)("inlineCode",{parentName:"p"},"src/index.tsx"),", import the ",(0,o.kt)("inlineCode",{parentName:"p"},"<FlagProvider>"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'import { FlagProvider } from "@unleash/proxy-client-react";\n')),(0,o.kt)("p",null,"Paste in a configuration object:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'const config = {\n url: "http://localhost:4242/api/frontend", // Your local instance Unleash API URL\n clientKey: "<client_key>", // Your client-side API token\n refreshInterval: 15, // How often (in seconds) the client should poll the proxy for updates\n appName: "cypress-realworld-app", // The name of your application. It\'s only used for identifying your application\n};\n')),(0,o.kt)("p",null,"In the ",(0,o.kt)("inlineCode",{parentName:"p"},"Router")," section of this file, wrap the ",(0,o.kt)("inlineCode",{parentName:"p"},"FlagProvider")," around the existing ",(0,o.kt)("inlineCode",{parentName:"p"},"<App />")," component:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"<FlagProvider config={config}>\n  <App />\n</FlagProvider>\n")),(0,o.kt)("p",null,"Next, replace the ",(0,o.kt)("inlineCode",{parentName:"p"},"<client_key>")," string in the config object with the API token you generated. You can do this by copying the API token into your clipboard from the API Access view table and pasting it into the code. "),(0,o.kt)("p",null,"This configuration object is used to populate the ",(0,o.kt)("inlineCode",{parentName:"p"},"FlagProvider")," component that comes from Unleash and wraps around the application, using the credentials to target the specific feature flag you created for the project."),(0,o.kt)("p",null,"You can check our documentation on ",(0,o.kt)("a",{parentName:"p",href:"/reference/api-tokens-and-client-keys"},"API tokens and client keys")," for more specifics and see additional use-cases in our ",(0,o.kt)("a",{parentName:"p",href:"/reference/sdks/react"},"Client-Side SDK with React")," documentation."),(0,o.kt)("h2",{id:"5-use-the-feature-flag-to-rollout-a-notifications-badge"},"5. Use the feature flag to rollout a notifications badge"),(0,o.kt)("p",null,"In a real world use case for your feature flag, you can gradually rollout new features to a percentage of users by configuring the flag's strategy."),(0,o.kt)("p",null,"In this case, we want to rollout a new notifications badge that will appear in the top navigation bar so users can see the latest updates from transactions between contacts. This will require us to modify the visibility of a React component that is rendered in our app."),(0,o.kt)("p",null,"In ",(0,o.kt)("inlineCode",{parentName:"p"},"src/components/NavBar.tsx"),", import the ",(0,o.kt)("inlineCode",{parentName:"p"},"useFlag")," feature:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'import { useFlag } from "@unleash/proxy-client-react";\n')),(0,o.kt)("p",null,"Within the ",(0,o.kt)("inlineCode",{parentName:"p"},"NavBar")," component in the file, define and reference the flag you created."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'const notificationsBadgeEnabled = useFlag("newNotificationsBadge");\n')),(0,o.kt)("p",null,"This flag will be used to conditionally render the notification icon ",(0,o.kt)("inlineCode",{parentName:"p"},"Badge")," that is pulled in from Material-UI.\nIf the flag is enabled, the notification badge will display to users and will route them to the Notifications view."),(0,o.kt)("p",null,"Find the ",(0,o.kt)("inlineCode",{parentName:"p"},"Badge")," component in the file and wrap it in a boolean operator:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'{notificationsBadgeEnabled && (\n <Badge\n   badgeContent={allNotifications?.length}\n   data-test="nav-top-notifications-count"\n   classes={{ badge: classes.customBadge }}\n >\n   <NotificationsIcon />\n </Badge>\n)}\n')),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"Note:")," Ensure you have the correct format in your file or the Prettier formatter will display an error. ")),(0,o.kt)("h2",{id:"6-verify-the-toggle-experience"},"6. Verify the toggle experience"),(0,o.kt)("p",null,"In your Unleash instance, you can toggle your feature flag on or off to verify that the different UI experiences load accordingly."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Unleash turn on feature flag",src:a(33102).Z,width:"2842",height:"1092"})),(0,o.kt)("p",null,"Enabling the flag will result in being able to see the notifications icon in the top menu of the app."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Notification icon badge visible",src:a(1850).Z,width:"2048",height:"1330"})),(0,o.kt)("p",null,"If you disable the flag, this results in a view of a navigation menu without the notification badge for ",(0,o.kt)("strong",{parentName:"p"},"all")," users."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Notification icon badge not visible",src:a(94544).Z,width:"2048",height:"1330"})),(0,o.kt)("p",null,"You've successfully implemented a feature flag using best practices to control the release of a notifications feature in a real world app!"),(0,o.kt)("h2",{id:"conclusion"},"Conclusion"),(0,o.kt)("p",null,"In this tutorial, we installed Unleash locally, created a new feature flag, installed Unleash into a React app, and toggled the visibility of a notifications feature within a ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/cypress-io/cypress-realworld-app"},"real world open source project"),"!"))}u.isMDXComponent=!0},96473:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/react-tutorial-architecture-diagram-9c6792cfd60188ba1bcba0db3ac07924.png"},41917:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/react-tutorial-create-api-token-form-2d5f76781a1f677acaee4fd3a65f3504.png"},53205:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/react-tutorial-create-api-token-fa3353bc3677108c20ddced621613d18.png"},68598:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/react-tutorial-create-flag-form-00b51c642a8a2131fd63443f76fc83d0.png"},55384:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/react-tutorial-create-new-flag-060d32fe7cb7c6e4e7f557b401cc4b55.png"},33102:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/react-tutorial-disabled-flag-fae16b9e63e76957c9b60bc86ba12750.png"},41398:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/react-tutorial-enable-dev-env-9a208ae4e87e28014625d25dd76c3503.png"},89145:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/react-tutorial-pii-diagram-b13dc0a637a3a5d9c60a1258855b3425.png"},94544:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/react-tutorial-rwa-feature-off-3cbd8a3b264a5af5a931cf0821ea4475.png"},1850:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/react-tutorial-rwa-feature-on-d2df54204f7a0d26552dccb75b8b8f02.png"},34391:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/react-tutorial-rwa-0d83bae63c9542ba0505a5a6fdc7026d.png"}}]);