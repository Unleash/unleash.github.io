"use strict";(self.webpackChunkwebsitev_2=self.webpackChunkwebsitev_2||[]).push([[8792],{19024:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var a=n(87462),r=(n(67294),n(3905));const o={title:"Flutter Proxy SDK"},i=void 0,s={unversionedId:"reference/sdks/flutter",id:"reference/sdks/flutter",title:"Flutter Proxy SDK",description:"This guide shows you how to use feature toggles in a Flutter app with the Unleash Proxy and the Unleash front-end API. You can also check out the source code for the Flutter Proxy SDK on GitHub for more details around the SDK.",source:"@site/docs/reference/sdks/flutter.md",sourceDirName:"reference/sdks",slug:"/reference/sdks/flutter",permalink:"/reference/sdks/flutter",draft:!1,editUrl:"https://github.com/Unleash/unleash/edit/main/website/docs/reference/sdks/flutter.md",tags:[],version:"current",frontMatter:{title:"Flutter Proxy SDK"},sidebar:"documentation",previous:{title:"Android Proxy SDK",permalink:"/reference/sdks/android-proxy"},next:{title:"iOS Proxy SDK",permalink:"/reference/sdks/ios-proxy"}},l={},p=[{value:"Introduction",id:"introduction",level:2},{value:"How to use the Flutter Proxy SDK",id:"how-to-use-the-flutter-proxy-sdk",level:2},{value:"Step 1: Install",id:"step-1-install",level:2},{value:"Step 2: Initialize the SDK",id:"step-2-initialize-the-sdk",level:2},{value:"Option A: Connecting to the Unleash proxy",id:"option-a-connecting-to-the-unleash-proxy",level:3},{value:"Option B: Connecting directly to Unleash",id:"option-b-connecting-directly-to-unleash",level:3},{value:"Step 3: Check if feature toggle is enabled",id:"step-3-check-if-feature-toggle-is-enabled",level:3},{value:"Listen for updates via the EventEmitter",id:"listen-for-updates-via-the-eventemitter",level:2}],u={toc:p};function h(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"This guide shows you how to use feature toggles in a Flutter app with the ",(0,r.kt)("a",{parentName:"p",href:"/reference/unleash-proxy"},"Unleash Proxy")," and the ",(0,r.kt)("a",{parentName:"p",href:"/reference/front-end-api"},"Unleash front-end API"),". You can also check out the source code for the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/unleash/unleash_proxy_client_flutter"},"Flutter Proxy SDK")," on GitHub for more details around the SDK."),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"The Flutter proxy client is a tiny Unleash client written in Dart. This client stores toggles relevant for the current user with ",(0,r.kt)("a",{parentName:"p",href:"https://pub.dev/packages/shared_preferences"},"shared preferences library")," and synchronizes with Unleash (the proxy ",(0,r.kt)("em",{parentName:"p"},"or")," the Unleash front-end API) in the background. Because toggles are stored in the user's device, the client can use them to bootstrap itself the next time the user visits the same web page."),(0,r.kt)("h2",{id:"how-to-use-the-flutter-proxy-sdk"},"How to use the Flutter Proxy SDK"),(0,r.kt)("h2",{id:"step-1-install"},"Step 1: Install"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"flutter pub add unleash_proxy_client_flutter\n")),(0,r.kt)("h2",{id:"step-2-initialize-the-sdk"},"Step 2: Initialize the SDK"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-dart"},"import 'package:unleash_proxy_client_flutter/unleash_proxy_client_flutter.dart';\n\nfinal unleash = UnleashClient(\n    url: Uri.parse('https://app.unleash-hosted.com/demo/api/proxy'),\n    clientKey: 'proxy-123',\n    appName: 'my-app');\n\n// Use `updateContext` to set Unleash context fields.\nunleash.updateContext(UnleashContext(userId: '1233'));\n\n// Start the background polling\nunleash.start();\n")),(0,r.kt)("h3",{id:"option-a-connecting-to-the-unleash-proxy"},"Option A: Connecting to the Unleash proxy"),(0,r.kt)("admonition",{title:"Prerequisites",type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"To connect to an Unleash proxy, you need to have an instance of the proxy running.")),(0,r.kt)("p",null,"Add the proxy's URL and a ",(0,r.kt)("a",{parentName:"p",href:"/reference/api-tokens-and-client-keys#proxy-client-keys"},"proxy client key"),". The ",(0,r.kt)("a",{parentName:"p",href:"/reference/unleash-proxy#configuration-variables"},(0,r.kt)("em",{parentName:"a"},"configuration")," section of the Unleash proxy docs")," contains more info on how to configure client keys for your proxy."),(0,r.kt)("h3",{id:"option-b-connecting-directly-to-unleash"},"Option B: Connecting directly to Unleash"),(0,r.kt)("p",null,"Use the url to your Unleash instance's front-end API (",(0,r.kt)("inlineCode",{parentName:"p"},"<unleash-url>/api/frontend"),") as the ",(0,r.kt)("inlineCode",{parentName:"p"},"url")," parameter. For the ",(0,r.kt)("inlineCode",{parentName:"p"},"clientKey")," parameter, use a ",(0,r.kt)("inlineCode",{parentName:"p"},"FRONTEND")," token generated from your Unleash instance. Refer to the ",(0,r.kt)("a",{parentName:"p",href:"/how-to/how-to-create-api-tokens"},(0,r.kt)("em",{parentName:"a"},"how to create API tokens"))," guide for the necessary steps."),(0,r.kt)("h3",{id:"step-3-check-if-feature-toggle-is-enabled"},"Step 3: Check if feature toggle is enabled"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-dart"},"unleash.isEnabled('proxy.demo');\n")),(0,r.kt)("p",null,"...or get toggle variant:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-dart"},"final variant = unleash.getVariant('proxy.demo');\n\nif(variant.name == 'blue') {\n// something with variant blue...\n}\n")),(0,r.kt)("h2",{id:"listen-for-updates-via-the-eventemitter"},"Listen for updates via the EventEmitter"),(0,r.kt)("p",null,"The client is also an event emitter. This means that your code can subscribe to updates from the client. This is a neat way to update your app when toggle state updates."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-dart"},"unleash.on('update', (_) {\n    final myToggle = unleash.isEnabled('proxy.demo');\n    //do something useful\n});\n")))}h.isMDXComponent=!0}}]);