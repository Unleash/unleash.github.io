"use strict";(self.webpackChunkwebsitev_2=self.webpackChunkwebsitev_2||[]).push([[4583],{75590:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>s,default:()=>d,frontMatter:()=>r,metadata:()=>i,toc:()=>p});var a=n(87462),l=(n(67294),n(3905));const r={title:"Svelte",slug:"/reference/sdks/svelte"},s=void 0,i={unversionedId:"generated/sdks/client-side/svelte",id:"generated/sdks/client-side/svelte",title:"Svelte",description:"This document was generated from the README in the Svelte GitHub repository.",source:"@site/docs/generated/sdks/client-side/svelte.md",sourceDirName:"generated/sdks/client-side",slug:"/reference/sdks/svelte",permalink:"/reference/sdks/svelte",draft:!1,editUrl:"https://github.com/Unleash/unleash/edit/main/website/docs/generated/sdks/client-side/svelte.md",tags:[],version:"current",frontMatter:{title:"Svelte",slug:"/reference/sdks/svelte"},sidebar:"documentation",previous:{title:"React",permalink:"/reference/sdks/react"},next:{title:"Vue",permalink:"/reference/sdks/vue"}},o={},p=[{value:"Deferring client start",id:"deferring-client-start",level:2},{value:"Check feature toggle status",id:"check-feature-toggle-status",level:2},{value:"Check variants",id:"check-variants",level:2},{value:"Defer rendering until flags fetched",id:"defer-rendering-until-flags-fetched",level:2},{value:"Updating context",id:"updating-context",level:2}],c={toc:p};function d(e){let{components:t,...n}=e;return(0,l.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("admonition",{title:"Generated content",type:"info"},(0,l.kt)("p",{parentName:"admonition"},"This document was generated from the README in the ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/Unleash/proxy-client-svelte"},"Svelte GitHub repository"),".")),(0,l.kt)("admonition",{type:"tip"},(0,l.kt)("p",{parentName:"admonition"},"To connect to Unleash from a client-side context, you'll need to use the ",(0,l.kt)("a",{parentName:"p",href:"/reference/front-end-api"},"Unleash front-end API")," (",(0,l.kt)("a",{parentName:"p",href:"/how-to/how-to-create-api-tokens"},"how do I create an API token?"),") or the ",(0,l.kt)("a",{parentName:"p",href:"/reference/unleash-proxy"},"Unleash proxy")," (",(0,l.kt)("a",{parentName:"p",href:"/reference/api-tokens-and-client-keys#proxy-client-keys"},"how do I create client keys?"),").")),(0,l.kt)("h1",{id:"proxy-client-svelte"},"proxy-client-svelte"),(0,l.kt)("p",null,"PoC for a Svelte SDK for ",(0,l.kt)("a",{parentName:"p",href:"https://www.getunleash.io/"},"Unleash")," based on the official ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/Unleash/proxy-client-react"},"proxy-client-react"),"."),(0,l.kt)("h1",{id:"disclaimer"},"DISCLAIMER:"),(0,l.kt)("p",null,"This library is meant to be used with the ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/Unleash/unleash-proxy"},"unleash-proxy"),". The proxy application layer will sit between your unleash instance and your client applications, and provides performance and security benefits. DO NOT TRY to connect this library directly to the unleash instance, as the datasets follow different formats because the proxy only returns evaluated toggle information."),(0,l.kt)("h1",{id:"installation"},"Installation"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"npm install @unleash/proxy-client-svelte\n// or\nyarn add @unleash/proxy-client-svelte\n")),(0,l.kt)("h1",{id:"initialization"},"Initialization"),(0,l.kt)("p",null,"Import the provider like this in your entrypoint file (typically index.svelte):"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},"<script lang=\"ts\">\n    let FlagProvider;\n\n    onMount(async () => {\n        const proxyClientSvelte = await import('@unleash/proxy-client-svelte');\n        ({ FlagProvider } = proxyClientSvelte);\n    });\n\n    const config = {\n        url: 'https://UNLEASH-INSTANCE/api/frontend',\n        clientKey: 'CLIENT\u2014SIDE\u2014API\u2014TOKEN',\n        refreshInterval: 15,\n        appName: 'your-app-name',\n    };\n<\/script>\n\n<svelte:component this={FlagProvider} {config}>\n    <App />\n</svelte:component>\n")),(0,l.kt)("p",null,"Alternatively, you can pass your own client in to the FlagProvider:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},"<script lang=\"ts\">\n    import { UnleashClient } from '@unleash/proxy-client-svelte';\n\n    let FlagProvider;\n\n    onMount(async () => {\n        const proxyClientSvelte = await import('@unleash/proxy-client-svelte');\n        ({ FlagProvider } = proxyClientSvelte);\n    });\n\n    const config = {\n        url: 'https://UNLEASH-INSTANCE/api/frontend',\n        clientKey: 'CLIENT\u2014SIDE\u2014API\u2014TOKEN',\n        refreshInterval: 15,\n        appName: 'your-app-name',\n    };\n\n    const client = new UnleashClient(config);\n<\/script>\n\n<svelte:component this={FlagProvider} unleashClient={client}>\n    <App />\n</svelte:component>\n")),(0,l.kt)("h2",{id:"deferring-client-start"},"Deferring client start"),(0,l.kt)("p",null,"By default, the Unleash client will start polling the Proxy for toggles immediately when the ",(0,l.kt)("inlineCode",{parentName:"p"},"FlagProvider")," component renders. You can delay the polling by:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"setting the ",(0,l.kt)("inlineCode",{parentName:"li"},"startClient")," prop to ",(0,l.kt)("inlineCode",{parentName:"li"},"false")),(0,l.kt)("li",{parentName:"ul"},"passing a client instance to the ",(0,l.kt)("inlineCode",{parentName:"li"},"FlagProvider"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},"<svelte:component this={FlagProvider} unleashClient={client} startClient={false}>\n    <App />\n</svelte:component>\n")),(0,l.kt)("p",null,"Deferring the client start gives you more fine-grained control over when to start fetching the feature toggle configuration. This could be handy in cases where you need to get some other context data from the server before fetching toggles, for instance."),(0,l.kt)("p",null,"To start the client, use the client's ",(0,l.kt)("inlineCode",{parentName:"p"},"start")," method. The below snippet of pseudocode will defer polling until the end of the ",(0,l.kt)("inlineCode",{parentName:"p"},"asyncProcess")," function."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},'<script lang="ts">\n    const client = new UnleashClient({\n        /* ... */\n    });\n\n    onMount(() => {\n        const asyncProcess = async () => {\n            // do async work ...\n            client.start();\n        };\n        asyncProcess();\n    });\n<\/script>\n\n<svelte:component this={FlagProvider} unleashClient={client} startClient={false}>\n    <App />\n</svelte:component>\n')),(0,l.kt)("h1",{id:"usage"},"Usage"),(0,l.kt)("h2",{id:"check-feature-toggle-status"},"Check feature toggle status"),(0,l.kt)("p",null,"To check if a feature is enabled:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},"<script lang=\"ts\">\n    import { useFlag } from '@unleash/proxy-client-svelte';\n\n    const enabled = useFlag('travel.landing');\n<\/script>\n\n{#if $enabled}\n<SomeComponent />\n{:else}\n<AnotherComponent />\n{/if}\n")),(0,l.kt)("h2",{id:"check-variants"},"Check variants"),(0,l.kt)("p",null,"To check variants:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},"<script lang=\"ts\">\n    import { useVariant } from '@unleash/proxy-client-svelte';\n\n    const variant = useVariant('travel.landing');\n<\/script>\n\n{#if $variant.enabled && $variant.name === 'SomeComponent'}\n<SomeComponent />\n{:else if $variant.enabled && $variant.name === 'AnotherComponent'}\n<AnotherComponent />\n{:else}\n<DefaultComponent />\n{/if}\n")),(0,l.kt)("h2",{id:"defer-rendering-until-flags-fetched"},"Defer rendering until flags fetched"),(0,l.kt)("p",null,"useFlagsStatus retrieves the ready state and error events.\nFollow the following steps in order to delay rendering until the flags have been fetched."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},"<script lang=\"ts\">\n    import { useFlagsStatus } from '@unleash/proxy-client-svelte';\n    const { flagsReady, flagsError } = useFlagsStatus();\n<\/script>\n\n{#if !$flagsReady}\n<Loading />\n{:else}\n<MyComponent error={flagsError} />\n{/if}\n")),(0,l.kt)("h2",{id:"updating-context"},"Updating context"),(0,l.kt)("p",null,"Follow the following steps in order to update the unleash context:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},"<script lang=\"ts\">\n    import { useUnleashContext, useFlag } from '@unleash/proxy-client-svelte';\n\n    export let userId: string = undefined;\n\n    const updateContext = useUnleashContext();\n\n    onMount(() => {\n        updateContext({ userId });\n    });\n\n    $: {\n        async function run() {\n            await updateContext({ userId });\n            console.log('new flags loaded for', userId);\n        }\n        run();\n    }\n<\/script>\n")),(0,l.kt)("hr",null),(0,l.kt)("p",null,"This content was generated on ",(0,l.kt)("time",{dateTime:"2023-03-06T00:16:11.204Z"},"6 March 2023 at 00:16:11 Coordinated Universal Time")))}d.isMDXComponent=!0}}]);