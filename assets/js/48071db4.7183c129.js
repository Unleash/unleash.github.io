"use strict";(self.webpackChunkwebsitev_2=self.webpackChunkwebsitev_2||[]).push([[8836],{52950:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>c,frontMatter:()=>s,metadata:()=>r,toc:()=>u});var n=a(87462),i=(a(67294),a(3905));const s={title:"How to Implement Feature Flags in Next.js using Unleash"},o=void 0,r={unversionedId:"topics/feature-flags/tutorials/nextjs/implementing-feature-flags",id:"topics/feature-flags/tutorials/nextjs/implementing-feature-flags",title:"How to Implement Feature Flags in Next.js using Unleash",description:"This article is a contribution by Kafilat Adeleke as a part of the Community Content Program. You can also suggest a topic by opening an issue, or Write for Unleash as a part of the Community Content Program.",source:"@site/docs/topics/feature-flags/tutorials/nextjs/implementing-feature-flags.md",sourceDirName:"topics/feature-flags/tutorials/nextjs",slug:"/topics/feature-flags/tutorials/nextjs/implementing-feature-flags",permalink:"/topics/feature-flags/tutorials/nextjs/implementing-feature-flags",draft:!1,editUrl:"https://github.com/Unleash/unleash/edit/main/website/docs/topics/feature-flags/tutorials/nextjs/implementing-feature-flags.md",tags:[],version:"current",frontMatter:{title:"How to Implement Feature Flags in Next.js using Unleash"},sidebar:"documentation",previous:{title:"A/B Testing in Flutter using Unleash and Mixpanel",permalink:"/topics/feature-flags/tutorials/flutter/a-b-testing"},next:{title:"Data collection",permalink:"/topics/data-collection"}},l={},u=[{value:"Setup Unleash",id:"setup-unleash",level:2},{value:"Create a New Feature",id:"create-a-new-feature",level:2},{value:"Integrating Unleash in Nextjs",id:"integrating-unleash-in-nextjs",level:2},{value:"Conclusion",id:"conclusion",level:2}],p={toc:u};function c(e){let{components:t,...s}=e;return(0,i.kt)("wrapper",(0,n.Z)({},p,s,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"This article is a contribution by ",(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("a",{parentName:"strong",href:"https://www.linkedin.com/in/kafilat-adeleke-650332222/"},"Kafilat Adeleke"))," as a part of the ",(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("a",{parentName:"strong",href:"https://github.com/unleash/community-content"},"Community Content Program")),". You can also suggest a topic by ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/Unleash/community-content/issues"},"opening an issue"),", or ",(0,i.kt)("a",{parentName:"p",href:"https://www.getunleash.io/blog/get-published-through-unleashs-community-content-program"},"Write for Unleash")," as a part of the Community Content Program.")),(0,i.kt)("p",null,"Imagine turning on and off features in your web application without redeploying your code. Sounds too good to be true? It's possible with feature flags and Next.js, a powerful framework for building fast and scalable web applications using React."),(0,i.kt)("p",null,"Feature flags are a powerful technique that allows you to toggle features on and off dynamically without redeploying your code. This can help you to deliver faster and safer web applications, as you can test new features in production, perform gradual rollouts, and revert changes quickly if something goes wrong."),(0,i.kt)("p",null,"Next.js provides features such as:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Server-side rendering"),(0,i.kt)("li",{parentName:"ul"},"Static site generation"),(0,i.kt)("li",{parentName:"ul"},"Code splitting"),(0,i.kt)("li",{parentName:"ul"},"Dynamic routing"),(0,i.kt)("li",{parentName:"ul"},"TypeScript support"),(0,i.kt)("li",{parentName:"ul"},"CSS modules support"),(0,i.kt)("li",{parentName:"ul"},"And many more")),(0,i.kt)("p",null,"With Next.js, you can create hybrid applications that can use both static and dynamic pages. Static pages are pre-rendered at build time and served from a CDN, which makes them fast and secure. Dynamic pages are rendered on-demand by a Node.js server, which allows you to use data from any source and handle user interactions. You can also use incremental static regeneration to update static pages without rebuilding your entire application."),(0,i.kt)("p",null,"However, one of the challenges of using Next.js is that it requires you to rebuild your application every time you want to change something in your code. This can be time-consuming and risky, especially if you want to test new features in production or perform gradual rollouts. Therefore, you need a way to toggle features on and off dynamically without redeploying your code. This is where feature flags come in."),(0,i.kt)("p",null,"Unleash is an open-source, easy-to-use feature management platform that supports Next.js and other frameworks. With Unleash, you can create and manage feature flags from a user-friendly dashboard and use them in your code with a simple API. Unleash also provides advanced features such as segmentation, strategies, and integrations."),(0,i.kt)("p",null,"In this tutorial, you will learn how to use feature flags in a Next.js application that displays random activities to users using Unleash. We will use the ",(0,i.kt)("inlineCode",{parentName:"p"},"@unleash/nextjs")," package, which provides easy integration of Unleash feature flags in a Next.js application.\nNote: If you only need a very simple setup for feature flags in your Next.js application, like toggling a feature on and off for all users, use the ",(0,i.kt)("a",{parentName:"p",href:"https://vercel.com/docs/storage/edge-config/get-started"},"Vercel Edge Config"),". You can avoid making requests to the Unleash API from your application and instead use the edge config to inject the feature flag values into your pages.\n",(0,i.kt)("img",{alt:"Next.js Feature Flag Architecture Diagram",src:a(22644).Z,width:"1132",height:"511"})),(0,i.kt)("h2",{id:"setup-unleash"},"Setup Unleash"),(0,i.kt)("p",null,"Before you proceed, ensure you have an Unleash instance running. Run the following commands in the terminal:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"wget getunleash.io/docker-compose.yml\ndocker-compose up -d\n")),(0,i.kt)("p",null,"This will start Unleash in the background. Once Unleash is running, you can access it at http://localhost:4242."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"Username: admin\nPassword: unleash4all\n")),(0,i.kt)("h2",{id:"create-a-new-feature"},"Create a New Feature"),(0,i.kt)("p",null,'Create a new feature flag in your Unleash instance named "activity".'),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Create a new feature flag in Unleash",src:a(63376).Z,width:"1008",height:"461"})),(0,i.kt)("h2",{id:"integrating-unleash-in-nextjs"},"Integrating Unleash in Nextjs"),(0,i.kt)("p",null,"To get started with Next.js and Unleash, you need to create a Next.js project and add the ",(0,i.kt)("inlineCode",{parentName:"p"},"@unleash/nextjs")," package as a dependency."),(0,i.kt)("p",null,"You can run the following commands in your terminal to do this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"npx create-next-app activity-app\ncd activity-app\nnpm install @unleash/nextjs\n")),(0,i.kt)("p",null,"To make feature flags available to our Next.js application, we will wrap it with the FlagProvider component from the @unleash/nextjs package. This component will initialize the Unleash SDK and provide access to feature flags throughout our application. We will do this by adding it to our ",(0,i.kt)("inlineCode",{parentName:"p"},"pages/_app.tsx")," file."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'import type { AppProps } from "next/app"\nimport { FlagProvider } from "@unleash/nextjs/client"\n\nexport default function App({ Component, pageProps }: AppProps) {\n  return (\n    <FlagProvider>\n      <Component {...pageProps} />\n    </FlagProvider>\n  )\n}\n')),(0,i.kt)("p",null,"Next, we will use the Bored API to retrieve a random activity and then use the ",(0,i.kt)("inlineCode",{parentName:"p"},"useFlag")," feature to determine whether the activity is displayed or not."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'import { useEffect, useState } from "react"\nimport { useFlag } from "@unleash/nextjs/client"\n\nconst Activity = () => {\n  const [activityData, setActivityData] = useState({})\n\n  const showActivity = useFlag("activity")\n\n  useEffect(() => {\n    const fetchActivity = async () => {\n      try {\n        const response = await fetch("https://www.boredapi.com/api/activity/")\n        const data = await response.json()\n        setActivityData(data)\n      } catch (error) {\n        console.error("Error fetching activity:", error)\n      }\n    }\n\n    if (showActivity) {\n      fetchActivity()\n    }\n  }, [showActivity])\n\n  return (\n    <div className="bg-gray-100 min-h-screen flex items-center justify-center">\n      <div className="bg-white p-8 rounded shadow-lg">\n        <h1 className="text-3xl font-bold mb-4">\n          Here is an activity for you!\n        </h1>\n        {showActivity ? (\n          <>\n            <p className="mb-2">Activity: {activityData.activity}</p>\n            <p className="mb-2">Participants: {activityData.participants}</p>\n            <p>Price: ${activityData.price}</p>\n          </>\n        ) : (\n          <p>Activity not available</p>\n        )}\n      </div>\n    </div>\n  )\n}\n\nexport default Activity\n')),(0,i.kt)("p",null,"Our feature flag can now be used to control whether or not activity is displayed. If we toggle on the gradual roll out:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Gradual Rollout",src:a(34860).Z,width:"1002",height:"470"})),(0,i.kt)("p",null,"The activity is displayed:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Activity Successful",src:a(28320).Z,width:"996",height:"372"})),(0,i.kt)("p",null,"If we toggle it off:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Toggle Off",src:a(84697).Z,width:"996",height:"444"})),(0,i.kt)("p",null,"No activity is displayed:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Activity Successful",src:a(40114).Z,width:"994",height:"421"})),(0,i.kt)("p",null,"To configure access to Unleash beyond localhost development, follow these steps:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Self-host Unleash or run an instance on ",(0,i.kt)("a",{parentName:"p",href:"https://www.getunleash.io/pricing"},"Unleash Cloud"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Get an API key from the Unleash dashboard.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Store the API key in your Vercel Project Environment Variable, which secures it and makes it accessible in your code."))),(0,i.kt)("h2",{id:"conclusion"},"Conclusion"),(0,i.kt)("p",null,"Feature flags are a powerful tool for managing features in web applications. This tutorial showed us how to use feature flags with Next.js and Unleash. We have seen how to create and manage feature flags in the Unleash dashboard, and how to use them in our Next.js code with the @unleash/nextjs library. We have also seen how to test our feature flags by toggling them on and off in the Unleash dashboard."),(0,i.kt)("p",null,"Unleash is a powerful and easy-to-use feature management platform that can help you deliver faster and safer web applications with Next.js and other frameworks. If you are not already using feature flags in your Next.js applications, I encourage you to try Unleash and see how it can improve your development workflow."))}c.isMDXComponent=!0},40114:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/activity-success-nextjs-1-eb1b7bcc101eefd35ecb23f83b7bb69b.png"},28320:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/activity-success-nextjs-e40898776027955fabfc9ffc1026c9d1.png"},63376:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/create-new-flag-nextjs-b9936e78e0a85e429bdef64b9875c840.png"},84697:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/gradual-rollout-nextjs-1-31284512c12d44fee607f12f90d1e49f.png"},34860:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/gradual-rollout-nextjs-1b1c58f5d55aaa14646bde975a23dee0.png"},22644:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/nextjs-feature-flag-architecture-diagram-blog-3e2387d20fbf4e80c29b8aafd29a7554.png"}}]);