"use strict";(self.webpackChunkwebsitev_2=self.webpackChunkwebsitev_2||[]).push([[5507],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=u(n),h=r,m=d["".concat(s,".").concat(h)]||d[h]||c[h]||o;return n?a.createElement(m,l(l({ref:t},p),{},{components:n})):a.createElement(m,l({ref:t},p))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=d;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var u=2;u<o;u++)l[u]=n[u];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},72905:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(67294),r=n(86010);const o="tabItem_Ymn6";function l(e){let{children:t,hidden:n,className:l}=e;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(o,l),hidden:n},t)}},28403:(e,t,n)=>{n.d(t,{Z:()=>h});var a=n(87462),r=n(67294),o=n(86010),l=n(72389),i=n(67392),s=n(7094),u=n(12466);const p="tabList__CuJ",c="tabItem_LNqP";function d(e){var t,n;const{lazy:l,block:d,defaultValue:h,values:m,groupId:f,className:y}=e,v=r.Children.map(e.children,(e=>{if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),g=null!=m?m:v.map((e=>{let{props:{value:t,label:n,attributes:a}}=e;return{value:t,label:n,attributes:a}})),k=(0,i.l)(g,((e,t)=>e.value===t.value));if(k.length>0)throw new Error('Docusaurus error: Duplicate values "'+k.map((e=>e.value)).join(", ")+'" found in <Tabs>. Every value needs to be unique.');const b=null===h?h:null!=(t=null!=h?h:null==(n=v.find((e=>e.props.default)))?void 0:n.props.value)?t:v[0].props.value;if(null!==b&&!g.some((e=>e.value===b)))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+b+'" but none of its children has the corresponding value. Available values are: '+g.map((e=>e.value)).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");const{tabGroupChoices:x,setTabGroupChoices:w}=(0,s.U)(),[N,S]=(0,r.useState)(b),O=[],{blockElementScrollPositionUntilNextRender:T}=(0,u.o5)();if(null!=f){const e=x[f];null!=e&&e!==N&&g.some((t=>t.value===e))&&S(e)}const P=e=>{const t=e.currentTarget,n=O.indexOf(t),a=g[n].value;a!==N&&(T(t),S(a),null!=f&&w(f,String(a)))},j=e=>{var t;let n=null;switch(e.key){case"ArrowRight":{var a;const t=O.indexOf(e.currentTarget)+1;n=null!=(a=O[t])?a:O[0];break}case"ArrowLeft":{var r;const t=O.indexOf(e.currentTarget)-1;n=null!=(r=O[t])?r:O[O.length-1];break}}null==(t=n)||t.focus()};return r.createElement("div",{className:(0,o.Z)("tabs-container",p)},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":d},y)},g.map((e=>{let{value:t,label:n,attributes:l}=e;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:N===t?0:-1,"aria-selected":N===t,key:t,ref:e=>O.push(e),onKeyDown:j,onFocus:P,onClick:P},l,{className:(0,o.Z)("tabs__item",c,null==l?void 0:l.className,{"tabs__item--active":N===t})}),null!=n?n:t)}))),l?(0,r.cloneElement)(v.filter((e=>e.props.value===N))[0],{className:"margin-top--md"}):r.createElement("div",{className:"margin-top--md"},v.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==N})))))}function h(e){const t=(0,l.Z)();return r.createElement(d,(0,a.Z)({key:String(t)},e))}},93814:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>s,default:()=>h,frontMatter:()=>i,metadata:()=>u,toc:()=>c});var a=n(87462),r=(n(67294),n(3905)),o=n(28403),l=n(72905);const i={id:"proxy-javascript",title:"JavaScript Proxy SDK"},s=void 0,u={unversionedId:"sdks/proxy-javascript",id:"sdks/proxy-javascript",title:"JavaScript Proxy SDK",description:"This guide shows you how to use feature toggles in a single-page app with the Unleash Proxy and the Unleash front-end API. You can also check out the source code for the JavaScript Proxy SDK on GitHub for more details around the SDK.",source:"@site/docs/sdks/proxy-javascript.md",sourceDirName:"sdks",slug:"/sdks/proxy-javascript",permalink:"/sdks/proxy-javascript",draft:!1,editUrl:"https://github.com/Unleash/unleash/edit/main/website/docs/sdks/proxy-javascript.md",tags:[],version:"current",frontMatter:{id:"proxy-javascript",title:"JavaScript Proxy SDK"},sidebar:"documentation",previous:{title:"iOS Proxy SDK",permalink:"/sdks/proxy-ios"},next:{title:"React Proxy SDK",permalink:"/sdks/proxy-react"}},p={},c=[{value:"Introduction",id:"introduction",level:2},{value:"How to use the JavaScript Proxy SDK",id:"how-to-use-the-javascript-proxy-sdk",level:2},{value:"Step 1: Install",id:"step-1-install",level:2},{value:"Step 2: Initialize the SDK",id:"step-2-initialize-the-sdk",level:2},{value:"Option A: Connecting to the Unleash proxy",id:"option-a-connecting-to-the-unleash-proxy",level:3},{value:"Option B: Connecting directly to Unleash",id:"option-b-connecting-directly-to-unleash",level:3},{value:"Step 3: Check if feature toggle is enabled",id:"step-3-check-if-feature-toggle-is-enabled",level:3},{value:"Listen for updates via the EventEmitter",id:"listen-for-updates-via-the-eventemitter",level:2}],d={toc:c};function h(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"This guide shows you how to use feature toggles in a single-page app with the ",(0,r.kt)("a",{parentName:"p",href:"/sdks/unleash-proxy"},"Unleash Proxy")," and the ",(0,r.kt)("a",{parentName:"p",href:"../reference/front-end-api"},"Unleash front-end API"),". You can also check out the source code for the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/unleash/unleash-proxy-client-js"},"JavaScript Proxy SDK")," on GitHub for more details around the SDK."),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"The JavaScript proxy client is a tiny Unleash client written in JavaScript without any external dependencies (except from browser APIs). This client stores toggles relevant for the current user in ",(0,r.kt)("inlineCode",{parentName:"p"},"localStorage")," and synchronizes with Unleash (the proxy ",(0,r.kt)("em",{parentName:"p"},"or")," the Unleash front-end API) in the background. Because toggles are stored in the user's browser, the client can use them to bootstrap itself the next time the user visits the same web page."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"We are looking in to also ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/Unleash/unleash/issues/785"},"supporting react-native")," with this SDK. Reach out if you want to help us validate the implementation.")),(0,r.kt)("h2",{id:"how-to-use-the-javascript-proxy-sdk"},"How to use the JavaScript Proxy SDK"),(0,r.kt)("h2",{id:"step-1-install"},"Step 1: Install"),(0,r.kt)(o.Z,{groupId:"npm2yarn",mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"npm",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"npm install unleash-proxy-client\n"))),(0,r.kt)(l.Z,{value:"yarn",label:"Yarn",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"yarn add unleash-proxy-client\n")))),(0,r.kt)("h2",{id:"step-2-initialize-the-sdk"},"Step 2: Initialize the SDK"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"import { UnleashClient } from 'unleash-proxy-client';\n\nconst unleash = new UnleashClient({\n  url: 'https://eu.unleash-hosted.com/hosted/proxy',\n  clientKey: 'your-client-key',\n  appName: 'my-webapp',\n});\n\n// Use `updateContext` to set Unleash context fields.\nunleash.updateContext({ userId: '1233' });\n\n// Start the background polling\nunleash.start();\n")),(0,r.kt)("h3",{id:"option-a-connecting-to-the-unleash-proxy"},"Option A: Connecting to the Unleash proxy"),(0,r.kt)("admonition",{title:"Prerequisites",type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"To connect to an Unleash proxy, you need to have an instance of the proxy running.")),(0,r.kt)("p",null,"Add the proxy's URL and a ",(0,r.kt)("a",{parentName:"p",href:"/reference/api-tokens-and-client-keys#proxy-client-keys"},"proxy client key"),". The ",(0,r.kt)("a",{parentName:"p",href:"/sdks/unleash-proxy#configuration-variables"},(0,r.kt)("em",{parentName:"a"},"configuration")," section of the Unleash proxy docs")," contain more info on how to configure client keys for your proxy."),(0,r.kt)("h3",{id:"option-b-connecting-directly-to-unleash"},"Option B: Connecting directly to Unleash"),(0,r.kt)("p",null,"Use the url to your Unleash instance's front-end API (",(0,r.kt)("inlineCode",{parentName:"p"},"<unleash-url>/api/frontend"),") as the ",(0,r.kt)("inlineCode",{parentName:"p"},"url")," parameter. For the ",(0,r.kt)("inlineCode",{parentName:"p"},"clientKey")," parameter, use a ",(0,r.kt)("inlineCode",{parentName:"p"},"FRONTEND")," token generated from your Unleash instance. Refer to the ",(0,r.kt)("a",{parentName:"p",href:"/user_guide/api-token"},(0,r.kt)("em",{parentName:"a"},"how to create API tokens"))," guide for the necessary steps."),(0,r.kt)("p",null,"You might also need to set up cross-origin resource sharing (CORS) for your instance. Visit the ",(0,r.kt)("a",{parentName:"p",href:"/reference/front-end-api#cors"},"CORS section of the front-end API guide")," for more information on setting up CORS."),(0,r.kt)("h3",{id:"step-3-check-if-feature-toggle-is-enabled"},"Step 3: Check if feature toggle is enabled"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"unleash.isEnabled('proxy.demo');\n")),(0,r.kt)("p",null,"...or get toggle variant:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const variant = unleash.getVariant('proxy.demo');\nif (variant.name === 'blue') {\n  // something with variant blue...\n}\n")),(0,r.kt)("h2",{id:"listen-for-updates-via-the-eventemitter"},"Listen for updates via the EventEmitter"),(0,r.kt)("p",null,"The client is also an event emitter. This means that your code can subscribe to updates from the client. This is a neat way to update a single page app when toggle state updates."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"unleash.on('update', () => {\n  const myToggle = unleash.isEnabled('proxy.demo');\n  //do something useful\n});\n")))}h.isMDXComponent=!0}}]);