"use strict";(self.webpackChunkwebsitev_2=self.webpackChunkwebsitev_2||[]).push([[2490],{3905:function(e,t,a){a.d(t,{Zo:function(){return p},kt:function(){return c}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),m=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},p=function(e){var t=m(e.components);return n.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=m(a),c=r,h=d["".concat(l,".").concat(c)]||d[c]||u[c]||i;return a?n.createElement(h,o(o({ref:t},p),{},{components:a})):n.createElement(h,o({ref:t},p))}));function c(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var m=2;m<i;m++)o[m]=a[m];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},5563:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return m},toc:function(){return p},default:function(){return d}});var n=a(7462),r=a(3366),i=(a(7294),a(3905)),o=["components"],s={id:"custom_activation_strategy",title:"Custom Activation Strategies"},l=void 0,m={unversionedId:"advanced/custom_activation_strategy",id:"advanced/custom_activation_strategy",title:"Custom Activation Strategies",description:"This document is a reference for custom activation strategies. If you're looking for a guide on how to use them, see the how to use custom strategies guide.",source:"@site/docs/advanced/custom-activation-strategy.md",sourceDirName:"advanced",slug:"/advanced/custom_activation_strategy",permalink:"/advanced/custom_activation_strategy",editUrl:"https://github.com/Unleash/unleash/edit/main/website/docs/advanced/custom-activation-strategy.md",tags:[],version:"current",frontMatter:{id:"custom_activation_strategy",title:"Custom Activation Strategies"},sidebar:"documentation",previous:{title:"Strategy Constraints",permalink:"/advanced/strategy_constraints"},next:{title:"Feature Toggle Types",permalink:"/advanced/feature_toggle_types"}},p=[{value:"Definition",id:"definition",children:[{value:"Parameters",id:"parameters",children:[{value:"Parameter types",id:"parameter-types",children:[],level:4}],level:3}],level:2},{value:"Implementation",id:"implementation",children:[],level:2}],u={toc:p};function d(e){var t=e.components,s=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,n.Z)({},u,s,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"This document is a reference for custom activation strategies. If you're looking for a guide on how to use them, see the ",(0,i.kt)("a",{parentName:"p",href:"/how-to/how-to-use-custom-strategies"},(0,i.kt)("em",{parentName:"a"},"how to use custom strategies")," guide"),"."))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Custom activation strategies")," let you define your own activation strategies to use with Unleash. When the ",(0,i.kt)("a",{parentName:"p",href:"/user_guide/activation_strategy"},"built-in activation strategies")," aren't enough, custom activation strategies are there to provide you with the flexibility you need."),(0,i.kt)("p",null,"Custom activation strategies work exactly like the built-in activation strategies when working in the admin UI."),(0,i.kt)("h2",{id:"definition"},"Definition"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"A strategy creation form. It has fields labeled &quot;strategy name&quot; \u2014 &quot;TimeStamp&quot; \u2014 and &quot;description&quot; \u2014 &quot;activate toggle after a given timestamp&quot;. It also has fields for a parameter named &quot;enableAfter&quot;. The parameter is of type &quot;string&quot; and the parameter description is &quot;Expected format: YYYY-MM-DD HH:MM&quot;. The parameter is required.",src:a(9126).Z})),(0,i.kt)("p",null,"You define custom activation strategies on your Unleash instance, either via the admin UI or via the API. A strategy contains:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"A strategy ",(0,i.kt)("strong",{parentName:"li"},"name"),": You'll use this to refer to the strategy in the UI and in code."),(0,i.kt)("li",{parentName:"ul"},"An optional ",(0,i.kt)("strong",{parentName:"li"},"description"),": Use this to describe what the strategy should do."),(0,i.kt)("li",{parentName:"ul"},"An optional list of ",(0,i.kt)("strong",{parentName:"li"},"parameters"),": Use this to provide the strategy with arguments it should use in its evaluation.")),(0,i.kt)("p",null,"The strategy ",(0,i.kt)("strong",{parentName:"p"},"name")," is the only required parameter, but adding a good ",(0,i.kt)("strong",{parentName:"p"},"description")," will make it easier to remember what a strategy should do. The list of ",(0,i.kt)("strong",{parentName:"p"},"parameters")," lets you pass data from the Unleash instance to the strategy implementation."),(0,i.kt)("h3",{id:"parameters"},"Parameters"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"The strategy configuration screen for the custom &quot;TimeStamp&quot; strategy. The &quot;enableAfter&quot; field says &quot;2021-12-25 00:00&quot;.",src:a(4868).Z})),(0,i.kt)("p",null,"Parameters let you provide arguments to your strategy that it can access for evaluation. When creating a strategy, each parameter can be either required or optional. This marking is to help the user understand what they need to fill out; they can still save the strategy without filling out a required field."),(0,i.kt)("p",null,"Each parameter consists of three parts:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"a ",(0,i.kt)("strong",{parentName:"li"},"name"),": must be unique among the strategy's parameters."),(0,i.kt)("li",{parentName:"ul"},"an optional ",(0,i.kt)("strong",{parentName:"li"},"description"),": describe the purpose or format of the parameter."),(0,i.kt)("li",{parentName:"ul"},"a parameter ",(0,i.kt)("strong",{parentName:"li"},"type"),": dictates the kind of input field the user will see in the admin UI and the type of the value in the implementation code.")),(0,i.kt)("h4",{id:"parameter-types"},"Parameter types"),(0,i.kt)("p",null,"Each parameter has one of five different parameter types. A parameter's type impacts the kind of controls shown in the admin UI and how it's represented in code."),(0,i.kt)("p",null,"Here's an overview over how the types are represented in the JSON payload returned from the Unleash server. The exact types will vary based on your programming language's type system."),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"Unset values")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Values of ",(0,i.kt)("em",{parentName:"p"},"all types")," have an empty string (",(0,i.kt)("inlineCode",{parentName:"p"},'""'),") as the default value. As such, if you don't interact with a control or otherwise set a value, the value will be an empty string, regardless of the value's type."))),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"type name"),(0,i.kt)("th",{parentName:"tr",align:null},"code representation"),(0,i.kt)("th",{parentName:"tr",align:null},"example value"),(0,i.kt)("th",{parentName:"tr",align:null},"UI control"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"string"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"string")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},'"a string"')),(0,i.kt)("td",{parentName:"tr",align:null},"A standard input field")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"percentage"),(0,i.kt)("td",{parentName:"tr",align:null},"an ",(0,i.kt)("inlineCode",{parentName:"td"},"int")," between 0 and 100 (inclusive)"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"99")),(0,i.kt)("td",{parentName:"tr",align:null},"A value slider")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"list"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"string")," (values are comma-separated)"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},'"one,two"')),(0,i.kt)("td",{parentName:"tr",align:null},"A multi-input text field")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"number"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"string")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},'"123"')),(0,i.kt)("td",{parentName:"tr",align:null},"A numeric text field")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"boolean"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},'"true"')," or ",(0,i.kt)("inlineCode",{parentName:"td"},'"false"')),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},'"true"')),(0,i.kt)("td",{parentName:"tr",align:null},"An on/off toggle")))),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"A strategy with five parameters, one of each type.",src:a(4691).Z})),(0,i.kt)("h2",{id:"implementation"},"Implementation"),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"If you have not implemented the strategy in your client SDK, the check will always return ",(0,i.kt)("inlineCode",{parentName:"p"},"false")," because the client doesn't recognize the strategy."))),(0,i.kt)("p",null,"While custom strategies are ",(0,i.kt)("em",{parentName:"p"},"defined")," on the Unleash server, they must be ",(0,i.kt)("em",{parentName:"p"},"implemented")," on the client. All official Unleash client SDKs provide a way for you to implement custom strategies. You should refer to the individual SDK's documentation for specifics, but for an example, you can have a look at the ",(0,i.kt)("a",{parentName:"p",href:"/how-to/how-to-use-custom-strategies#step-3-a"},(0,i.kt)("em",{parentName:"a"},"Node.js client implementation")," section in the ",(0,i.kt)("em",{parentName:"a"},"how to use custom strategies")," guide"),"."),(0,i.kt)("p",null,"The exact method for implementing custom strategies will vary between SDKs, but the server SDKs follow the same patterns. For front-end client SDKs (",(0,i.kt)("a",{parentName:"p",href:"/sdks/android_proxy_sdk"},"Android"),", ",(0,i.kt)("a",{parentName:"p",href:"/sdks/proxy-javascript"},"JavaScript"),", ",(0,i.kt)("a",{parentName:"p",href:"/sdks/proxy-react"},"React"),", ",(0,i.kt)("a",{parentName:"p",href:"/sdks/proxy-ios"},"iOS"),"), the custom activation strategy must be implemented in the ",(0,i.kt)("a",{parentName:"p",href:"/sdks/unleash-proxy"},"Unleash Proxy"),"."),(0,i.kt)("p",null,"When implementing a strategy in your client, you will get access to the strategy's parameters and the Unleash Context. Again, refer to your specific SDK's documentation for more details."))}d.isMDXComponent=!0},4691:function(e,t,a){t.Z=a.p+"assets/images/strategy-parameters-ui-controls-076380c47f634f1d9f626da7ce341b0e.png"},9126:function(e,t,a){t.Z=a.p+"assets/images/timestamp_create_strategy-103954747a03c73d36bec4756291ef24.png"},4868:function(e,t,a){t.Z=a.p+"assets/images/timestamp_use_strategy-a22bd279597bae1e57a22f214caa05c8.png"}}]);