"use strict";(self.webpackChunkwebsitev_2=self.webpackChunkwebsitev_2||[]).push([[7224],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>m});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),l=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},d=function(e){var t=l(e.components);return a.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),c=l(n),m=r,g=c["".concat(p,".").concat(m)]||c[m]||u[m]||i;return n?a.createElement(g,s(s({ref:t},d),{},{components:n})):a.createElement(g,s({ref:t},d))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,s=new Array(i);s[0]=c;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o.mdxType="string"==typeof e?e:r,s[1]=o;for(var l=2;l<i;l++)s[l]=n[l];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},57923:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>s,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>l});var a=n(87462),r=(n(67294),n(3905));const i={id:"strategies",title:"/api/admin/strategies"},s=void 0,o={unversionedId:"api/admin/strategies",id:"api/admin/strategies",title:"/api/admin/strategies",description:"In order to access the admin API endpoints you need to identify yourself. Unless you're using the none authentication method, you'll need to create an ADMIN token and add an Authorization header using the token.",source:"@site/docs/api/admin/strategies-api.md",sourceDirName:"api/admin",slug:"/api/admin/strategies",permalink:"/api/admin/strategies",draft:!1,editUrl:"https://github.com/Unleash/unleash/edit/main/website/docs/api/admin/strategies-api.md",tags:[],version:"current",frontMatter:{id:"strategies",title:"/api/admin/strategies"},sidebar:"documentation",previous:{title:"/api/admin/state",permalink:"/api/admin/state"},next:{title:"/api/admin/tags",permalink:"/api/admin/tags"}},p={},l=[{value:"Fetch Strategies",id:"fetch-strategies",level:3},{value:"Create strategy",id:"create-strategy",level:3},{value:"Update strategy",id:"update-strategy",level:3},{value:"Deprecate strategy",id:"deprecate-strategy",level:3},{value:"Errors",id:"errors",level:4},{value:"Reactivate strategy",id:"reactivate-strategy",level:3},{value:"Errors",id:"errors-1",level:4}],d={toc:l};function u(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"In order to access the admin API endpoints you need to identify yourself. Unless you're using the ",(0,r.kt)("inlineCode",{parentName:"p"},"none")," authentication method, you'll need to ",(0,r.kt)("a",{parentName:"p",href:"/user_guide/api-token"},"create an ADMIN token")," and add an Authorization header using the token.")),(0,r.kt)("h3",{id:"fetch-strategies"},"Fetch Strategies"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"GET: http://unleash.host.com/api/admin/strategies")),(0,r.kt)("p",null,"Used to fetch all defined strategies and their defined parameters."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Response")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "version": 1,\n  "strategies": [\n    {\n      "name": "default",\n      "description": "Default on/off strategy.",\n      "parameters": []\n    },\n    {\n      "name": "userWithId",\n      "description": "Active for userId specified in the comma seperated \'userIds\' parameter.",\n      "parameters": [\n        {\n          "name": "userIds",\n          "type": "list",\n          "description": "List of unique userIds the feature should be active for.",\n          "required": true\n        }\n      ]\n    },\n    {\n      "name": "gradualRollout",\n      "description": "Gradual rollout to logged in users",\n      "parameters": [\n        {\n          "name": "percentage",\n          "type": "percentage",\n          "description": "How many percent should the new feature be active for.",\n          "required": false\n        },\n        {\n          "name": "group",\n          "type": "string",\n          "description": "Group key to use when hasing the userId. Makes sure that the same user get different value for different groups",\n          "required": false\n        }\n      ]\n    }\n  ]\n}\n')),(0,r.kt)("h3",{id:"create-strategy"},"Create strategy"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"POST: http://unleash.host.com/api/admin/strategies")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Body")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "name": "gradualRollout",\n    "description": "Gradual rollout to logged in users",\n    "parameters": [\n        {\n            "name": "percentage",\n            "type": "percentage",\n            "description": "How many percent should the new feature be active for.",\n            "required": false\n        },\n        {\n            "name": "group",\n            "type": "string",\n            "description": "Group key to use when hasing the userId. Makes sure that the same user get different value for different groups",\n            "required": false\n        }\n    ]\n},\n')),(0,r.kt)("p",null,"Used to create a new Strategy. Name is required and must be unique. It is also required to have a parameters array, but it can be empty."),(0,r.kt)("h3",{id:"update-strategy"},"Update strategy"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"PUT: http://unleash.host.com/api/admin/strategies/:name")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Body")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "name": "gradualRollout",\n    "description": "Gradual rollout to logged in users with updated desc",\n    "parameters": [\n        {\n            "name": "percentage",\n            "type": "percentage",\n            "description": "How many percent should the new feature be active for.",\n            "required": false\n        },\n        {\n            "name": "group",\n            "type": "string",\n            "description": "Group key to use when hasing the userId. Makes sure that the same user get different value for different groups",\n            "required": false\n        }\n    ]\n},\n')),(0,r.kt)("p",null,"Used to update a Strategy definition. Name can't be changed. ",(0,r.kt)("strong",{parentName:"p"},"PS! I can be dangerous to change an implemented strategy as the implementation also might need to be changed")),(0,r.kt)("h3",{id:"deprecate-strategy"},"Deprecate strategy"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"POST: https://unleash.host.com/api/admin/strategies/:name/deprecate")),(0,r.kt)("p",null,"Used to deprecate a strategy definition. This will set the deprecated flag to true. If the strategy is already deprecated, this will be a noop."),(0,r.kt)("h4",{id:"errors"},"Errors"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"404 NOT FOUND")," - if ",(0,r.kt)("inlineCode",{parentName:"p"},":name")," does not exist"),(0,r.kt)("h3",{id:"reactivate-strategy"},"Reactivate strategy"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"POST: https://unleash.host.com/api/admin/strategies/:name/reactivate")),(0,r.kt)("p",null,"Used to reactivate a deprecated strategy definition. This will set the deprecated flag back to false. If the strategy is not deprecated this is a noop and will still return 200."),(0,r.kt)("h4",{id:"errors-1"},"Errors"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"404 NOT FOUND")," - if ",(0,r.kt)("inlineCode",{parentName:"p"},":name")," does not exist"))}u.isMDXComponent=!0}}]);