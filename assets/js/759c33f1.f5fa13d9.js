"use strict";(self.webpackChunkwebsitev_2=self.webpackChunkwebsitev_2||[]).push([[2702],{8215:function(e,t,a){var n=a(7294);t.Z=function(e){var t=e.children,a=e.hidden,i=e.className;return n.createElement("div",{role:"tabpanel",hidden:a,className:i},t)}},3580:function(e,t,a){a.d(t,{Z:function(){return c}});var n=a(7462),i=a(7294),r=a(2389),o=a(6808),s=a(6010),l="tabItem_LplD";function u(e){var t,a,r,u=e.lazy,c=e.block,d=e.defaultValue,h=e.values,p=e.groupId,m=e.className,f=i.Children.map(e.children,(function(e){if((0,i.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),v=null!=h?h:f.map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes}})),g=(0,o.lx)(v,(function(e,t){return e.value===t.value}));if(g.length>0)throw new Error('Docusaurus error: Duplicate values "'+g.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var y=null===d?d:null!=(t=null!=d?d:null==(a=f.find((function(e){return e.props.default})))?void 0:a.props.value)?t:null==(r=f[0])?void 0:r.props.value;if(null!==y&&!v.some((function(e){return e.value===y})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+y+'" but none of its children has the corresponding value. Available values are: '+v.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var k=(0,o.UB)(),w=k.tabGroupChoices,b=k.setTabGroupChoices,N=(0,i.useState)(y),T=N[0],A=N[1],E=[],S=(0,o.o5)().blockElementScrollPositionUntilNextRender;if(null!=p){var I=w[p];null!=I&&I!==T&&v.some((function(e){return e.value===I}))&&A(I)}var Z=function(e){var t=e.currentTarget,a=E.indexOf(t),n=v[a].value;n!==T&&(S(t),A(n),null!=p&&b(p,n))},x=function(e){var t,a=null;switch(e.key){case"ArrowRight":var n=E.indexOf(e.currentTarget)+1;a=E[n]||E[0];break;case"ArrowLeft":var i=E.indexOf(e.currentTarget)-1;a=E[i]||E[E.length-1]}null==(t=a)||t.focus()};return i.createElement("div",{className:"tabs-container"},i.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.Z)("tabs",{"tabs--block":c},m)},v.map((function(e){var t=e.value,a=e.label,r=e.attributes;return i.createElement("li",(0,n.Z)({role:"tab",tabIndex:T===t?0:-1,"aria-selected":T===t,key:t,ref:function(e){return E.push(e)},onKeyDown:x,onFocus:Z,onClick:Z},r,{className:(0,s.Z)("tabs__item",l,null==r?void 0:r.className,{"tabs__item--active":T===t})}),null!=a?a:t)}))),u?(0,i.cloneElement)(f.filter((function(e){return e.props.value===T}))[0],{className:"margin-vert--md"}):i.createElement("div",{className:"margin-vert--md"},f.map((function(e,t){return(0,i.cloneElement)(e,{key:t,hidden:e.props.value!==T})}))))}function c(e){var t=(0,r.Z)();return i.createElement(u,(0,n.Z)({key:String(t)},e))}},872:function(e,t,a){var n=a(7294),i=a(3580),r=a(8215),o=a(5197);t.Z=function(e){var t=e.verb,a=e.payload,s=e.url,l=e.title,u=e.endpointType,c=void 0===u?"Unleash server API":u,d=(null==t?void 0:t.toUpperCase())||"",h=JSON.stringify(a,null,2),p="Unleash server API"===c?["unleash-url","API-token"]:["proxy-url","proxy-client-key"],m=p[0],f=p[1],v=(a?"\n"+d+" <"+m+">/"+s+"\nAuthorization: <"+f+">\ncontent-type: application/json\n\n"+h:"\n"+d+" <"+m+">/"+s+"\nAuthorization: <"+f+">\ncontent-type: application/json").trim(),g=(a?'\ncurl -H "Content-Type: application/json" \\\n     -H "Authorization: <'+f+'>" \\\n     -X '+d+" \\\n     -d '"+h+"' \\\n     <"+m+">/"+s:'\ncurl -H "Content-Type: application/json" \\\n     -H "Authorization: <'+f+'>" \\\n     -X '+d+" \\\n     <"+m+">/"+s).trim(),y=(a?"echo '"+h+"' \\\n| http "+d+" \\\n  <"+m+">/"+s+" \\\n  Authorization:<"+f+">":("\nhttp "+d+" \\\n  <"+m+">/"+s+" \\\n  Authorization:<"+f+"> \\\n  "+("POST"!==d||h?"":"--json")).trim()).trim();return n.createElement(i.Z,{groupId:"api-request"},n.createElement(r.Z,{value:"http",label:"HTTP"},n.createElement(o.Z,{language:"http",title:l},v)),n.createElement(r.Z,{value:"curl",label:"cURL"},n.createElement(o.Z,{language:"bash",title:l},g)),n.createElement(r.Z,{value:"httpie",label:"HTTPie"},n.createElement(o.Z,{language:"bash",title:l},y)))}},5991:function(e,t,a){a.r(t),a.d(t,{contentTitle:function(){return u},default:function(){return p},frontMatter:function(){return l},metadata:function(){return c},toc:function(){return d}});var n=a(7462),i=a(3366),r=(a(7294),a(3905)),o=a(872),s=["components"],l={title:"How to schedule feature releases"},u=void 0,c={unversionedId:"how-to/how-to-schedule-feature-releases",id:"how-to/how-to-schedule-feature-releases",title:"How to schedule feature releases",description:"Placeholders in the code samples below are delimited by angle brackets (i.e. ``). You will need to replace them with the values that are correct in your situation for the code samples to run properly.",source:"@site/docs/how-to/how-to-schedule-feature-releases.mdx",sourceDirName:"how-to",slug:"/how-to/how-to-schedule-feature-releases",permalink:"/how-to/how-to-schedule-feature-releases",editUrl:"https://github.com/Unleash/unleash/edit/main/website/docs/how-to/how-to-schedule-feature-releases.mdx",tags:[],version:"current",frontMatter:{title:"How to schedule feature releases"},sidebar:"documentation",previous:{title:"How to use custom activation strategies",permalink:"/how-to/how-to-use-custom-strategies"},next:{title:"Users and permissions",permalink:"/how-to/users-and-permissions"}},d=[{value:"Prerequisites",id:"prerequisites",children:[],level:2},{value:"Schedule feature releases with strategy constraints",id:"strategy-constraints",children:[{value:"Step 1: Add an activation strategy with a date-based constraint",id:"step-1-add-an-activation-strategy-with-a-date-based-constraint",children:[{value:"Scheduling a release via the UI",id:"scheduling-a-release-via-the-ui",children:[],level:4},{value:"Scheduling a release via the API",id:"scheduling-a-release-via-the-api",children:[],level:4}],level:3}],level:2},{value:"Schedule feature releases with custom activation strategies",id:"custom-activation-strategies",children:[{value:"Step 1: Define and apply a custom activation strategy",id:"step-1-define-and-apply-a-custom-activation-strategy",children:[],level:3},{value:"Step 2: Implement the custom activation strategy in your clients",id:"step-2-implement-the-custom-activation-strategy-in-your-clients",children:[],level:3}],level:2}],h={toc:d};function p(e){var t=e.components,l=(0,i.Z)(e,s);return(0,r.kt)("wrapper",(0,n.Z)({},h,l,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Placeholders")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Placeholders in the code samples below are delimited by angle brackets (i.e. ",(0,r.kt)("inlineCode",{parentName:"p"},"<placeholder-name>"),"). You will need to replace them with the values that are correct in ",(0,r.kt)("em",{parentName:"p"},"your")," situation for the code samples to run properly."))),(0,r.kt)("p",null,"There's a whole host of reasons why you may want to schedule the release of a feature, such as:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"to release a feature at a specific date and time")," (for a product launch, for instance)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"to make a feature available only up until a specific moment")," (for a contest cutoff, for instance)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"to make a feature available during a limited period")," (for a 24 hour flash sale, for instance)")),(0,r.kt)("p",null,"There's two distinct ways to do this, depending on which version of Unleash you are running:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"If you're using version 4.9 or later of Unleash Pro or Enterprise, you can (and should) ",(0,r.kt)("a",{parentName:"li",href:"#strategy-constraints"},"use strategy constraints")),(0,r.kt)("li",{parentName:"ul"},"Otherwise, ",(0,r.kt)("a",{parentName:"li",href:"#custom-activation-strategies"},"use custom activation strategies"))),(0,r.kt)("p",null,"In this guide we'll schedule a feature for release at some point in time. The exact same logic applies if you want to make a feature available until some point in the future. Finally, if you want to only make a feature available during a limited time period, you can easily combine the two options."),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This guide assumes that you've got the following:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"some basic experience with Unleash"),(0,r.kt)("li",{parentName:"ul"},"a running instance of Unleash and connected clients (where applicable)"),(0,r.kt)("li",{parentName:"ul"},"an existing feature toggle that you want to schedule the release for")),(0,r.kt)("h2",{id:"strategy-constraints"},"Schedule feature releases with strategy constraints"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"/advanced/strategy_constraints#date-and-time-operators"},"Strategy contstraints")," are the easiest way to schedule feature releases (",(0,r.kt)("a",{parentName:"p",href:"/advanced/strategy_constraints#incompatibilities"},"as long as your SDKs are up to date"),"). You can use this approach with ",(0,r.kt)("em",{parentName:"p"},"any")," strategy you want. The strategies will work just as they normally do, they just won't become active until the specified time. For example: with the standard strategy, the feature would become available to all your users at the specified time; with a gradual rollout, the rollout would start at the specified time."),(0,r.kt)("h3",{id:"step-1-add-an-activation-strategy-with-a-date-based-constraint"},"Step 1: Add an activation strategy with a date-based constraint"),(0,r.kt)("h4",{id:"scheduling-a-release-via-the-ui"},"Scheduling a release via the UI"),(0,r.kt)("p",null,"To schedule a feature release via the UI:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Add the desired activation strategy to the feature"),(0,r.kt)("li",{parentName:"ol"},'Open the constraint creator by using the "add constraint" button'),(0,r.kt)("li",{parentName:"ol"},"Add a date-based constraint by selecting the ",(0,r.kt)("inlineCode",{parentName:"li"},"currentTime")," context field (step 1 in the below image), choosing the ",(0,r.kt)("inlineCode",{parentName:"li"},"DATE_AFTER")," operator (step 2), and setting the point in time where you want the feature to be available from (step 3)\n",(0,r.kt)("img",{alt:"A strategy constraint specifying that the activation strategy should be enabled at 12:00 AM, November 25th 2022. There are visual call-outs pointing to the relevant settings mentioned above.",src:a(3973).Z,width:"2326",height:"1303"}))),(0,r.kt)("h4",{id:"scheduling-a-release-via-the-api"},"Scheduling a release via the API"),(0,r.kt)("p",null,"To add an activation strategy via the Admin API, use the feature's ",(0,r.kt)("inlineCode",{parentName:"p"},"strategies")," endpoint to add a new strategy (see the ",(0,r.kt)("a",{parentName:"p",href:"/api/admin/feature-toggles-v2#add-strategy"},"API documentation for adding strategies to feature toggles")," for more details)."),(0,r.kt)("p",null,"The payload's ",(0,r.kt)("inlineCode",{parentName:"p"},'"name"')," property should contain the name of the strategy to apply (see ",(0,r.kt)("a",{parentName:"p",href:"/user_guide/activation_strategy"},"activation strategies reference documentation")," for all built-in strategies' ",(0,r.kt)("em",{parentName:"p"},"modeling names"),")."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},'"constraint"')," object should have the same format as described in the code sample below. The activation date must be in an ",(0,r.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc3339#section-5.8"},"RFC 3339-compatible format"),", e.g. ",(0,r.kt)("inlineCode",{parentName:"p"},'"1990-12-31T23:59:60Z"'),"."),(0,r.kt)(o.Z,{verb:"post",payload:{name:"default",constraints:[{value:"<activation-date>",operator:"DATE_AFTER",contextName:"currentTime"}]},url:"api/admin/projects/<project-id>/features/environments/<environment>/strategies",title:"Add a feature activation strategy with a scheduled activation time.",mdxType:"ApiRequest"}),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},'"operator"')," property in the code sample can be replaced with ",(0,r.kt)("a",{parentName:"p",href:"/advanced/strategy_constraints#date-and-time-operators"},"any of the other date and time-based operators")," according to your needs."),(0,r.kt)("h2",{id:"custom-activation-strategies"},"Schedule feature releases with custom activation strategies"),(0,r.kt)("p",null,"To schedule feature releases without using strategy constraints, you can use custom activation strategies. This requires defining a custom strategy and then implementing that strategy in your SDKs. For detailed instructions on how to do either of these things, refer to their respective how-to guides:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/how-to/how-to-use-custom-strategies#step-1"},"How to ",(0,r.kt)("em",{parentName:"a"},"define")," custom strategies")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/how-to/how-to-use-custom-strategies#step-3"},"How to ",(0,r.kt)("em",{parentName:"a"},"implement")," custom strategies"))),(0,r.kt)("h3",{id:"step-1-define-and-apply-a-custom-activation-strategy"},"Step 1: Define and apply a custom activation strategy"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Define a strategy")," that takes a parameter that tells it when to activate (visit ",(0,r.kt)("a",{parentName:"p",href:"/advanced/custom_activation_strategy#definition"},"the custom activation strategy reference documentation")," for full details on definitions):"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Give the strategy a name. We'll use ",(0,r.kt)("inlineCode",{parentName:"li"},"enableAfter"),"."),(0,r.kt)("li",{parentName:"ol"},"Give the strategy a required string parameter where the user can enter the time at which the feature should activate. Be sure to describe the format that the user must adhere to."),(0,r.kt)("li",{parentName:"ol"},"Save the strategy")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"/how-to/how-to-use-custom-strategies#step-2"},(0,r.kt)("strong",{parentName:"a"},"Apply the strategy")," to the feature toggle")," you want to schedule."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"A custom activation strategy definition for a strategy called `enableAfter`. It takes a required parameter called `start time`: a string in a date format.",src:a(8410).Z,width:"2185",height:"1944"})),(0,r.kt)("h3",{id:"step-2-implement-the-custom-activation-strategy-in-your-clients"},"Step 2: Implement the custom activation strategy in your clients"),(0,r.kt)("p",null,"In each of the client SDKs that will interact with your feature, implement the strategy (",(0,r.kt)("a",{parentName:"p",href:"/how-to/how-to-use-custom-strategies#step-3"},"the implementation how-to guide")," has steps for all SDK types)."))}p.isMDXComponent=!0},8410:function(e,t,a){t.Z=a.p+"assets/images/custom-strategy-enable-after-005a14e9308f299f98bdd7a7e3693978.png"},3973:function(e,t,a){t.Z=a.p+"assets/images/strategy-constraint-date-after-1992a14ccb1c85895cb4a9d28c0e7695.png"}}]);