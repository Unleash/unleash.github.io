"use strict";(self.webpackChunkwebsitev_2=self.webpackChunkwebsitev_2||[]).push([[6877],{3905:function(e,n,t){t.d(n,{Zo:function(){return p},kt:function(){return c}});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var o=a.createContext({}),u=function(e){var n=a.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},p=function(e){var n=u(e.components);return a.createElement(o.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,l=e.originalType,o=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=u(t),c=r,h=m["".concat(o,".").concat(c)]||m[c]||d[c]||l;return t?a.createElement(h,i(i({ref:n},p),{},{components:t})):a.createElement(h,i({ref:n},p))}));function c(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var l=t.length,i=new Array(l);i[0]=m;var s={};for(var o in n)hasOwnProperty.call(n,o)&&(s[o]=n[o]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var u=2;u<l;u++)i[u]=t[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},8530:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return s},contentTitle:function(){return o},metadata:function(){return u},toc:function(){return p},default:function(){return m}});var a=t(7462),r=t(3366),l=(t(7294),t(3905)),i=["components"],s={id:"user-admin",title:"/api/admin/user-admin"},o=void 0,u={unversionedId:"api/admin/user-admin",id:"api/admin/user-admin",isDocsHomePage:!1,title:"/api/admin/user-admin",description:"In order to access the admin API endpoints you need to identify yourself. Unless you're using the none authentication method, you'll need to create an ADMIN token and add an Authorization header using the token.",source:"@site/docs/api/admin/user-admin.md",sourceDirName:"api/admin",slug:"/api/admin/user-admin",permalink:"/api/admin/user-admin",editUrl:"https://github.com/Unleash/unleash/edit/master/website/docs/api/admin/user-admin.md",tags:[],version:"current",frontMatter:{id:"user-admin",title:"/api/admin/user-admin"},sidebar:"api",previous:{title:"/api/admin/context",permalink:"/api/admin/context"},next:{title:"/api/client/features",permalink:"/api/client/features"}},p=[{value:"List all users",id:"list-all-users",children:[],level:3},{value:"Get a single users",id:"get-user",children:[],level:3},{value:"Search for users",id:"search-for-users",children:[],level:3},{value:"Add a new user",id:"add-a-new-user",children:[{value:"Return values:",id:"return-values",children:[],level:4}],level:3},{value:"Update a user",id:"update-a-user",children:[],level:3},{value:"Delete a user",id:"delete-a-user",children:[],level:3},{value:"Change password for a user",id:"change-password-for-a-user",children:[],level:3},{value:"Validate password for a user",id:"validate-password-for-a-user",children:[],level:3}],d={toc:p};function m(e){var n=e.components,t=(0,r.Z)(e,i);return(0,l.kt)("wrapper",(0,a.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"In order to access the admin API endpoints you need to identify yourself. Unless you're using the ",(0,l.kt)("inlineCode",{parentName:"p"},"none")," authentication method, you'll need to ",(0,l.kt)("a",{parentName:"p",href:"/user_guide/api-token"},"create an ADMIN token")," and add an Authorization header using the token.")),(0,l.kt)("h3",{id:"list-all-users"},"List all users"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"GET https://unleash.host.com/api/admin/user-admin")),(0,l.kt)("p",null,"Will return all users and all available root roles for the Unleash instance."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Body")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "rootRoles": [\n    {\n      "description": "Users with the global admin role have superuser access to Unleash and can perform any operation within the unleash platform.",\n      "id": 1,\n      "name": "Admin",\n      "project": null,\n      "type": "root"\n    },\n    {\n      "description": "Users with this role have access most features in Unleash, but can not manage users and roles in the global scope. If a user with a global regular role creates a project, they will become a project admin and receive superuser rights within the context of that project.",\n      "id": 2,\n      "name": "Editor",\n      "project": null,\n      "type": "root"\n    },\n    {\n      "description": "Users with this role can only read root resources in Unleash. They may be added as collaborator to specific projects.",\n      "id": 3,\n      "name": "Viewer",\n      "project": null,\n      "type": "root"\n    }\n  ],\n  "users": [\n    {\n      "createdAt": "2021-05-14T08:56:34.859Z",\n      "email": "random-user@getunleash.ai",\n      "id": 3,\n      "imageUrl": "https://gravatar.com/avatar/3066e45cf3a09d9a4b51e08a3ac20749?size=42&default=retro",\n      "inviteLink": "",\n      "isAPI": false,\n      "loginAttempts": 0,\n      "rootRole": 1,\n      "seenAt": null\n    },\n    {\n      "createdAt": "2021-05-14T08:58:07.891Z",\n      "email": "random-user2@getunleash.ai",\n      "id": 4,\n      "imageUrl": "https://gravatar.com/avatar/90047524992cd6ae8f66e249a7630d80?size=42&default=retro",\n      "inviteLink": "",\n      "isAPI": false,\n      "loginAttempts": 0,\n      "rootRole": 1,\n      "seenAt": null\n    }\n  ]\n}\n')),(0,l.kt)("h3",{id:"get-user"},"Get a single users"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"GET https://unleash.host.com/api/admin/user-admin/:id")),(0,l.kt)("p",null,"Will return a single user by id."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Body")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n      "createdAt": "2021-05-14T08:58:07.891Z",\n      "email": "random-user2@getunleash.ai",\n      "id": 4,\n      "imageUrl": "https://gravatar.com/avatar/90047524992cd6ae8f66e249a7630d80?size=42&default=retro",\n      "inviteLink": "",\n      "isAPI": false,\n      "loginAttempts": 0,\n      "rootRole": 1,\n      "seenAt": null\n    }\n')),(0,l.kt)("h3",{id:"search-for-users"},"Search for users"),(0,l.kt)("p",null,"You can also search for users via the search API. It will preform a simple search based on name and email matching the given query. Requires minimum 2 characters."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"GET http://localhost:4242/api/admin/user-admin/search?q=iv")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Body")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'[\n  {\n    "email": "iva2@some-mail.com",\n    "id": 19,\n    "imageUrl": "https://gravatar.com/avatar/6c795493735ff1864f17d47ec52cf0ec?size=42&default=retro"\n  },\n  {\n    "email": "ivar@another.com",\n    "id": 20,\n    "imageUrl": "https://gravatar.com/avatar/f4b3e16a54bfbe824eb814479053bf88?size=42&default=retro"\n  }\n]\n')),(0,l.kt)("h3",{id:"add-a-new-user"},"Add a new user"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"POST https://unleash.host.com/api/admin/user-admin")),(0,l.kt)("p",null,"Creates a new use with the given root role."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Body")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "email": "some-email@getunleash.io",\n  "name": "Some Name",\n  "rootRole": 2\n}\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Notes")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"rootRole")," can either be the role id or the unique name of the role (e.g: ",(0,l.kt)("inlineCode",{parentName:"li"},"Editor"),").")),(0,l.kt)("h4",{id:"return-values"},"Return values:"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"201: Created")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "createdAt": "2021-05-18T10:28:23.067Z",\n  "email": "some-email@getunleash.io",\n  "emailSent": true,\n  "id": 1337,\n  "imageUrl": "https://gravatar.com/avatar/222f2ab70c039dda12e3d11acdcebd02?size=42&default=retro",\n  "inviteLink": "http://localhost:4242/new-user?token=123",\n  "isAPI": false,\n  "loginAttempts": 0,\n  "name": "Some Name",\n  "rootRole": 2,\n  "seenAt": null\n}\n')),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"400: Bad request")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'[\n  {\n    "msg": "User already exists"\n  }\n]\n')),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"400: Bad request")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'[\n  {\n    "msg": "You must specify username or email"\n  }\n]\n')),(0,l.kt)("h3",{id:"update-a-user"},"Update a user"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"POST https://unleash.host.com/api/admin/user-admin/:userId")),(0,l.kt)("p",null,"Updates use with new fields"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Body")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "email": "some-email@getunleash.io",\n  "name": "Some Name",\n  "rootRole": 2\n}\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Notes")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"userId")," is required as a url path parameter."),(0,l.kt)("li",{parentName:"ul"},"All fields are optional. Only provided fields are updated.")),(0,l.kt)("h3",{id:"delete-a-user"},"Delete a user"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"DELETE https://unleash.host.com/api/admin/user-admin/:userId")),(0,l.kt)("p",null,"Deletes the user with the given ",(0,l.kt)("inlineCode",{parentName:"p"},"userId"),"."),(0,l.kt)("p",null,"Possible return values:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"200: OK")," - user was deleted"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"404: NOT FOUND")," - No user with the provided ",(0,l.kt)("inlineCode",{parentName:"li"},"userId")," was found")),(0,l.kt)("h3",{id:"change-password-for-a-user"},"Change password for a user"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"POST https://unleash.host.com/api/admin/user-admin/:userId/change-password")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Body")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "password": "k!5As3HquUrQ"\n}\n')),(0,l.kt)("p",null,"Return values:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"200 OK"),": Password was changed."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"400 Bad Request"),": Password was not changed. Unleash requires a strong password.",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"This means",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"minimum 10 characters long"),(0,l.kt)("li",{parentName:"ul"},"contains at least one uppercase letter"),(0,l.kt)("li",{parentName:"ul"},"contains at least one number"),(0,l.kt)("li",{parentName:"ul"},"contains at least one special character (symbol)"))))),(0,l.kt)("li",{parentName:"ul"},"Please see in the response body on how to improve the password.")),(0,l.kt)("h3",{id:"validate-password-for-a-user"},"Validate password for a user"),(0,l.kt)("p",null,"You can use this endpoint to validate the strength of a given password. Unleash requires a strong password."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"This means",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"minimum 10 characters long"),(0,l.kt)("li",{parentName:"ul"},"contains at least one uppercase letter"),(0,l.kt)("li",{parentName:"ul"},"contains at least one number"),(0,l.kt)("li",{parentName:"ul"},"contains at least one special character (symbol)")))),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"http POST http://localhost:4242/api/admin/user-admin/validate-password")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Body")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "password": "some-simple"\n}\n')),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"200 OK"),": Password is strong enough for Unleash."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"400 Bad Request"),": Unleash requires a stronger password. Please see in the response body on how to improve the password.")))}m.isMDXComponent=!0}}]);