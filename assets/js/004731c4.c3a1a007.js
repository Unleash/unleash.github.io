"use strict";(self.webpackChunkwebsitev_2=self.webpackChunkwebsitev_2||[]).push([[4539],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return p}});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},d=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},f=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),f=c(n),p=o,h=f["".concat(l,".").concat(p)]||f[p]||u[p]||i;return n?a.createElement(h,r(r({ref:t},d),{},{components:n})):a.createElement(h,r({ref:t},d))}));function p(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,r=new Array(i);r[0]=f;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,r[1]=s;for(var c=2;c<i;c++)r[c]=n[c];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}f.displayName="MDXCreateElement"},3487:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return c},toc:function(){return d},default:function(){return f}});var a=n(7462),o=n(3366),i=(n(7294),n(3905)),r=["components"],s={id:"strategy_constraints",title:"Strategy Constraints"},l=void 0,c={unversionedId:"advanced/strategy_constraints",id:"advanced/strategy_constraints",isDocsHomePage:!1,title:"Strategy Constraints",description:"Strategy constraints are part of Unleash Pro and Enterprise.",source:"@site/docs/advanced/strategy-constraints.md",sourceDirName:"advanced",slug:"/advanced/strategy_constraints",permalink:"/advanced/strategy_constraints",editUrl:"https://github.com/Unleash/unleash/edit/master/website/docs/advanced/strategy-constraints.md",tags:[],version:"current",frontMatter:{id:"strategy_constraints",title:"Strategy Constraints"},sidebar:"documentation",previous:{title:"Datadog",permalink:"/addons/datadog"},next:{title:"Custom Activation Strategy",permalink:"/advanced/custom_activation_strategy"}},d=[{value:"How to add strategy constraints",id:"how-to-add-strategy-constraints",children:[{value:"Constraining on standard context fields",id:"constraining-on-standard-context-fields",children:[],level:3},{value:"Constraining on custom context fields",id:"constrain-on-custom-context-fields",children:[{value:"Defining custom fields",id:"define-your-own-custom-fields",children:[{value:"Step 1: Navigate to \u201cContext Fields\u201c",id:"step-1-navigate-to-context-fields",children:[],level:5},{value:"Step 2: Define new context field",id:"step-2-define-new-context-field",children:[{value:"What are \u201clegal values\u201d?",id:"what-is-legal-values",children:[],level:6}],level:5}],level:4}],level:3},{value:"Deprecated: Constrain on a specific environment",id:"constrain-on-a-specific-environment",children:[],level:3}],level:2}],u={toc:d};function f(e){var t=e.components,s=(0,o.Z)(e,r);return(0,i.kt)("wrapper",(0,a.Z)({},u,s,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("div",{class:"alert alert--info",role:"alert"},"Strategy constraints are part of Unleash Pro and Enterprise."),(0,i.kt)("br",null),(0,i.kt)("p",null,"Strategy constraints allow you to set preconditions on activation strategies that must be satisfied for the activation strategy to take effect. For example, you might want a strategy to only trigger if a user belongs to a specific group or is in a specific country."),(0,i.kt)("p",null,"Constraints use fields from the ",(0,i.kt)("a",{parentName:"p",href:"../user_guide/unleash_context"},"Unleash Context")," to determine whether a strategy should apply or not. You can constrain on both standard context fields and on custom context fields."),(0,i.kt)("p",null,"To be able to constrain on a field, it must be listed under the Context Field menu. If a field isn't listed, you can add it. See ",(0,i.kt)("a",{parentName:"p",href:"#define-your-own-custom-fields"},"the section on defining your own custom fields")," for more info."),(0,i.kt)("h2",{id:"how-to-add-strategy-constraints"},"How to add strategy constraints"),(0,i.kt)("p",null,"To add a strategy constraint, you'll need a feature toggle with a defined strategy."),(0,i.kt)("p",null,'Then, use the "add constraint" button in the UI, choose your context field, and the appropriate values that you wish to constrain it to.'),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"A feature toggle strategy view showing a button labeled with add constraints.",src:n(6201).Z})),(0,i.kt)("h3",{id:"constraining-on-standard-context-fields"},"Constraining on standard context fields"),(0,i.kt)("p",null,"To constrain on a standard context field, choose the field you wish to constrain on. If the context field you want to constrain on isn't listed, you'll need to add it manually via the Context Field menu. Follow the procedure as if you were ",(0,i.kt)("a",{parentName:"p",href:"#define-your-own-custom-fields"},"defining custom context fields"),", but give it a name that matches the desired field in the Unleash Context. Note that context fields are case-sensitive."),(0,i.kt)("h3",{id:"constrain-on-custom-context-fields"},"Constraining on custom context fields"),(0,i.kt)("p",null,"If you need context data that isn't available in the default Unleash Context, you can also constrain on custom context fields. A common use case is a multi-tenant service where you want to use a tenant identifier to control the feature rollout. This would allow you to decide which users should get access to your new feature based on the tenant."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"A toggle with the gradual rollout strategy. The toggle is constrained on the custom content field &quot;region&quot; and set to only activate if the region is Africa or Europe.",src:n(6211).Z})),(0,i.kt)("h4",{id:"define-your-own-custom-fields"},"Defining custom fields"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Starting with Unleash-enterprise version 3.2.28 customers can define their custom context fields via the user interface.")),(0,i.kt)("p",null,"You can also define custom context fields to use with strategy constraints. We have seen customers use multiple variants of custom context fields to control their feature rollout, such as:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"region")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"country")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"customerType")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"tenantId"))),(0,i.kt)("p",null,"Combining strategy constraints with the ",(0,i.kt)("a",{parentName:"p",href:"../user_guide/activation_strategy#gradual-rollout"},"gradual rollout strategy")," would allow you to do a gradual rollout to a specific segment of your user base."),(0,i.kt)("h5",{id:"step-1-navigate-to-context-fields"},"Step 1: Navigate to \u201cContext Fields\u201c"),(0,i.kt)("p",null,'Locate \u201ccontext fields in the menu"'),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"The top Unleash navigation menu with the &quot;advanced&quot; section expanded. The dropdown shows a number of options, including one called &quot;context fields&quot;, which is highlighted by an overlaid arrow.",src:n(9899).Z})),(0,i.kt)("h5",{id:"step-2-define-new-context-field"},"Step 2: Define new context field"),(0,i.kt)("p",null,"Next you can define your new context field. The minimum requirement is to give it a unique ",(0,i.kt)("em",{parentName:"p"},"name"),". In addition, you can give it a description and define ",(0,i.kt)("a",{parentName:"p",href:"#what-is-legal-values"},(0,i.kt)("em",{parentName:"a"},"legal values")),"."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"A form to define new context fields. It has fields labeled &quot;name&quot;, &quot;description&quot;, and &quot;legal values&quot;.",src:n(4761).Z})),(0,i.kt)("h6",{id:"what-is-legal-values"},"What are \u201clegal values\u201d?"),(0,i.kt)("p",null,"To constrain what values a user can enter for a context field in the Unleash Admin UI, you can use ",(0,i.kt)("em",{parentName:"p"},"legal values"),". This is a set of predefined values that show up as a dropdown"),(0,i.kt)("p",null,"A context field's ",(0,i.kt)("em",{parentName:"p"},"legal values")," are a set of predefined values that you can"),(0,i.kt)("p",null,"define all possible values for that context field. These values appear in the Unleash Admin UI to guide users when working with context fields to make sure they only use legal values."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"A modal to define constraints. The &quot;region&quot; context field is selected and a dropdown is showing the legal values defined for that field: Africa, Asia, Europe, North-America.",src:n(7408).Z})),(0,i.kt)("h3",{id:"constrain-on-a-specific-environment"},"[Deprecated]",": Constrain on a specific environment"),(0,i.kt)("p",null,"Before Unleash 4.3, using strategy constraints was the recommended way to have different toggle configurations per environment. Now that Unleash has environment support built in, we no longer recommend you use strategy constraints for this. Instead, see the ",(0,i.kt)("a",{parentName:"p",href:"../user_guide/environments"},"environments documentation"),"."))}f.isMDXComponent=!0},6201:function(e,t,n){t.Z=n.p+"assets/images/add-constraint-a1911cbad87390f5bc6f16430302f17a.png"},7408:function(e,t,n){t.Z=n.p+"assets/images/constraints_legal_values-fdd1ef7f27cda840b707ae89046900e5.png"},9899:function(e,t,n){t.Z=n.p+"assets/images/context-fields-fd22fbc0b95beddac29fa58c5e5505f5.png"},6211:function(e,t,n){t.Z=n.p+"assets/images/custom-constraints-37e951da922d576705cfca6e797026b3.png"},4761:function(e,t,n){t.Z=n.p+"assets/images/new_context_field-5041b9947e156aca28379be906a7e050.png"}}]);