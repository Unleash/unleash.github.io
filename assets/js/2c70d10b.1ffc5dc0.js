"use strict";(self.webpackChunkwebsitev_2=self.webpackChunkwebsitev_2||[]).push([[2176],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>p});var a=n(7294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,o=e.originalType,s=e.parentName,c=r(e,["components","mdxType","originalType","parentName"]),h=u(n),p=l,m=h["".concat(s,".").concat(p)]||h[p]||d[p]||o;return n?a.createElement(m,i(i({ref:t},c),{},{components:n})):a.createElement(m,i({ref:t},c))}));function p(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var o=n.length,i=new Array(o);i[0]=h;var r={};for(var s in t)hasOwnProperty.call(t,s)&&(r[s]=t[s]);r.originalType=e,r.mdxType="string"==typeof e?e:l,i[1]=r;for(var u=2;u<o;u++)i[u]=n[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},8215:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(7294);const l=function(e){let{children:t,hidden:n,className:l}=e;return a.createElement("div",{role:"tabpanel",hidden:n,className:l},t)}},3580:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(7462),l=n(7294),o=n(2389),i=n(6696),r=n(4334);const s="tabItem_LplD";function u(e){var t,n,o;const{lazy:u,block:c,defaultValue:d,values:h,groupId:p,className:m}=e,v=l.Children.map(e.children,(e=>{if((0,l.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),f=null!=h?h:v.map((e=>{let{props:{value:t,label:n,attributes:a}}=e;return{value:t,label:n,attributes:a}})),k=(0,i.lx)(f,((e,t)=>e.value===t.value));if(k.length>0)throw new Error('Docusaurus error: Duplicate values "'+k.map((e=>e.value)).join(", ")+'" found in <Tabs>. Every value needs to be unique.');const b=null===d?d:null!=(t=null!=d?d:null==(n=v.find((e=>e.props.default)))?void 0:n.props.value)?t:null==(o=v[0])?void 0:o.props.value;if(null!==b&&!f.some((e=>e.value===b)))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+b+'" but none of its children has the corresponding value. Available values are: '+f.map((e=>e.value)).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");const{tabGroupChoices:g,setTabGroupChoices:y}=(0,i.UB)(),[w,N]=(0,l.useState)(b),S=[],{blockElementScrollPositionUntilNextRender:T}=(0,i.o5)();if(null!=p){const e=g[p];null!=e&&e!==w&&f.some((t=>t.value===e))&&N(e)}const x=e=>{const t=e.currentTarget,n=S.indexOf(t),a=f[n].value;a!==w&&(T(t),N(a),null!=p&&y(p,a))},U=e=>{var t;let n=null;switch(e.key){case"ArrowRight":{const t=S.indexOf(e.currentTarget)+1;n=S[t]||S[0];break}case"ArrowLeft":{const t=S.indexOf(e.currentTarget)-1;n=S[t]||S[S.length-1];break}}null==(t=n)||t.focus()};return l.createElement("div",{className:"tabs-container"},l.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":c},m)},f.map((e=>{let{value:t,label:n,attributes:o}=e;return l.createElement("li",(0,a.Z)({role:"tab",tabIndex:w===t?0:-1,"aria-selected":w===t,key:t,ref:e=>S.push(e),onKeyDown:U,onFocus:x,onClick:x},o,{className:(0,r.Z)("tabs__item",s,null==o?void 0:o.className,{"tabs__item--active":w===t})}),null!=n?n:t)}))),u?(0,l.cloneElement)(v.filter((e=>e.props.value===w))[0],{className:"margin-vert--md"}):l.createElement("div",{className:"margin-vert--md"},v.map(((e,t)=>(0,l.cloneElement)(e,{key:t,hidden:e.props.value!==w})))))}function c(e){const t=(0,o.Z)();return l.createElement(u,(0,a.Z)({key:String(t)},e))}},9460:(e,t,n)=>{n.r(t),n.d(t,{contentTitle:()=>s,default:()=>h,frontMatter:()=>r,metadata:()=>u,toc:()=>c});var a=n(7462),l=(n(7294),n(3905)),o=n(3580),i=n(8215);const r={id:"node_sdk",title:"Node SDK"},s=void 0,u={unversionedId:"sdks/node_sdk",id:"sdks/node_sdk",title:"Node SDK",description:"In this guide we explain how to use feature toggles in a Node application using Unleash-hosted. We will be using the open source Unleash Node.js Client SDK.",source:"@site/docs/sdks/node.md",sourceDirName:"sdks",slug:"/sdks/node_sdk",permalink:"/sdks/node_sdk",editUrl:"https://github.com/Unleash/unleash/edit/main/website/docs/sdks/node.md",tags:[],version:"current",frontMatter:{id:"node_sdk",title:"Node SDK"},sidebar:"documentation",previous:{title:"Java SDK",permalink:"/sdks/java_sdk"},next:{title:"PHP SDK",permalink:"/sdks/php_sdk"}},c=[{value:"Step 1: Install the client SDK",id:"step-1-install-the-client-sdk",children:[],level:2},{value:"Step 2: Initialize the client SDK",id:"step-2-initialize-the-client-sdk",children:[],level:2},{value:"Step 3: Use the feature toggle",id:"step-3-use-the-feature-toggle",children:[],level:2},{value:"Step 4: Provide the Unleash-context",id:"step-4-provide-the-unleash-context",children:[],level:2}],d={toc:c};function h(e){let{components:t,...n}=e;return(0,l.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"In this guide we explain how to use feature toggles in a Node application using Unleash-hosted. We will be using the open source Unleash ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/Unleash/unleash-client-node"},"Node.js Client SDK"),"."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"You will need your ",(0,l.kt)("inlineCode",{parentName:"p"},"API URL")," and your ",(0,l.kt)("inlineCode",{parentName:"p"},"API token")," in order to connect the Client SDK to you Unleash instance. You can find this information in the \u201cAdmin\u201d section Unleash management UI. ",(0,l.kt)("a",{parentName:"p",href:"../user_guide/api-token"},"Read more"))),(0,l.kt)("h2",{id:"step-1-install-the-client-sdk"},"Step 1: Install the client SDK"),(0,l.kt)("p",null,"First we must install Node.js dependency:"),(0,l.kt)(o.Z,{groupId:"npm2yarn",mdxType:"Tabs"},(0,l.kt)(i.Z,{value:"npm",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"npm install unleash-client\n"))),(0,l.kt)(i.Z,{value:"yarn",label:"Yarn",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"yarn add unleash-client\n")))),(0,l.kt)("h2",{id:"step-2-initialize-the-client-sdk"},"Step 2: Initialize the client SDK"),(0,l.kt)("p",null,"Next we must initialize the client SDK in the application:"),(0,l.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Synchronous initialization")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"The client SDK will synchronize with the Unleash API on initialization, so it can take a few hundred milliseconds for the client to reach the correct state."),(0,l.kt)("p",{parentName:"div"},"See the following code sample or the ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/Unleash/unleash-client-node#block-until-unleash-sdk-has-synchronized"},(0,l.kt)("em",{parentName:"a"},"block until Unleash is synchronized")," section of the readme")," for the steps to do this."))),(0,l.kt)(o.Z,{mdxType:"Tabs"},(0,l.kt)(i.Z,{value:"async",label:"Asynchronous initialization",default:!0,mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const unleash = require('unleash-client');\n\nunleash.initialize({\n  url: 'https://YOUR-API-URL',\n  appName: 'my-node-name',\n  environment: process.env.APP_ENV,\n  customHeaders: { Authorization: 'SOME-SECRET' },\n});\n"))),(0,l.kt)(i.Z,{value:"sync",label:"Synchronous initializiation",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const { startUnleash } = require('unleash-client');\n\nconst unleash = await startUnleash({\n  url: 'https://YOUR-API-URL',\n  appName: 'my-node-name',\n  environment: process.env.APP_ENV,\n  customHeaders: { Authorization: 'SOME-SECRET' },\n});\n")))),(0,l.kt)("p",null,"The example code above will initialize the client SDK, and connect to the Unleash-hosted demo instance. It also uses the API token for the demo instance. You should change the URL and the Authorization header (API token) with the correct values for your instance, which you may locate under \u201cInstance admin\u201d in the menu."),(0,l.kt)("h2",{id:"step-3-use-the-feature-toggle"},"Step 3: Use the feature toggle"),(0,l.kt)("p",null,"Now that we have initialized the client SDK in our application we can start using feature toggles defined in Unleash in our application. To achieve this we have the \u201cisEnabled\u201d method available, which will allow us to check the value of a feature toggle. This method will return ",(0,l.kt)("strong",{parentName:"p"},"true")," or ",(0,l.kt)("strong",{parentName:"p"},"false")," based on whether the feature should be enabled or disabled for the current request."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"setInterval(() => {\n  if (unleash.isEnabled('DemoToggle')) {\n    console.log('Toggle enabled');\n  } else {\n    console.log('Toggle disabled');\n  }\n}, 1000);\n")),(0,l.kt)("p",null,"Please note that in the above example we put the isEnabled-evaluation inside the setInterval method. This is required in the small example to make sure that the feature toggle is not evaluated, and application exits, before the client SDK have been able to synchronize with the Unleash-hosted API. State is kept in memory by the client SDK (and synchronizes with the Unleash-hosted API in the background). This is done to prefer performance over update speed. You can read more about the ",(0,l.kt)("a",{parentName:"p",href:"https://www.unleash-hosted.com/articles/our-unique-architecture"},"Unleash architecture"),"."),(0,l.kt)("p",null,"It can also be nice to notice that if you use an undefined feature toggle the Unleash SDK will return false instead of crashing your application. The SDK will also report metrics back to Unleash-hosted on feature toggle usage, which makes it ","_","possible to spot toggles not yet defined. And this is a very neat way to help you debug if something does not work as expected."),(0,l.kt)("p",null,(0,l.kt)("em",{parentName:"p"},'Note that you can also wait until the Unleash SDK has fully synchronized similar to familiar "on-ready" hooks in other APIs. See ',(0,l.kt)("a",{parentName:"em",href:"https://github.com/Unleash/unleash-client-node#block-until-unleash-sdk-has-synchronized"},"block until Unleashed is synchronized")," for how to do this.")),(0,l.kt)("h2",{id:"step-4-provide-the-unleash-context"},"Step 4: Provide the Unleash-context"),(0,l.kt)("p",null,"It is the client SDK that computes whether a feature toggle should be considered enabled or disabled for a specific request. This is the job of the activation strategies, which are implemented in the client SDK."),(0,l.kt)("p",null,"An activation strategy is an implementation of rules based on data, which you provide as part of the Unleash Context."),(0,l.kt)("p",null,"You provide the Unleash context as part of the second argument to the isEnabled call:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"const context = {\n  userId: '123',\n  sessionId: '123123-123-123',\n  remoteAddress: '127.0.0.1',\n};\n\nconst enabled = isEnabled('app.demo', context);\n")))}h.isMDXComponent=!0}}]);