<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.7">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-134882379-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-134882379-1",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Unleash" href="/opensearch.xml"><title data-react-helmet="true">SSO - SAML 2.0 Keycloak | Unleash</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://docs.getunleash.io/img/logo.png"><meta data-react-helmet="true" name="twitter:image" content="https://docs.getunleash.io/img/logo.png"><meta data-react-helmet="true" property="og:url" content="https://docs.getunleash.io/advanced/sso-saml-keycloak"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="SSO - SAML 2.0 Keycloak | Unleash"><meta data-react-helmet="true" name="description" content="The Single-Sign-On capability is only available for customers on the Enterprise subscription. Check out the Unleash plans for details."><meta data-react-helmet="true" property="og:description" content="The Single-Sign-On capability is only available for customers on the Enterprise subscription. Check out the Unleash plans for details."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.getunleash.io/advanced/sso-saml-keycloak"><link data-react-helmet="true" rel="alternate" href="https://docs.getunleash.io/advanced/sso-saml-keycloak" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.getunleash.io/advanced/sso-saml-keycloak" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.525ee3d7.css">
<link rel="preload" href="/assets/js/runtime~main.bcbcc8a8.js" as="script">
<link rel="preload" href="/assets/js/main.27ae651b.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Unleash logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/logo.svg" alt="Unleash logo" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">Unleash</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Documentation</a><a class="navbar__item navbar__link" href="/deploy/getting_started">Deploy and manage</a><a class="navbar__item navbar__link" href="/integrations/integrations">Integrations</a><a class="navbar__item navbar__link" href="/api">API</a></div><div class="navbar__items navbar__items--right"><a href="https://www.getunleash.io/plans" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Unleash Enterprise<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/Unleash/unleash" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">🌜</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">🌞</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Getting started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Unleash SDKs</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Addons</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Advanced</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/advanced/strategy_constraints">Strategy Constraints</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/advanced/custom_activation_strategy">Custom Activation Strategy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/advanced/feature_toggle_types">Feature Toggle Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/advanced/toggle_variants">Feature Toggle Variants</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/advanced/archived_toggles">Archived toggles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/advanced/audit_log">The audit log</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/advanced/api_access">API Access</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/advanced/tags">Tagging Features</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/advanced/enterprise-authentication">Single-Sign-On</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/advanced/sso-open-id-connect">SSO - OpenId Connect</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/advanced/sso-saml">SSO - SAML 2.0 Okta</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/advanced/sso-saml-keycloak">SSO - SAML 2.0 Keycloak</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/advanced/sso-google">SSO - Google (deprecated)</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>SSO - SAML 2.0 Keycloak</h1></header><blockquote><p>The <strong>Single-Sign-On capability</strong> is only available for customers on the Enterprise subscription. Check out the <a href="https://www.getunleash.io/plans" target="_blank" rel="noopener noreferrer">Unleash plans</a> for details.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_31ik" id="introduction">Introduction<a aria-hidden="true" class="hash-link" href="#introduction" title="Direct link to heading">​</a></h2><p>In this guide we will do a deep dive on the Single-Sign-On (SSO) integration with SAML 2.0 and connect it with Keycloak as IdP. Unleash supports other identity providers and protocols, have a look at <a href="/advanced/enterprise-authentication">all available Single-Sign-On options</a></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="basic-configuration">Basic configuration<a aria-hidden="true" class="hash-link" href="#basic-configuration" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_31ik" id="step-1">Step 1: Sign-in to Unleash<a aria-hidden="true" class="hash-link" href="#step-1" title="Direct link to heading">​</a></h3><p>In order to configure SSO you will need to log in to the Unleash instance with a user that have &quot;Admin&quot; role. If you are self-hosting Unleash then a default user will be automatically created the first time you start Unleash:</p><ul><li>username: <code>admin</code></li><li>password: <code>unleash4all</code></li></ul><h3 class="anchor anchorWithStickyNavbar_31ik" id="step-2">Step 2: Navigate to SSO configuration<a aria-hidden="true" class="hash-link" href="#step-2" title="Direct link to heading">​</a></h3><p>In order to configure SSO with SAML with your Unleash enterprise you should navigate to the Single-Sign-On configuration section and choose the &quot;SAML 2.0&quot; tab.</p><p><img alt="sso-config" src="/assets/images/sso-configure-saml-b21f26aca67f7af1e116bc5a2d23204a.png"></p><h3 class="anchor anchorWithStickyNavbar_31ik" id="step-3">Step 3: Keycloak with SAML 2.0<a aria-hidden="true" class="hash-link" href="#step-3" title="Direct link to heading">​</a></h3><p>Open to the Keycloak dashboard and navigate to “Clients” and click “Add Client” button. Give it a unique clientId (e.g. unleash), use the “saml” protocol and specify the following SAML Endpoint:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">https://&lt;unleash.hostname.com&gt;/auth/saml/callback</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><img alt="Keycloak: Add client" src="/assets/images/keykloak_step1-768x347-44d9190db1752ec4ed70c29499d145aa.png"></p><p><strong>a) Change “Name ID format to “email”</strong> Unleash expects an email to be sent from the SSO provider so make sure Name ID format is set to email, see a). also you must give the IDP Initiated SSO URL Name, we have chosen to call it “unleash”, see 2). This gives us the Sign-on URL we will need in our Unleash configuration later.</p><p><img alt="Keycloak: step 2" src="/assets/images/keykloak_step2b-768x242-eda1a0d74c67a5189fbc5b538170d11d.png"></p><p><strong>b) Copy the Keycloak Entity ID an Signing key</strong></p><p>Navigate to “Realm Settings” and open the “SAML 2.0 Identity Provider Metadata”. You will need copy the entityID (a) and the X509Certificate (B). These will be required when configuring SAML 2.0 in Unleash.</p><p><img alt="Keycloak: step 3" src="/assets/images/keykloak_step3-768x235-8b396e1cacb7dda0391f0904dc5b132b.png"></p><h3 class="anchor anchorWithStickyNavbar_31ik" id="step-3">Step 4: Configure SAML 2.0 Authentication provider in Unleash<a aria-hidden="true" class="hash-link" href="#step-3" title="Direct link to heading">​</a></h3><p>Go back to Unleash Admin Dashboard and navigate to <code>Admin Menu -&gt; Single-Sign-On -&gt; SAML</code>. Fill in the values captured in the step 3.</p><ul><li>Entity ID (3b a)</li><li>Single Sing-On URL (3a b)</li><li>Certificate (3b b)</li></ul><p>You may also choose to “auto create users”. This will make Unleash automatically create new users on the fly first time they sign-in to Unleash with the given SSO provider. You may also limit the auto-creation to certain email domains, shown in the example below.</p><p><img alt="Keycloak: step 4" src="/assets/images/keykloak_step4-768x644-52af8c74af86573d7ec006a3084f25f5.png"></p><h3 class="anchor anchorWithStickyNavbar_31ik" id="step-5">Step 5: Validate<a aria-hidden="true" class="hash-link" href="#step-5" title="Direct link to heading">​</a></h3><p>You have now successfully configured Unleash to use SAML 2.0 together with Keycloak as an IdP. Please note that you also must assign users to the application defined in Keycloak to actually be able to log-in to Unleash.</p><p>Try signing out of Unleash. If everything is configured correctly you should be presented with the option to sign in with SAML 2.0.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Unleash/unleash/edit/master/websitev2/docs/advanced/sso-saml-keycloak.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/advanced/sso-saml"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« <!-- -->SSO - SAML 2.0 Okta</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/advanced/sso-google"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">SSO - Google (deprecated)<!-- --> »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#basic-configuration" class="table-of-contents__link toc-highlight">Basic configuration</a><ul><li><a href="#step-1" class="table-of-contents__link toc-highlight">Step 1: Sign-in to Unleash</a></li><li><a href="#step-2" class="table-of-contents__link toc-highlight">Step 2: Navigate to SSO configuration</a></li><li><a href="#step-3" class="table-of-contents__link toc-highlight">Step 3: Keycloak with SAML 2.0</a></li><li><a href="#step-3" class="table-of-contents__link toc-highlight">Step 4: Configure SAML 2.0 Authentication provider in Unleash</a></li><li><a href="#step-5" class="table-of-contents__link toc-highlight">Step 5: Validate</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Product</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/">Docs</a></li><li class="footer__item"><a href="https://github.com/Unleash/unleash" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Open-Source<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/orgs/Unleash/projects/5" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Roadmap<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/unleash" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://join.slack.com/t/unleash-community/shared_invite/zt-8b6l1uut-LL67kLpIXm9bcN3~6RVaRQ" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/getunleash" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/logo.svg" alt="Unleash logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/img/logo.svg" alt="Unleash logo" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></div><div class="footer__copyright">Copyright © 2021 Unleash. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.bcbcc8a8.js"></script>
<script src="/assets/js/main.27ae651b.js"></script>
</body>
</html>